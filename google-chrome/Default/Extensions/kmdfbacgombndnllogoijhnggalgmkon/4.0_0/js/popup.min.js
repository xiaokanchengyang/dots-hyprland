/**
/**
 * Google Chrome Flag Extension
 * Copyright (c) 2014-2018, Myip.ms
*/

function stringToHex(e){e=unescape(encodeURIComponent(e));for(var a,t="",i=0;i<e.length;i++)a=e.charCodeAt(i).toString(16),1==a.length&&(a="0"+a),t+=a;return t}function clickAlexa(e){chrome.runtime.sendMessage({directive:"get-flat"},function(e){$('.nav-tabs a[href="#nav-alexa"]').tab("show")})}function clickIncognito(e){chrome.runtime.sendMessage({directive:"get-flat"},function(e){chrome.tabs.query({active:!0,lastFocusedWindow:!0},function(e){chrome.windows.create({url:e[0].url,incognito:!0,state:"maximized"})})})}document.addEventListener("DOMContentLoaded",function(){chrome.tabs.query({active:!0,currentWindow:!0},function(e){var a=e[0],t=chrome.extension.getBackgroundPage().arr[a.id],i=a.url,n=t.url,r=t.domain,o=a.title,l=a.incognito,s=t.cur_whois,g=chrome.i18n.getMessage("@@ui_locale"),c="ru"==g?"https://ru.myip.ms/":"https://myip.ms/",d="";s.countryName=s.countryName.replace(/&amp;/g,"&").replace(/&/g,"&amp;"),s.stateName=s.stateName.replace(/&amp;/g,"&").replace(/&/g,"&amp;"),s.cityName=s.cityName.replace(/&amp;/g,"&").replace(/&/g,"&amp;"),s.stateName&&(d='<a target="_blank" href="'+c+"info/search/1/stxt/"+encodeURIComponent(s.stateName)+'">'+s.stateName+"</a>"),s.cityName&&s.lat&&s.lon&&(s.cityName='<a target="_blank" href="https://www.google.com/maps/place/'+encodeURIComponent(s.cityName)+"/@"+s.lat+","+s.lon+',5z">'+s.cityName+"</a>"),s.stateName&&s.cityName&&s.stateName!=s.cityName?d+=", "+s.cityName:!s.stateName&&s.cityName&&(d=s.cityName),d&&(d=", "+d);var m=i.replace(/&amp;/g,"&").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),p=o.replace(/&amp;/g,"&").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),h=s.hosting.replace(/&amp;/g,"&").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),v='<div class="bottombox" align="center">';v+='<img src="images/icon16.png" width="16" height="16"> &#160; &copy;&#160; <span id="years"></span> <a target="_blank" href="https://myip.ms">Myip.ms</a> &#160; &#160; &#160; &#160; &#160; &#160;',v+='<a target="_blank" href="https://chrome.google.com/webstore/detail/ip-whois-flags-chrome-nor/kmdfbacgombndnllogoijhnggalgmkon">'+chrome.i18n.getMessage("homePage")+"</a>",v+="</div>";var b='<nav><div class="nav nav-tabs nav-pills" id="nav-tab" role="tablist">';b+='<a class="nav-item nav-link active" id="nav-home-tab" data-toggle="tab" href="#nav-home" role="tab" aria-controls="nav-home" aria-selected="true">'+chrome.i18n.getMessage("info")+"</a>",b+='<a class="nav-item nav-link" id="nav-whois-tab" data-toggle="tab" href="#nav-whois" role="tab" aria-controls="nav-whois" aria-selected="false">'+chrome.i18n.getMessage("whois")+"</a>",b+='<a class="nav-item nav-link" id="nav-wot-tab" data-toggle="tab" href="#nav-wot" role="tab" aria-controls="nav-wot" aria-selected="false">'+chrome.i18n.getMessage("reputation")+"</a>",b+='<a class="nav-item nav-link" id="nav-norton-tab" data-toggle="tab" href="#nav-norton" role="tab" aria-controls="nav-norton" aria-selected="false">'+chrome.i18n.getMessage("safeweb")+"</a>",b+='<a class="nav-item nav-link" id="nav-alexa-tab" data-toggle="tab" href="#nav-alexa" role="tab" aria-controls="nav-alexa" aria-selected="false">'+chrome.i18n.getMessage("alexa")+"</a>",r&&(b+='<a class="nav-item nav-link" id="nav-diagram-tab" data-toggle="tab" href="#nav-diagram" role="tab" aria-controls="nav-diagram" aria-selected="false">'+chrome.i18n.getMessage("diagram")+"</a>"),b+='<a class="nav-item nav-link" id="nav-sitereviews-tab" data-toggle="tab" href="#nav-sitereviews" role="tab" aria-controls="nav-sitereviews" aria-selected="false"><b style="color:#31c40f">'+chrome.i18n.getMessage("siteReviews")+"</b></a>",b+='<a class="nav-item nav-link" id="nav-pagereviews-tab" data-toggle="tab" href="#nav-pagereviews" role="tab" aria-controls="nav-pagereviews" aria-selected="false">'+chrome.i18n.getMessage("pageReview")+"</a>",b+=l?'<a class="nav-item nav-link" id="nav-pagereviews-tab" href="'+c+n+'" target="_blank" role="tab" aria-controls="nav-pagereviews" aria-selected="false">'+chrome.i18n.getMessage("more")+"</a>":'<a class="nav-item nav-link" id="go-incognito" href="#" role="tab" aria-controls="nav-incognito" aria-selected="false">'+chrome.i18n.getMessage("incognito")+"</a>",b+='</div></nav><div class="tab-content" id="nav-tabContent">',b+='<div class="tab-pane fade show active" id="nav-home" role="tabpanel" aria-labelledby="nav-home-tab">',b+='<div style="padding:10px 10px 0 10px"><table class="table table-striped">',b+="<thead><tr><th><ul><li>Website</li></ul></th><th><ul><li>",b+='<div style="float:right;margin-right:15px"><a target="_blank" title="Share current page url" href="https://www.sharethis.com/share?url='+encodeURIComponent(i)+"&title="+encodeURIComponent(o)+"&summary="+encodeURIComponent('<a href="'+c+n+'">'+o+"</a>")+"&img="+encodeURIComponent("https://myip.ms/images/empty.png")+"&pageInfo=%7B%22hostname%22%3A%22"+encodeURIComponent(i)+'%22%2C%22publisher%22%3A%229ca0f80a-806b-4854-8657-38d4e6a42222%22%7D"><img width="24" height="20" alt="Share this page" src="images/email.png"></a></div>',b+="<img style='margin-right:7px' width='16' height='16' botder='0' src='chrome://favicon/"+i+"'> <a target='_blank' href='"+c+n+"'>"+n+"</a>",b+="</li></ul></th></tr></thead>",b+="<tbody>",s.av&&(b+="<tr><td><ul><li>"+chrome.i18n.getMessage("popularity")+" : </li></ul></td><td><ul title='"+s.as+"'><li><a style='margin:1px 10px 1px 1px;border-bottom:0 none' target='_blank' href='"+c+s.as+"'><img border='0' title='"+s.as+" - "+chrome.i18n.getMessage("websitePopularity")+"' src='images/rating"+s.ap+".png'></a><b>"+(200==s.av?"&lt; ":"")+s.av+" "+chrome.i18n.getMessage("visitors")+"</b></li></ul></td></tr>\n"),s.ipv4&&(b+="<tr><td><ul><li>"+(s.ipv6?chrome.i18n.getMessage("ipv4"):chrome.i18n.getMessage("ip"))+" : </li></ul></td><td><ul>"+s.ipv4+"</ul></td></tr>\n"),s.ipv6&&(b+="<tr><td><ul><li>"+chrome.i18n.getMessage("ipv6")+": </li></ul></td><td><ul>"+s.ipv6+"</ul></td></tr>\n"),b+=s.countryID&&s.countryName?"<tr><td><ul><li>"+chrome.i18n.getMessage("location")+": </li></ul></td><td><ul><li><img style='margin-right:10px; float: left' border='0' width='16' height='11' hspace='2' vspace='2' src='images/flags/"+s.countryID+".png'><a target='_blank' href='"+c+"view/best_hosting/"+("EUR"==s.countryID?"DEU":s.countryID)+"'>"+s.countryName+"</a>"+d+"</li></ul></td></tr>\n":"<tr><td><ul><li>"+chrome.i18n.getMessage("location")+": </li></ul></td><td><ul><li><a target='_blank' href='"+c+n+"'>"+chrome.i18n.getMessage("seeCountry")+" &#187;</a></li></ul></td></tr>\n",s.hosting&&(b+="<tr><td><ul><li>"+chrome.i18n.getMessage("hostingOwner")+": </li></ul></td><td><ul><li><a target='_blank' title='"+h+"' href='"+c+"info/search/1/stxt/"+encodeURIComponent(h)+"'>"+h+"</a></li></ul></td></tr>\n"),s.ar&&"1,000,001"!=s.ar&&(b+='<tr><td colspan="2" align="right">',b+='<div class="popular" title="'+s.as+'"><a target="_blank" href="'+c+s.as+'">'+chrome.i18n.getMessage("popularity")+' &#160; <img border="0" style="margin:-4px 4px 0 4px" title="'+chrome.i18n.getMessage("worldAverageRank")+": "+s.ar+" ("+s.as+')" width="12" height="12" src="images/world.png"></a><b>'+s.ar+"</b></div>",b+='<a href="#" id="go-alexa"><img border="0" width="400" height="150" src="https://traffic.alexa.com/graph?w=900&h=400&o=f&z=3&c=1&y=t&b=ffffff&n=666666&r=6m&u='+n+'&" data-toggle="tooltip" data-placement="top" title="'+(s.ar&&"1,000,001"!=s.ar?chrome.i18n.getMessage("worldAverageRank")+": #"+s.ar+" ("+s.as+")\n------------------\n":"")+chrome.i18n.getMessage("worldRankingHint")+'"></a>',b+="</td></tr>"),s.host&&(b+="<tr><td><ul><li>"+chrome.i18n.getMessage("host")+": </li></ul></td><td><ul><li><a target='_blank' href='"+c+s.host+"'>"+s.host+"</a></li></ul></td></tr>\n"),s.ns&&(b+="<tr><td><ul><li>"+chrome.i18n.getMessage("nsServers")+": </li></ul></td><td><ul>"+s.ns+"</ul></td></tr>\n"),s.owner&&(b+="<tr><td><ul><li>"+chrome.i18n.getMessage("owner")+": </li></ul></td><td><ul>"+s.owner+"</ul></td></tr>\n"),s.email&&(b+="<tr><td><ul><li>"+chrome.i18n.getMessage("email")+": </li></ul></td><td><ul>"+s.email+"</ul></td></tr>\n"),b+="<tr><td><ul><li>"+chrome.i18n.getMessage("otherSites")+": </li></ul></td><td><ul>"+(s.othersites?s.othersites:"<li>&#160; <b><a target='_blank' href='"+c+"view/ip_addresses/"+s.ip+"#i'>"+chrome.i18n.getMessage("clickHere")+" &#187;</a></b></li>")+"</ul></td></tr>\n",b+="</tbody></table></div>",b+=v,b+="</div>",b+='<div class="tab-pane fade" id="nav-whois" role="tabpanel" aria-labelledby="nav-whois-tab">',b+='<iframe frameborder="0" scrolling="no" style="margin:5px 33px; padding:0; width:714px; height:3000px;" src="https://www.whois.com/whois/'+n+'"></iframe>',b+="</div>",b+='<div class="tab-pane fade" id="nav-wot" role="tabpanel" aria-labelledby="nav-wot-tab">',b+='<iframe frameborder="0" scrolling="no" style="margin:10px 0 0 0; padding:0; width:780px; height:3000px; background:white" src="https://www.mywot.com/en/scorecard/'+n+'"></iframe>',b+="</div>",b+='<div class="tab-pane fade" id="nav-norton" role="tabpanel" aria-labelledby="nav-norton-tab">',b+='<iframe frameborder="0" scrolling="no" style="margin:5px 0 0 0; padding:0; width:780px; height:1000px;" src="https://safeweb.norton.com/report/show?url='+n+'"></iframe>',b+="</div>",b+='<div class="tab-pane fade" id="nav-alexa" role="tabpanel" aria-labelledby="nav-alexa-tab">',b+='<iframe frameborder="0" scrolling="no" style="margin:10px 0 0 0; padding:0; width:780px; height:5100px;" src="https://www.alexa.com/siteinfo/'+n+'"></iframe>',b+="</div>",r&&(b+='<div class="tab-pane fade" id="nav-diagram" role="tabpanel" aria-labelledby="nav-diagram-tab">',b+='<iframe frameborder="0" style="margin:10px 0 0 0; padding:0; width:780px; height:1400px;" src="https://myip.ms/diagrams.php?w=760&i='+r+'"></iframe>',b+=v,b+="</div>"),b+='<div class="tab-pane fade" id="nav-sitereviews" role="tabpanel" aria-labelledby="nav-sitereviews-tab">';var u="https://www.worldreviews.org/info/web";u+="/u/"+encodeURIComponent(stringToHex(m)),u+="/s/"+encodeURIComponent(stringToHex(n)),u+="/t/"+encodeURIComponent(stringToHex(p)),u+="/l/"+encodeURIComponent(stringToHex(g)),u+="/commentWebsite/"+encodeURIComponent(stringToHex(chrome.i18n.getMessage("commentWebsite"))),u+="/reviewsWebsite/"+encodeURIComponent(stringToHex(chrome.i18n.getMessage("reviewsWebsite"))),u+="/permLink/"+encodeURIComponent(stringToHex(chrome.i18n.getMessage("permLink"))),u+="/embedCode/"+encodeURIComponent(stringToHex(chrome.i18n.getMessage("embedCode"))),u+="/p/1",b+='<iframe frameborder="0" scrolling="no" style="margin:0; padding:0; width:780px; height:2000px;" src="'+u+'"></iframe>',b+=v,b+="</div>",b+='<div class="tab-pane fade" id="nav-pagereviews" role="tabpanel" aria-labelledby="nav-pagereviews-tab">',u="https://www.worldreviews.org/info/web",u+="/u/"+encodeURIComponent(stringToHex(m)),u+="/s/"+encodeURIComponent(stringToHex(n)),u+="/t/"+encodeURIComponent(stringToHex(p)),u+="/l/"+encodeURIComponent(stringToHex(g)),u+="/commentPage/"+encodeURIComponent(stringToHex(chrome.i18n.getMessage("commentPage"))),u+="/reviewsPage/"+encodeURIComponent(stringToHex(chrome.i18n.getMessage("reviewsPage"))),u+="/permLink/"+encodeURIComponent(stringToHex(chrome.i18n.getMessage("permLink"))),u+="/embedCode/"+encodeURIComponent(stringToHex(chrome.i18n.getMessage("embedCode"))),u+="/p/2",b+='<iframe frameborder="0" scrolling="no" style="margin:0; padding:0; width:780px; height:2000px;" src="'+u+'"></iframe>',b+=v,b+="</div>",b+="</div>",$("#popup").append(b)})},!1),$(document).ready(function(){$("#go-alexa").click(clickAlexa),$("#go-incognito").click(clickIncognito),$("#years").html("2012-"+(new Date).getFullYear()+"&#160;"),$("body").tooltip()});