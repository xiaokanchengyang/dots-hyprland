var e={d:(t,o)=>{for(var n in o)e.o(o,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:o[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};function o(e,t,o,n,r,a,i,s,c,l){var u=null;"Firefox"===r()?(document.querySelector("#localPathForSettings").style.display="",document.querySelector("#proxySettings").style.display="none"):r().startsWith("Safari")&&(document.querySelector("#localPathHelpForFile").remove(),document.querySelector("#proxySettings").style.display="none",document.querySelector("#donationDiv").style.display="none");var d=document.querySelector("#proxyMode>select"),p=document.getElementById("proxyMode").parentElement,y=document.getElementById("addProxyPair");function m(e,t){var o=document.querySelector(`div.proxyPair[number='${t}']`);null===o&&(o=n("div",document.getElementById("templateProxyPair").innerHTML.trim(),{class:"proxyPair",number:t}),p.insertBefore(o,y));var r=o.querySelector(".proxy>select"),a=o.querySelector(".proxy>input");function i(e){let o=a.value.replace(/\W+([0-9]+)$/,":$1");h({number:t,proxy:r.value+" "+o})}r.onchange=i,a.onblur=i;var s=e.split(/\s+/);return s.length>0?(r.value=s[0],a.value=s[1]):r.value="PROXY",o}function g(t){if(d.value=t.proxyMode,d.onchange=function(){h({mode:this.value})},document.querySelectorAll("#proxyMode span[mode]").forEach((function(e){e.hide()})),document.querySelector(`#proxyMode span[mode=${t.proxyMode}]`).show(),"always"===t.proxyMode||"byhost"===t.proxyMode||"bypass"===t.proxyMode){if(document.querySelectorAll("div.proxyPair").remove(),"always"===t.proxyMode)m(t.proxy[0],0).querySelector(".autoproxy_hosts").hide(),y.hide();else t.proxy.forEach((function(o,n){var r=m(o,n);r.querySelector(".autoproxy_hosts").show(),function(t,o,n){var r="For below hosts, above proxy will be used, click ‚ùå to remove one.";"bypass"===t.proxyMode&&(r="For below hosts, <b>NO</b> proxy will be used, click ‚ùå to remove one."),c(o.querySelector(".autoproxy_hosts>h3"),r);var a=o.querySelector(".autoproxy_hosts>input"),i=a.value;a.value="";var s=t.autoproxy_hosts[n].sort().map((function(e){return`<div class='aphost'><span class='remove'>‚ùå</span><span class="${e===i?"highlight":""}">${e}</span></div>`})).join("");function l(){h({number:n,host:a.value,operation:"add"})}c(o.querySelector(".autoproxy_hosts>div"),s),o.querySelector(".autoproxy_hosts").querySelectorAll("div.aphost>span.remove").forEach((function(t){t.onclick=function(){var t=this.closest("div.aphost");e("updateProxy",{number:n,host:t.querySelector("span:nth-child(2)").innerText,operation:"remove"},(function(){t.remove()}))}})),a.onkeyup=function(e){13===e.keyCode&&l()},o.querySelector(".autoproxy_hosts>button").onclick=l,o.querySelector(".deleteProxyPair").onclick=function(){h({number:n,operation:"deleteProxyPair"})}}(t,r,n)})),y.show();var o=document.querySelectorAll("div.deleteProxyPair");o.length>1?o.show():o.hide()}}function h(t){e("updateProxy",t,(function(e){g(e)}))}y.onclick=function(){h({number:document.querySelectorAll("div.proxyPair").length,proxy:"SOCKS5 127.0.0.1:1080"})};const f=document.getElementById("basicSettings"),v=document.getElementById("basicMappings"),S=document.getElementById("advancedSetting"),b=document.getElementById("advancedToggler");function k(e){e?(f.hide(),S.show(),b.setAttribute("checked","checked")):(f.show(),S.hide(),b.removeAttribute("checked"))}var x="",w=document.getElementById("localPath"),P=document.getElementById("sample").innerHTML;function q(e){b.disabled=!e.isUserScriptsAvailable,k(e.isUserScriptsAvailable&&e.showAdvanced),e.localPath&&(w.value=e.localPath,x=e.localPath);var t=window.innerHeight/2;u.container.style.height=t+"px",e.snippets&&e.snippets.length?u.setValue(e.snippets,-1):u.setValue(P,-1),g(e)}function A(e){return e.length&&!/^\w+:\/\/\w+/i.test(e)&&-1===e.indexOf("file:///")&&("/"===(e=e.replace(/\\/g,"/"))[0]&&(e=e.substr(1)),e="file:///"+e),e}function E(){var t=u.getValue(),o=A(w.value.trim());o.length&&o!==x?e("loadSettingsFromUrl",{url:o},(function(e){l(e.status+" to load settings from "+o,5e3),K(e),e.snippets&&e.snippets.length?(x=o,u.setValue(e.snippets,-1)):""===t&&u.setValue(P,-1)})):(e("updateSettings",{settings:{snippets:t,localPath:A(w.value)}}),l("Settings saved",1e3))}b.onclick=function(){var t=this.checked;e("updateSettings",{settings:{showAdvanced:t}},(e=>{e.error?l(e.error,3e3):k(t)}))},document.getElementById("resetSettings").onclick=function(){"Reset"===this.innerText?this.innerText="WARNING! This will clear all your settings. Click this again to continue.":e("resetSettings",null,(function(e){q(e.settings),K(e.settings),l("Settings reset",1e3)}))},document.querySelector(".infoPointer").onclick=function(){var e=document.getElementById(this.getAttribute("for"));"none"===e.style.display?e.style.display="":e.style.display="none"},document.getElementById("save_button").onclick=E;var M=["d","R","f","E","e","x","gg","j","/","n","r","k","S","C","on","G","v","i",";e","og","g0","t","<Ctrl-6>","yy","g$","D","ob","X","sg","cf","yv","yt","N","l","cc","$","yf","w","0","yg","ow","cs","b","om","ya","h","gU","W","B","F",";j"];function K(e){i((function(t){var o=M.map((function(o,n){var r=o.origin;return e.basicMappings&&e.basicMappings.hasOwnProperty(o.origin)&&(r=e.basicMappings[o.origin]),`<div>\n                    <span class=annotation>${t(o.annotation)}</span>\n                    <span class=kbd-span><kbd data-origin="${o.origin}" data-custom="${r}">${r?a(r):"üö´"}</kbd></span>\n                </div>`}));c(v,o.join("")),v.querySelectorAll("kbd").forEach((function(e){e.onclick=function(){B.enter(this)}}))}))}document.addEventListener("surfingkeys:defaultSettingsLoaded",(function(e){const{normal:o}=e.detail;M=M.map((function(e,n){const r=o.mappings.find(t.encodeKeystroke(e));return r?{origin:e,annotation:r.meta.annotation}:null})).filter((e=>null!==e))})),document.addEventListener("surfingkeys:userSettingsLoaded",(function(t){const{settings:r,disabledSearchAliases:a,frontCommand:i}=t.detail;u=function(e){var t=ace.edit(e);t.mode="normal";var n=new o("mappingsEditor");return n.container=t.container,n.setValue=function(e,o){t.setValue(e,o)},n.getValue=function(){return t.getValue()},n.addEventListener("keydown",(function(e){e.sk_suppressed=!0,!o.isSpecialKeyOf("<Esc>",e.sk_keyName)||"normal"!==t.mode||null!==t.state.cm.state.vim.status&&""!==t.state.cm.state.vim.status||(document.activeElement.blur(),n.exit())})),document.querySelector("#mappings textarea").onfocus=function(){setTimeout((function(){n.enter(0,!0)}),10)},t.setTheme("ace/theme/chrome"),ace.config.loadModule("ace/ext/language_tools",(function(e){ace.config.loadModule("ace/autocomplete",(function(e){e.Autocomplete.startCommand.bindKey="Tab",e.Autocomplete.prototype.commands.Space=e.Autocomplete.prototype.commands.Tab,e.Autocomplete.prototype.commands.Tab=e.Autocomplete.prototype.commands.Down,e.Autocomplete.prototype.commands["Shift-Tab"]=e.Autocomplete.prototype.commands.Up})),t.setOptions({enableBasicAutocompletion:!0,enableLiveAutocompletion:!1,enableSnippets:!1})})),t.setKeyboardHandler("ace/keyboard/vim",(function(){var e=t.state.cm;e.on("vim-mode-change",(function(e){t.mode=e.mode})),e.constructor.Vim.defineEx("write","w",(function(e,t){E()})),e.constructor.Vim.defineEx("quit","q",(function(e,t){window.close()}))})),t.getSession().setMode("ace/mode/javascript"),t.$blockScrolling=1/0,n}("mappings"),q(r),"error"in r&&l(r.error,5e3),function(t,o){new Promise(((e,o)=>{const n=()=>{t({action:"getSearchAliases"},(function(t){Object.keys(t.aliases).length>0?e(t.aliases):setTimeout(n,300)}))};n()})).then((t=>{const r={};for(const e in t){let o=t[e].prompt;o.startsWith("<img src=")||(o=o.replace(/<span class='separator'>.*/,"")),r[e]={prompt:o,checked:"checked"}}for(const e in o)r[e]={prompt:o[e],checked:""};for(const t in r){const{prompt:a,checked:i}=r[t],s=n("div",`<div class='remove'><input type="checkbox" ${i} /></div><span class='prompt'>${a}</span>`);document.querySelector("#searchAliases").appendChild(s),s.querySelector("input").onchange=()=>{o.hasOwnProperty(t)?delete o[t]:o[t]=a,e("updateSettings",{settings:{disabledSearchAliases:o}})}}}))}(i,a||{}),K(r)}));var B=function(){var n=new o("KeyPicker");function r(){var e=a(l);e||(e="&nbsp;"),c(document.getElementById("inputKey"),e)}var i,l="",u=document.getElementById("keyPicker");n.addEventListener("keydown",(function(o){if(27===o.keyCode)u.hide(),n.exit();else if(8===o.keyCode){var d=t.encodeKeystroke(l);d=d.substr(0,d.length-1),l=t.decodeKeystroke(d),r()}else if(13===o.keyCode){u.hide(),n.exit(),c(i,""!==l?a(l):"üö´"),i.dataset.custom=l;const t={};Array.from(v.querySelectorAll("kbd")).forEach((e=>{var o=e.dataset.custom;e.dataset.origin!==o&&(t[e.dataset.origin]=o)})),e("updateSettings",{settings:{basicMappings:t}})}else if(o.sk_keyName.length>1){var p=JSON.stringify({metaKey:o.metaKey,altKey:o.altKey,ctrlKey:o.ctrlKey,shiftKey:o.shiftKey,keyCode:o.keyCode,code:o.code,composed:o.composed,key:o.key},null,4);s(`Unrecognized key event: ${o.sk_keyName}`,p)}else l+=t.decodeKeystroke(o.sk_keyName),r();o.sk_stopPropagation=!0}));var d=n.enter;return n.enter=function(e){d.call(n),"üö´"===(l=e.innerText)&&(l=""),r(),u.show(),i=e},n}()}e.d(t,{A:()=>o});var n=t.A;export{n as default};