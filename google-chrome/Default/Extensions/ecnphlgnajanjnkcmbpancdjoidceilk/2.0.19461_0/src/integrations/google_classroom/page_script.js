(function(){"use strict";function s(o){if(!o)return!1;const n=[...o.matchAll(/@/g)];if(n.length!==1)return!1;const t=n[0];return!(!t||t.index===0||t.index===o.length-1)}function c(o){return/^\d+$/.test(o??"")}function u(){var n,t;try{const e=window.WIZ_global_data;if(e&&s(e.oPEP7c))return c(e.qDCSke)?{email:e.oPEP7c,googleUserId:e.qDCSke}:{email:e.oPEP7c}}catch(e){console.log("Failed to get email from WIZ_global_data",e)}try{const e=window.IJ_values,r=e[47],i=e[49];if(e&&s(r))return c(i)?{email:r,googleUserId:i}:{email:r}}catch(e){console.log("Failed to get email from IJ_values",e)}try{const e=window.gbar_;if(e&&e.CONFIG&&s(e.CONFIG[0][4].na[5]))return{email:e.CONFIG[0][4].na[5]}}catch(e){console.log("Failed to get email from gbar_",e)}const o=(t=(n=document.querySelector("div.gb_Cc div.gb_Cb"))==null?void 0:n.nextSibling)==null?void 0:t.textContent;if(s(o))return{email:o};console.log("Not found the email for current user")}const l=u();l&&window.postMessage({type:"kami-user-info-from-page",userInfo:l},{targetOrigin:window.location.origin});function d(o){const n=new URL(o.src);return(n.host.endsWith(".kamihq.com")||n.host.endsWith(".kamipdf.com"))&&o.src.includes("google_classroom_add_on=")?(o.setAttribute("allow","autoplay *; camera *; encrypted-media *; fullscreen *; microphone *; picture-in-picture *; usb *; clipboard-read *; clipboard-write *; display-capture *;"),o.removeAttribute("sandbox"),o.src=o.src,!0):!1}function f(){new MutationObserver(function(t){for(const e of t)for(const r of e.addedNodes){const i=[r];for(;;){const a=i.pop();if(!a)break;if(a instanceof HTMLIFrameElement){if(d(a))return}else i.push(...a.childNodes)}return!1}}).observe(document.body,{childList:!0});const n=document.querySelectorAll("iframe");for(const t of n)d(t)}f()})();
