(()=>{"use strict";var t={5739:(t,e,a)=>{a.d(e,{$:()=>i});const i=globalThis.gvar??{}}},e={};function a(i){var o=e[i];if(void 0!==o)return o.exports;var r=e[i]={exports:{}};return t[i](r,r.exports,a),r.exports}a.d=(t,e)=>{for(var i in e)a.o(e,i)&&!a.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);const i={dispatchEvent:EventTarget.prototype.dispatchEvent,stopImmediatePropagation:Event.prototype.stopImmediatePropagation,appendChild:Node.prototype.appendChild,map:{clear:Map.prototype.clear,set:Map.prototype.set,has:Map.prototype.has,get:Map.prototype.get},array:{push:Array.prototype.push,includes:Array.prototype.includes},Map,ShadowRoot,HTMLMediaElement,CustomEvent,JSON:{parse:JSON.parse,stringify:JSON.stringify}};let o;a(5739).$;let r,n,c,s,l,p=[],u=[];function d(t,e,a){const i=t?.prototype[e];if(i){t.prototype[e]=function(...t){const e=i.apply(this,t);return a(t,this,e),e};try{c.set(t.prototype[e],i)}catch(t){}}}function h(t,e,a){e instanceof i.HTMLMediaElement&&(i.array.includes.call(p,e)||(i.array.push.call(p,e),r.wiggleOn(e)))}function m(t,e,a){a instanceof i.ShadowRoot&&(i.array.includes.call(u,a)||(i.array.push.call(u,a),r.wiggleOn(a)))}function y(t){let e=document.getElementById("movie_player");if(e){try{e.getAvailablePlaybackRates().push(16)}catch(t){return}l=t=>{if(s!==t){s=t;try{n.activateFor(1e3),e.setPlaybackRate(t)}catch(t){}}},r?.send({type:"YT_REQUEST_RATE"}),window.removeEventListener("timeupdate",y,{capture:!0})}}class g{originalFn=Function.prototype.toString;outputMap=new Map;constructor(){if(location.hostname.includes("twitch"))return;let t=this;Function.prototype.toString=function(...e){try{const e=i.map.get.call(t.outputMap,this);if(e)return e}catch(t){}return t.originalFn.apply(this,e)},this.set(Function.prototype.toString,this.originalFn)}set=(t,e)=>{try{const a=this.originalFn.call(e);a&&i.map.set.call(this.outputMap,t,a)}catch(t){}}}class f{active=!1;dummyAudio=new Audio;ogDesc={playbackRate:Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"playbackRate"),defaultPlaybackRate:Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"defaultPlaybackRate")};coherence={playbackRate:new Map,defaultPlaybackRate:new Map};constructor(){for(let t of["playbackRate","defaultPlaybackRate"]){const e=this.ogDesc[t];let a=this.coherence[t],o=this;try{Object.defineProperty(HTMLMediaElement.prototype,t,{configurable:!0,enumerable:!0,get:function(){return o.ogDesc[t].get.call(this),o.active?i.map.has.call(a,this)?i.map.get.call(a,this):1:e.get.call(this)},set:function(r){!o.active||this instanceof i.HTMLMediaElement||o.ogDesc[t].set.call(this,r);try{let t=e.set.call(o.active?o.dummyAudio:this,r),n=e.get.call(o.active?o.dummyAudio:this);return i.map.set.call(a,this,n),t}catch(t){throw t}}});const r=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,t);c.set(r.get,e.get),c.set(r.set,e.set)}catch(t){}}}activate=()=>{this.tempTimeout&&(clearTimeout(this.tempTimeout),delete this.tempTimeout),this.active||(this.active=!0,i.map.clear.call(this.coherence.playbackRate),i.map.clear.call(this.coherence.defaultPlaybackRate),p.forEach((t=>{i.map.set.call(this.coherence.playbackRate,t,this.ogDesc.playbackRate.get.call(t)),i.map.set.call(this.coherence.defaultPlaybackRate,t,this.ogDesc.defaultPlaybackRate.get.call(t))})))};deactivate=()=>{this.tempTimeout&&(clearTimeout(this.tempTimeout),delete this.tempTimeout),this.active&&(this.active=!1)};activateFor=t=>{this.active||(this.activate(),this.tempTimeout=setTimeout(this.deactivate,t))}}class v{#t=document.createElement("div");#e=this.#t.attachShadow({mode:"open"});#a=function(){return Math.ceil(1e10*Math.random()).toString()}();#i=`GS_SERVER_${this.#a}`;#o=`GS_CLIENT_${this.#a}`;constructor(){this.#t.id="GS_PARASITE",this.#e.addEventListener(this.#o,this.handle,{capture:!0}),document.documentElement.appendChild(this.#t),this.#t.dispatchEvent(new CustomEvent("GS_INIT",{detail:this.#a})),this.#t.remove()}handle=t=>{let e;i.stopImmediatePropagation.call(t);try{t.detail&&(e=i.JSON.parse(t.detail))}catch(t){}e&&("SEEK_NETFLIX"===e.type?function(t){try{(function(){const t=window.netflix.appContext.state.playerApp.getAPI().videoPlayer;return t.getAllPlayerSessionIds().map((e=>t.getVideoPlayerBySessionId(e)))})().forEach((e=>e.seek(1e3*t)))}catch(t){}}(e.value):"GHOST"===e.type?e.off?n.deactivate():n.activate():"YT_RATE_CHANGE"===e.type&&e.value&&l?.(e.value))};send=t=>{i.dispatchEvent.call(this.#e,new i.CustomEvent(this.#i,{detail:i.JSON.stringify({type:"MSG",data:t})}))};wiggleOn=t=>{i.appendChild.call(t,this.#t),i.dispatchEvent.call(this.#e,new i.CustomEvent(this.#i,{detail:i.JSON.stringify({type:"WIGGLE"})})),this.#t.remove()}}!function(){if(o=o??navigator.userAgent.includes("Firefox/"),o){if(window.loadedGsCtx)return;window.loadedGsCtx=!0,function(){if(!location.hostname.includes("soundcloud.com"))return;const t=AudioContext.prototype.createMediaElementSource;AudioContext.prototype.createMediaElementSource=function(...e){return t.apply(this,[document.createElement("audio")])}}()}!function(){if(!location.hostname.includes("pan.baidu.com"))return;let t=navigator.userAgent;t=t.replace("Windows NT","Windоws NT"),t=t.replace("Macintosh","Macintоsh"),t=t.replace("Chrome","Chrоme"),t=t.replace("Firefox","Firefоx"),t=t.replace("Edg","Eԁg"),t=t.replace("Safari","Sаfari");const e=Object.getOwnPropertyDescriptor(Navigator.prototype,"userAgent");Object.defineProperty(Navigator.prototype,"userAgent",{...e,get:function(){return t}})}(),c=new g,function(){if(!location.hostname.includes("bilibili.com"))return;let t=window.localStorage.getItem;window.localStorage.getItem=function(...e){let a=t.apply(this,e);try{if("bwphevc_supported"===e[0]){let t=JSON.parse(a);if(t.supported&&!t?.info?.isBrowserHEVCTypeSupported)return t.supported=!1,JSON.stringify(t)}}catch(t){}return a},c.set(window.localStorage.getItem,t)}(),n=new f,r=new v,"www.youtube.com"===location.hostname&&window.addEventListener("timeupdate",y,{capture:!0}),d(HTMLMediaElement,"play",h),d(HTMLMediaElement,"pause",h),d(HTMLMediaElement,"load",h),d(Element,"createShadowRoot",m),d(Element,"attachShadow",m)}()})();