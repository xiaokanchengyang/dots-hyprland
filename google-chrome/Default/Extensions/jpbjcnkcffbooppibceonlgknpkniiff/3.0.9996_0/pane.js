(()=>{"use strict";var t={5739:(t,e,i)=>{i.d(e,{$:()=>s});const s=globalThis.gvar??{}}},e={};function i(s){var n=e[s];if(void 0!==n)return n.exports;var o=e[s]={exports:{}};return t[s](o,o.exports,i),o.exports}function s(t){let e=document.createElement("div");return e.innerHTML=t,e.children[0]}i.d=(t,e)=>{for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i(5739).$;var n=i(5739).$,o=function(t){return t[t.X_LEFT=1]="X_LEFT",t[t.X_RIGHT=2]="X_RIGHT",t[t.Y_TOP=3]="Y_TOP",t[t.Y_BOTTOM=4]="Y_BOTTOM",t[t.MOVING=5]="MOVING",t}(o||{});class h{width=500;height=350;x=(window.innerWidth-this.width)/2+window.scrollX;y=(window.innerHeight-this.height)/2+window.scrollY;constructor(t){this.div=t,this.div.addEventListener("pointerdown",this.handlePointerDown),this.sync()}release=()=>{this.handlePointerUp(),this.div.remove(),this.div.removeEventListener("pointerdown",this.handlePointerDown)};handlePointerDown=t=>{if(0!==t.button)return;if(t.stopImmediatePropagation(),this.ref)return void this.handlePointerUp();const e=new Set;t.offsetX<20?e.add(o.X_LEFT):this.width-t.offsetX<20&&e.add(o.X_RIGHT),t.offsetY<20?e.add(o.Y_TOP):this.height-t.offsetY<20&&e.add(o.Y_BOTTOM),0===e.size&&e.add(o.MOVING),this.ref={x:this.x,y:this.y,width:this.width,height:this.height,cursorX:t.pageX,cursorY:t.pageY,transforms:e},window.addEventListener("pointermove",this.handlePointerMove,{capture:!0,passive:!0}),n.os.eListen.pointerUpCbs.add(this.handlePointerUp)};handlePointerUp=()=>{delete this.ref,window.removeEventListener("pointermove",this.handlePointerMove,!0),n.os.eListen.pointerUpCbs.delete(this.handlePointerUp)};handlePointerMove=t=>{if(!this.ref)return void this.handlePointerUp();var e={x:this.x,y:this.y,width:this.width,height:this.height};const i=t.pageX-this.ref.cursorX,s=t.pageY-this.ref.cursorY;this.ref.transforms.has(o.X_LEFT)?(e.width=Math.max(this.ref.width-i,60),e.x=this.ref.x-(e.width-this.ref.width)):this.ref.transforms.has(o.X_RIGHT)&&(e.width=this.ref.width+i),this.ref.transforms.has(o.Y_TOP)?(e.height=Math.max(this.ref.height-s,60),e.y=this.ref.y-(e.height-this.ref.height)):this.ref.transforms.has(o.Y_BOTTOM)&&(e.height=this.ref.height+(t.pageY-this.ref.cursorY)),this.ref.transforms.has(o.MOVING)&&(e.x=this.ref.x+i,e.y=this.ref.y+s),this.width=Math.max(60,e.width),this.height=Math.max(60,e.height),this.x=e.x,this.y=e.y,this.sync()};sync(){this.div.style.width=`${this.width}px`,this.div.style.height=`${this.height}px`,this.div.style.position="absolute",this.div.style.left=`${this.x}px`,this.div.style.top=`${this.y}px`,this.div.style.zIndex="99999999999",this.div.style.userSelect="none"}}var r=i(5739).$;class d{div=document.createElement("div");innerDiv=document.createElement("div");sDiv=new h(this.div);hasBorder=!0;constructor(t,e=!1){this.filter=t,this.innerDiv.classList.add("inner"),this.div.appendChild(this.innerDiv),this.div.classList.add("pane"),d.addPane(this),d.shadowRoot?.append(this.div),this.div.tabIndex=0,this.div.addEventListener("contextmenu",(t=>{t.preventDefault(),t.stopImmediatePropagation(),this.release()}),{once:!0});const i={clone:s('<svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M464 0c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48H176c-26.51 0-48-21.49-48-48V48c0-26.51 21.49-48 48-48h288M176 416c-44.112 0-80-35.888-80-80V128H48c-26.51 0-48 21.49-48 48v288c0 26.51 21.49 48 48 48h288c26.51 0 48-21.49 48-48v-48H176z"></path></svg>'),times:s('<svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 352 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"></path></svg>'),paintRoller:s('<label for="colorInput">\n      <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M416 128V32c0-17.67-14.33-32-32-32H32C14.33 0 0 14.33 0 32v96c0 17.67 14.33 32 32 32h352c17.67 0 32-14.33 32-32zm32-64v128c0 17.67-14.33 32-32 32H256c-35.35 0-64 28.65-64 64v32c-17.67 0-32 14.33-32 32v128c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32V352c0-17.67-14.33-32-32-32v-32h160c53.02 0 96-42.98 96-96v-64c0-35.35-28.65-64-64-64z"></path></svg>\n      <input type="color" id="colorInput">\n    </label>'),borderAll:s('<svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M416 32H32A32 32 0 0 0 0 64v384a32 32 0 0 0 32 32h384a32 32 0 0 0 32-32V64a32 32 0 0 0-32-32zm-32 64v128H256V96zm-192 0v128H64V96zM64 416V288h128v128zm192 0V288h128v128z"></path></svg>')},n=document.createElement("div");this.div.appendChild(n),n.classList.add("menu"),n.appendChild(i.clone),n.appendChild(i.paintRoller),n.appendChild(i.borderAll),n.appendChild(i.times),i.clone.addEventListener("click",(t=>{d.clone(this).div.focus()})),i.paintRoller.querySelector("#colorInput").addEventListener("input",(t=>{this.color=t.target.value,this.sync()})),i.paintRoller.addEventListener("click",(t=>{this.color&&(delete this.color,this.sync(),t.preventDefault())})),i.borderAll.addEventListener("click",(t=>{this.hasBorder=!this.hasBorder,this.sync()})),i.times.addEventListener("click",(t=>{this.release()})),this.sync()}release=()=>{delete this.div,this.sDiv?.release(),delete this.sDiv,d.deletePane(this)};sync=()=>{this.hasBorder?(this.div.style.border="1px solid black",this.div.classList.add("hasBorder")):(this.div.style.border="none",this.div.classList.remove("hasBorder")),this.color?(this.innerDiv.style.backgroundColor=this.color,this.innerDiv.style.backdropFilter="none"):(this.innerDiv.style.backdropFilter=this.filter,this.innerDiv.style.backgroundColor="transparent")};static panes=new Set;static addPane=t=>{if(d.panes.add(t),d.panes.size&&!d.shadowRoot){d.shadowRoot=document.createElement("div").attachShadow({mode:"closed"});const t=document.createElement("style");t.textContent='\n.pane:focus { outline: none; }\n.pane.hasBorder:focus { outline: 2px solid black; }\n\n.menu {\n    position: absolute;\n    right: 3px;\n    top: 3px;\n    opacity: 0;\n    display: grid;\n    pointer-events: none;\n    grid-auto-flow: column;\n    justify-content: right;\n    grid-column-gap: 5px;\n    font-size: 16px;\n    transition: opacity 0.1s ease-out;\n}\n\n.inner {\n    width: 100%;\n    height: 100%;\n}\n\n.pane:focus > .menu, .pane:hover > .menu {\n    opacity: 1;\n    pointer-events: initial;\n}\n\nsvg {\n    opacity: 0.5;\n    background-color: black;\n    color: white;\n    padding: 5px;\n}\n\nsvg:hover {\n    opacity: 1;\n}\n\ninput[type="color"] {\n    position: absolute;\n    pointer-events: none;\n    opacity: 0;\n    width: 0px;\n    height: 0px;\n}',d.shadowRoot.appendChild(t),document.body.appendChild(d.shadowRoot.host)}};static deletePane=t=>{d.panes.delete(t),0===d.panes.size&&d.shadowRoot&&(d.shadowRoot.host.remove(),delete d.shadowRoot)};static clone=t=>{const e=new d(t.filter,!0);return e.color=t.color,e.sDiv.x=t.sDiv.x+20,e.sDiv.y=t.sDiv.y+20,e.sDiv.width=t.sDiv.width,e.sDiv.height=t.sDiv.height,e.sDiv.sync(),e.hasBorder=t.hasBorder,e.sync(),e}}r.Pane=d})();