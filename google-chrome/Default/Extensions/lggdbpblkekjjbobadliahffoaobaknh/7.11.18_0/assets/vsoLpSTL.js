function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{_ as l}from"./CRTsvRaD.js";import{a as h,M as r,w as y,p as A,R as c,x as v,y as C,z as D}from"./SHnOzo4l.js";import{i as R,a as O}from"./Cjbr4oTZ.js";let m=!1,o,i;function T(e){switch(e.route){case c.Recording:{if(m)break;m=!0,_(e.params).then(t=>{m=!1,t.start()});break}case c.NewPin:{B().then(t=>{t.start()});break}case c.Blurring:{_({}).then(t=>{t.start(),t.blur()});break}default:o?.stop(),o=void 0,i?.stop(),i=void 0}if(e.route===c.Hidden&&!e.params?.isEnterpriseUser)return d();L()||k(e)}function w(e){const t=new CustomEvent("tango-overlay",{detail:e});document.dispatchEvent(t)}function L(){return document.querySelector(v)}function d(){w("remove");const e=L();e&&e.remove()}async function k(e){if(!document.body)return;if(R()){if(!C.includes(e.route)||O())return;const n=window.frameElement;if(n&&M(n)||document.body.isContentEditable)return}d();const t=document.createElement(v);t.id=D,t.attachShadow({mode:"open"}),document.body.appendChild(t),await h({name:r.InjectOverlay}),w("render")}const M=e=>!!(e.id.endsWith("_contentIframe")||e.classList.value.startsWith("cke_wysiwyg")||e.closest(".x-html-editor-wrap")),u=()=>l(()=>import("./DMUoDuqg.js"),__vite__mapDeps([])),_=async e=>{if(!o){const{default:t}=await l(()=>import("./dCKaS7nY.js"),__vite__mapDeps([]));o=new t(e)}return o},B=async()=>{if(!i){const{default:e}=await l(()=>import("./BAQLbu61.js"),__vite__mapDeps([]));i=new e}return i},P=async()=>{window.addEventListener("click",e=>{E(e)&&(e.stopImmediatePropagation(),e.preventDefault())},!0),window.addEventListener("mouseup",e=>{const t=E(e);t&&h({name:r.HandleDirectToGuidanceLinkClick,url:t})},!0)},E=e=>{let t=e.target instanceof Element&&e.target.closest("a");if(t instanceof HTMLAnchorElement){const n=t;if((n.href.includes("tango.us")||y)&&n.href.includes(A))return n.href}return!1};P();function I(e,t,n){switch(e.message.name){case r.CurrentRoute:const g={route:e.message.route,params:e.message.params};T(g),n();return;case r.ClearAllBlur:n(),u().then(({destroyAllDomObservers:a,clearAllBlur:s})=>{s(),a()});return;case r.ClearBlurredFields:n(),u().then(({clearBlurByType:a})=>{e.message.fields.forEach(s=>{s.id&&a(s.id)})});return;case r.RunAutoBlur:u().then(({runAutoBlur:a})=>{a(e.message.fields,e.message.secureBlurSettings)}),n();return;case r.StopAutoBlur:u().then(({destroyAllDomObservers:a,clearAllAutoBlur:s})=>{s(),a()}),n();return;case r.UnloadContentScript:p(),n();return;case r.StepEventsProcessed:o?.processStepEvents(e.message.eventIds),n();return;case r.CheckContentScriptActive:{n();return}}}function b(){chrome.runtime.onMessage.addListener(I),d(),chrome.runtime.sendMessage({message:{name:r.InjectTestOnlyOpenSidePanelButton}}),chrome.runtime.sendMessage({message:{name:r.CurrentRoute}}).then(T)}const f="remove_content_script_"+chrome.runtime.id;function p(){document.removeEventListener(f,p),d(),o?.stop(),chrome.runtime?.onMessage.removeListener(I)}document.dispatchEvent(new CustomEvent(f));document.addEventListener(f,p);b();
//# sourceMappingURL=vsoLpSTL.js.map
