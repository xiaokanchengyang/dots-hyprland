const w={button:{tags:["button","summary"],ariaRoles:["button","tab"],inputTypes:["button","submit"],interactive:!0},link:{tags:["a"],ariaRoles:["link"],interactive:!0},option:{tags:["option"],ariaRoles:["option"],interactive:!0},menuitem:{ariaRoles:["menuitem","treeitem"],interactive:!0},combobox:{ariaRoles:["combobox"],interactive:!0},select:{tags:["select"],interactive:!0},radio:{inputTypes:["radio"],ariaRoles:["radio","menuitemradio"],interactive:!0},checkbox:{inputTypes:["checkbox"],ariaRoles:["checkbox","switch","menuitemcheckbox"],interactive:!0},slider:{inputTypes:["range"],ariaRoles:["slider"],interactive:!0},textbox:{tags:["textarea","input"],ariaRoles:["textbox"],contentEditable:!0,interactive:!0},searchbox:{inputTypes:["search"],ariaRoles:["searchbox"],interactive:!0},canvas:{tags:["canvas"],interactive:!0},label:{tags:["label"],interactive:!0},listitem:{tags:["li"],ariaRoles:["listitem"],interactive:!0},list:{tags:["ul","ol"],ariaRoles:["list"],interactive:!1},image:{tags:["picture","svg","img"],interactive:!1},table:{tags:["table"],ariaRoles:["table","grid"],interactive:!1},dialog:{tags:["dialog"],ariaRoles:["alert","alertdialog","dialog","listbox"],interactive:!1},article:{tags:["article"],ariaRoles:["article"],interactive:!1},form:{tags:["form"],ariaRoles:["form"],interactive:!1}};var T=(e=>(e.button="button",e.link="link",e.option="option",e.menuitem="menuitem",e.combobox="combobox",e.select="select",e.radio="radio",e.checkbox="checkbox",e.slider="slider",e.textbox="textbox",e.searchbox="searchbox",e.canvas="canvas",e.label="label",e.list="list",e.listitem="listitem",e.image="image",e.table="table",e.dialog="dialog",e.article="article",e.form="form",e))(T||{});const M=e=>{const t=Object.values(w),n=t.filter(o=>e==null?!0:o.interactive===e).flatMap(o=>o.tags).filter(Boolean);(e==null||e)&&n.push('[contenteditable="true"]');const r=t.filter(o=>e==null?!0:o.interactive===e).flatMap(o=>o.ariaRoles).filter(Boolean);return n.concat(r.map(o=>`[role="${o}"]`)).join(",")},ne=e=>{const t=w[e],n=[...t.tags||[]];return t.contentEditable&&n.push('[contenteditable="true"]'),t.inputTypes&&n.push(...t.inputTypes.map(r=>`input[type="${r}"]`)),t.ariaRoles&&n.push(...t.ariaRoles.map(r=>`[role="${r}"]`)),n.join(",")},ie=M(!0),B=M(),re=(e,t=!1)=>{const n=JSON.parse(e.attributes),r=n.role,o=e.tag.toLowerCase(),a=o==="input"?n.type:null,c=n.contenteditable==="true";return R({ariaRole:r,tagName:o,inputType:a,isContentEditable:c},t)},z=(e,t=!1)=>{const n=e.getAttribute("role"),r=e.tagName.toLowerCase(),o=r==="input"?e.type:null,a=e.contentEditable==="true";return R({ariaRole:n,tagName:r,inputType:o,isContentEditable:a},t)},R=(e,t)=>{const{ariaRole:n,tagName:r,inputType:o,isContentEditable:a}=e;let c=Object.entries(w);if(t&&(c=c.filter(([i,s])=>s.interactive)),n){const i=c.find(([s,l])=>{var d;return(d=l.ariaRoles)==null?void 0:d.includes(n)});if(i)return i[0]}if(o){const i=c.find(([s,l])=>{var d;return(d=l.inputTypes)==null?void 0:d.includes(o)});if(i)return i[0]}if(a){const i=c.find(([s,l])=>l.contentEditable);if(i)return i[0]}const u=c.find(([i,s])=>{var l;return(l=s.tags)==null?void 0:l.includes(r)});return u?u[0]:null},L=(e,t=document,n=!0)=>{var r;const o=t.defaultView||window;if("labels"in e&&e.labels){const i=[...e.labels].find(s=>!!s.innerText);if(i)return i}const a=e.getAttribute("aria-labelledby")??e.getAttribute("aria-describedby");if(a){const i=a.split(" ").reverse().map(l=>t.getElementById(l)).filter(l=>!!(l!=null&&l.innerText)),s=i.find(l=>l.tagName==="LABEL");if(s)return s;if(i[0]&&(e.role!=="button"||!e.contains(i[0])))return i[0]}const c=e.previousElementSibling||((r=e.parentElement)==null?void 0:r.previousElementSibling);if(n&&c){let i=c instanceof o.HTMLLabelElement?c:null;if(i||(i=c.querySelector("label")),i&&!i.htmlFor.length&&!i.querySelector("input,select,textarea"))return i}const u=e.parentElement;if(n&&u){const i=L(u,t,!1);if(i instanceof o.HTMLLabelElement){const s=t.getElementById(i.htmlFor);if(s&&s.contains(e))return i}}},S='[role="menu"],[role="listbox"],[role="tooltip"],[aria-activedescendant]',C='[id*="dropdown"],[id*="popover"]',D='[role="group"],[role="radiogroup"],[role="menu"],fieldset',W=e=>e?e.closest(S)||e.closest(C):null,H=e=>e.matches(`${S},${C}`),oe=e=>e?e.closest('dialog,[role="dialog"],[role="alertdialog"],[role="alert"]'):null,_=e=>e.closest("fieldset")??e.closest(D),F=e=>e.matches(D),I=(e,t=document)=>{var n;const r=t.defaultView||window,o=W(e);if(o)return o;const a=_(e);if(a)return a;const c=(n=e.parentElement)==null?void 0:n.closest(B);if(c instanceof r.HTMLElement)return c},ae=e=>!!(H(e)||z(e)===T.dialog||F(e));let m,$,k;function h(e,t){if(k=new Date,e.nodeType!==Node.ELEMENT_NODE)throw new Error("Can't generate CSS selector for non-element node type.");if(e.tagName.toLowerCase()==="html")return"html";const n={root:document.body,idName:o=>!0,className:o=>!0,tagName:o=>!0,attr:(o,a)=>!1,seedMinLength:1,optimizedMinLength:2,threshold:1e3,maxNumberOfTries:1e4,timeoutMs:void 0};m={...n,...t},$=V(m.root,n);let r=f(e,"all",()=>f(e,"two",()=>f(e,"one",()=>f(e,"none"))));if(r){const o=q(j(r,e));return o.length>0&&(r=o[0]),g(r)}else throw new Error("Selector was not found.")}function V(e,t){return e.nodeType===Node.DOCUMENT_NODE?e:e===t.root?e.ownerDocument:e}function f(e,t,n){let r=null,o=[],a=e,c=0;for(;a;){const u=new Date().getTime()-k.getTime();if(m.timeoutMs!==void 0&&u>m.timeoutMs)throw new Error(`Timeout: Can't find a unique selector after ${u}ms`);let i=b(J(a))||b(...U(a))||b(...G(a))||b(K(a))||[N()];const s=P(a);if(t=="all")s&&(i=i.concat(i.filter(v).map(l=>p(l,s))));else if(t=="two")i=i.slice(0,1),s&&(i=i.concat(i.filter(v).map(l=>p(l,s))));else if(t=="one"){const[l]=i=i.slice(0,1);s&&v(l)&&(i=[p(l,s)])}else t=="none"&&(i=[N()],s&&(i=[p(i[0],s)]));for(let l of i)l.level=c;if(o.push(i),o.length>=m.seedMinLength&&(r=E(o,n),r))break;a=a.parentElement,c++}return r||(r=E(o,n)),!r&&n?n():r}function E(e,t){const n=q(A(e));if(n.length>m.threshold)return t?t():null;for(let r of n)if(O(r))return r;return null}function g(e){let t=e[0],n=t.name;for(let r=1;r<e.length;r++){const o=e[r].level||0;t.level===o-1?n=`${e[r].name} > ${n}`:n=`${e[r].name} ${n}`,t=e[r]}return n}function x(e){return e.map(t=>t.penalty).reduce((t,n)=>t+n,0)}function O(e){const t=g(e);switch($.querySelectorAll(t).length){case 0:throw new Error(`Can't select any node with this selector: ${t}`);case 1:return!0;default:return!1}}function J(e){const t=e.getAttribute("id");return t&&m.idName(t)?{name:"#"+CSS.escape(t),penalty:0}:null}function U(e){return Array.from(e.attributes).filter(t=>m.attr(t.name,t.value)).map(t=>({name:`[${CSS.escape(t.name)}="${CSS.escape(t.value)}"]`,penalty:.5}))}function G(e){return Array.from(e.classList).filter(m.className).map(t=>({name:"."+CSS.escape(t),penalty:1}))}function K(e){const t=e.tagName.toLowerCase();return m.tagName(t)?{name:t,penalty:2}:null}function N(){return{name:"*",penalty:3}}function P(e){const t=e.parentNode;if(!t)return null;let n=t.firstChild;if(!n)return null;let r=0;for(;n&&(n.nodeType===Node.ELEMENT_NODE&&r++,n!==e);)n=n.nextSibling;return r}function p(e,t){return{name:e.name+`:nth-child(${t})`,penalty:e.penalty+1}}function v(e){return e.name!=="html"&&!e.name.startsWith("#")}function b(...e){const t=e.filter(Q);return t.length>0?t:null}function Q(e){return e!=null}function*A(e,t=[]){if(e.length>0)for(let n of e[0])yield*A(e.slice(1,e.length),t.concat(n));else yield t}function q(e){return[...e].sort((t,n)=>x(t)-x(n))}function*j(e,t,n={counter:0,visited:new Map}){if(e.length>2&&e.length>m.optimizedMinLength)for(let r=1;r<e.length-1;r++){if(n.counter>m.maxNumberOfTries)return;n.counter+=1;const o=[...e];o.splice(r,1);const a=g(o);if(n.visited.has(a))return;O(o)&&X(o,t)&&(yield o,n.visited.set(a,!0),yield*j(o,t,n))}}function X(e,t){return $.querySelector(g(e))===t}const Y=(e,t,n)=>{const r=Date.now(),o={root:n,seedMinLength:4,optimizedMinLength:5,maxNumberOfTries:0};let a=h(e,{...o,timeoutMs:y(r,t)});const c=[a];let u=h(e,{...o,timeoutMs:y(r,t),className:i=>!a.includes(`.${i} `)&&!a.includes(`.${i}:`)&&!a.endsWith(`.${i}`),idName:i=>a.includes(`#${i} `)&&a.includes(`#${i}:`)&&a.endsWith(`#${i}`)});/\.|#/.test(u)&&c.push(u);try{const i=h(e,{...o,timeoutMs:y(r,t),seedMinLength:5,className:()=>!1,idName:()=>!1,threshold:50});/^(body|html)/.test(i)||c.push(i)}catch{}return Z(c.map(ee)).join(", ")},Z=e=>[...new Set(e)],ee=e=>e.replace(/^html > /,"").replace(/^body > /,"").trim(),y=(e,t)=>t===void 0?void 0:t-(Date.now()-e),le=async(e,t,n=document)=>{const r=Date.now(),o=I(e,n),a=L(e,n),c=[{element:e,name:"target"},{element:o,name:"parent"},{element:a,name:"label"}],u={};for(const{element:i,name:s}of c){const l=te(r,t);if(!i){u[s]=void 0;continue}if(l===void 0||l>0)try{const d=Y(i,l,n.body);u[s]=d}catch(d){if(d instanceof Error&&d.message.startsWith("Timeout"))throw new Error("Timeout");u[s]=void 0}else throw new Error("Timeout")}return u},te=(e,t)=>t===void 0?void 0:t-(Date.now()-e);export{I as C,T as a,le as b,re as c,M as d,_ as e,ie as f,z as g,oe as i,L as m,W as s,ne as u,ae as v};
//# sourceMappingURL=CavFI0yr.js.map
