import{j as n,c as N}from"./CMhnKYCA.js";import{N as r,l as A}from"./BjgJiouD.js";import{b as k,A as v,F as P}from"./Dph_3Rnf.js";import{L,S as M,N as G,T as U}from"./GDm3m2FJ.js";import{f as q}from"./XELyL0QY.js";import{e as B,s as H,b as x}from"./DieEiE9e.js";import{f as W}from"./DlLMD6w7.js";import{r as o}from"./bVFUYZgl.js";import{M as Y,r as K}from"./yXRVlCQS.js";import{F as O,M as D}from"./SHnOzo4l.js";import{m as Q}from"./BTyHENqi.js";import{d as E}from"./DxyQva6U.js";import"./Cpj98o6Y.js";import"./Cil-fwZs.js";import"./CavFI0yr.js";import"./CTuBfHaM.js";import"./Cjbr4oTZ.js";function _(){const b=k(O.GUIDANCE_DEBUGGER);B();const[i,m]=o.useState(null),[l,w]=o.useState(null),[I,d]=o.useState(!1),[R,p]=o.useState(void 0),[g,T]=o.useState(null),[f,j]=o.useState(null),u=o.useRef(null);o.useEffect(()=>{const{workspaceId:t,nuggetId:e,domain:a,fileName:c}=F();if(!t||!e||!a){alert("workspaceId, nuggetId, and domain are required query parameters!");return}chrome.runtime.sendMessage({message:{name:"getNuggetData",workspaceId:t,nuggetId:e,domain:a}}).then(s=>{if(!s){alert("No nugget data available");return}w(s.thread.metadata)}),chrome.runtime.sendMessage({message:{name:D.GetSnapshotDataForNugget,snapshotType:r.DISPLAY,nuggetId:e,workspaceId:t,fileName:c}}).then(s=>{s&&(j(s),d(!0))}),chrome.runtime.sendMessage({message:{name:D.GetSnapshotDataForNugget,snapshotType:r.CREATE,nuggetId:e,workspaceId:t}}).then(s=>{if(s){T(s),d(!0);return}})},[]);function F(){const t=window.location.href,e=new URL(t).searchParams;return{workspaceId:e.get("workspaceId"),nuggetId:e.get("nuggetId"),domain:e.get("domain"),fileName:e.get("fileName")}}async function h(t,e=0){await E(1e3);const a=await q(t);if(a.status==="elementHidden"){if(e++,e<3)return console.log("Element hidden, retrying..."),await h(t,e+1);console.log("Element hidden, giving up...")}return a}async function C(t){const e=await h(t);if(console.log("findElementResults",e),e.status==="success"){const a=e.element;a.style.boxShadow="0px 0px 0px 3px #E8D8FF"}}async function y(t,e){p(void 0);const a=u.current?.contentWindow?.document;p(a);const c={doc:a,hackCss:!0,cache:{stylesWithHoverClass:new Map},mirror:new Y};K(t,c),await E(1500),e&&await C({targetDetails:Q(e),document:u.current?.contentWindow?.document})}function S(t){t.preventDefault();const e=t.currentTarget.id,a=e==="create-button"?g:f;e==="create-button"&&a&&(m(r.CREATE),y(a,l)),e==="display-button"&&a&&(m(r.DISPLAY),y(a,l))}return b?I?n.jsxs(n.Fragment,{children:[n.jsx(M,{iframeRef:u,iframeDocument:R,snapshotType:null}),n.jsxs(H,{justifyContent:"center",gap:2,css:{backgroundColor:W.colors.gray100,padding:"16px 24px"},children:[n.jsx(x,{id:"create-button",disabled:!g||i===r.CREATE,variant:"primary",onClick:t=>S(t),children:"Rebuild Create Snapshot"}),n.jsx(x,{id:"display-button",disabled:!f||i===r.DISPLAY,variant:"primary",onClick:t=>S(t),children:"Rebuild Display Snapshot"})]})]}):n.jsx(L,{snapshotType:i}):n.jsx(G,{})}const z=N(document.getElementById("tango-sidekick"));A().then(()=>{z.render(n.jsx(v,{children:n.jsx(P,{children:n.jsx(U,{children:n.jsx(_,{})})})}))});
//# sourceMappingURL=ClL9hjUw.js.map
