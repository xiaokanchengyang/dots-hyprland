import{O as h}from"./SHnOzo4l.js";import{l as g}from"./BjgJiouD.js";import{B as s}from"./CfHFiLj0.js";const l="tango-capture-box";class u{popperElement=null;highlightColor=null;blurMode=!1;init=async t=>{const r=await g();if(this.blurMode=t?.blurMode||!1,document){const o=document.getElementById(l);o?this.popperElement=o:(this.popperElement=document.createElement("div"),this.popperElement.setAttribute("id",l),document.body?.appendChild(this.popperElement)),t?.blurMode?(this.highlightColor="#c7cbe3",this.popperElement.style.setProperty("--tango-capture-box-background-color","rgba(199, 203, 227, 0.2)")):(this.highlightColor=r[h.HighlighterColor],this.popperElement.style.setProperty("--tango-capture-box-background-color","transparent")),this.popperElement.style.setProperty("--tango-capture-box-color",this.highlightColor)}window.addEventListener("scroll",this.scroll,!0)};updateHighlight(t){if(this.show(),!this.popperElement)return;const r=t.getBoundingClientRect(),o=e=>{const i=Math.max(e.top,7),p=Math.max(e.left,7),n=Math.min(e.width,window.innerWidth-p-7),a=Math.min(e.height,window.innerHeight-i-7);Object.assign(this.popperElement?.style,{transform:`translate3d(${p}px, ${i}px, 0px)`,width:`${n}px`,height:`${a}px`})};if(o(r),this.blurMode){if(t.closest(`[${s}=true]`)){const e=t.closest(`[${s}=true]`)?.getBoundingClientRect();e&&o(e)}t.getAttribute(s)||t.closest(`[${s}=true]`)?(this.popperElement.style.setProperty("--tango-capture-box-color","#e20000"),this.popperElement.style.setProperty("--tango-capture-box-background-color","rgb(226, 0, 0, 0.2)")):(this.popperElement.style.setProperty("--tango-capture-box-color",this.highlightColor),this.popperElement.style.setProperty("--tango-capture-box-background-color","rgba(199, 203, 227, 0.2)"))}}lastPageYOffset=0;lastPageXOffset=0;scroll=t=>{(this.lastPageYOffset!==window.pageYOffset||this.lastPageXOffset!==window.pageXOffset)&&this.hide(),t.target instanceof Element?(this.lastPageYOffset=t.target?.scrollLeft,this.lastPageXOffset=t.target?.scrollTop):(this.lastPageYOffset=window.pageYOffset,this.lastPageXOffset=window.pageXOffset)};cleanup=()=>{this.popperElement&&this.popperElement.remove(),window.removeEventListener("scroll",this.scroll,!0)};show(){this.popperElement?.style.setProperty("display","block")}hide(){this.popperElement?.style.setProperty("display","none","important")}makeInactive(){this.popperElement?.style.setProperty("opacity","0")}makeActive(){this.popperElement?.style.setProperty("opacity","1")}}export{u as C,l as t};
//# sourceMappingURL=XaMN_HiL.js.map
