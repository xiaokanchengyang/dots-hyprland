import{j as e}from"./CMhnKYCA.js";import{C as F,v as g,K as M,u as L,a as P,D as $}from"./DyC068QH.js";import{f as r,b as N}from"./DlLMD6w7.js";import{m as v,s as d,a as R,h as _,b as z}from"./DieEiE9e.js";import{d as O,n as D,C as E,ac as K,S as U}from"./Cm1H3WaY.js";import{l as W}from"./BAD7DE-7.js";import{n as V}from"./wJ2w6DWc.js";import{_ as q,s as B,c as Z,a as f,v as k}from"./CpygsGpn.js";import{r as A}from"./bVFUYZgl.js";import{A as T}from"./ChlyaM6j.js";import{F as G,b as J,s as b,a as Q,M as X,R as Y}from"./SHnOzo4l.js";import{b as ee,a as se}from"./Dph_3Rnf.js";import{i as re}from"./BTyHENqi.js";import{u as te}from"./CgWlxSK2.js";import"./Cpj98o6Y.js";import"./BIl7BGEd.js";import"./QipNwzXz.js";import"./BjgJiouD.js";import"./yXRVlCQS.js";import"./D8aEg3BZ.js";import"./DgxwHEyS.js";import"./uDekdLYy.js";import"./BsnvV3p5.js";import"./XaMN_HiL.js";import"./CfHFiLj0.js";import"./Cjbr4oTZ.js";import"./CqgvlWIA.js";import"./DvGmMwA7.js";import"./DnUAIzt-.js";/* empty css        */import"./CRTsvRaD.js";import"./DaneALmD.js";import"./EDDnOrpQ.js";import"./CqdNxNZF.js";import"./CTuBfHaM.js";const H=s=>v.jsx(W,{icon:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",fill:"none",viewBox:"0 0 40 40",children:v.jsx("path",{fill:"currentColor",d:"M30 21.667h-8.333V30c0 .917-.75 1.667-1.667 1.667s-1.667-.75-1.667-1.667v-8.333H10c-.917 0-1.667-.75-1.667-1.667s.75-1.667 1.667-1.667h8.333V10c0-.917.75-1.667 1.667-1.667s1.667.75 1.667 1.667v8.333H30c.917 0 1.667.75 1.667 1.667s-.75 1.667-1.667 1.667Z"})}),...s});H.displayName="IconAdd";const y=s=>{const{threads:t}=s,i=A.useMemo(()=>t.sort((n,a)=>{const c=n.updatedAt||n.createdAt,m=a.updatedAt||a.createdAt;return new Date(m).getTime()-new Date(c).getTime()}),[t]);return e.jsx(d,{direction:"column",css:{mt:"0px !important"},gap:"2",children:i.map(n=>e.jsx(q,{id:n.roomId,initialPresence:{},children:e.jsx(O,{css:{bg:r.colors.white,borderRadius:r.radii.md,border:`1px solid ${r.colors.gray200}`,overflow:"hidden","& p":{my:0}},children:e.jsx(F,{thread:n})})},n.id))})},C=s=>{const{emoji:t,text:i}=s;return e.jsx(d,{alignItems:"center",css:{height:132},justifyContent:"center",children:e.jsxs(O,{css:{textAlign:"center"},children:[e.jsx(R,{size:"4",children:t}),e.jsx(R,{as:"p",css:{m:0,color:r.colors.gray700},size:"3",children:i})]})})},oe=3,ie=()=>e.jsx(d,{direction:"column",gap:"2",children:[...Array(oe)].map((s,t)=>e.jsx(B,{css:{borderRadius:r.radii.md,overflow:"hidden",height:125}},t))});var o=(s=>(s.Active="Active",s.Resolved="Resolved",s.Hidden="Hidden",s))(o||{});const ne=s=>{const{tab:t,url:i}=s,{currentWorkspace:n}=se(),{hiddenThreads:a}=L(),c=l=>re(i.toString(),l.metadata.wildcard),m=l=>l.roomId.includes(n?.id??""),x=k({query:{metadata:{location:i.toString(),displayOption:void 0}}}),p=k({query:{metadata:{domain:i.hostname.toLowerCase(),displayOption:$.Wildcard}}}),j=[...x.threads,...p.threads.filter(c)].filter(m),{activeThreadsItems:u,hiddenThreadsItems:S,resolvedThreadsItems:I}=j.reduce((l,h)=>(h.metadata.resolved?l.resolvedThreadsItems.push(h):a.includes(h.id)?l.hiddenThreadsItems.push(h):l.activeThreadsItems.push(h),l),{activeThreadsItems:[],hiddenThreadsItems:[],resolvedThreadsItems:[]});return t===o.Active?e.jsx(e.Fragment,{children:u.length===0?e.jsx(C,{emoji:"ðŸ‘€",text:"No active threads on this page"}):e.jsx(y,{threads:u})}):t===o.Hidden?e.jsx(e.Fragment,{children:S.length===0?e.jsx(C,{emoji:"ðŸ™ˆ",text:"No hidden threads on this page"}):e.jsx(y,{threads:S})}):t===o.Resolved?e.jsx(e.Fragment,{children:I.length===0?e.jsx(C,{emoji:"ðŸ—ƒï¸",text:"No resolved threads on this page"}):e.jsx(y,{threads:I})}):null},ae=N(g.Trigger,{display:"flex",alignItems:"center",justifyContent:"space-between",color:r.colors.gray700,border:`1px solid ${r.colors.gray300}`,p:r.space[2],pl:r.space[4],borderRadius:r.radii.sm,width:"100%",height:36,transitionDuration:"0.2s",transitionProperty:"background, color, border, border-color, opacity",transitionTimingFunction:"ease-in-out","&:hover":{backgroundColor:r.colors.gray100,border:`1px solid ${r.colors.purple500}`,outline:`2px solid  ${r.colors.purple300}`},"&:focus-visible":{outline:`2px solid  ${r.colors.purple300}`,border:`1px solid ${r.colors.purple500}`},"&:disabled":{cursor:"not-allowed",opacity:.5}}),w=N(g.Item,{display:"flex",alignItems:"center",cursor:"pointer",justifyContent:"space-between",px:10}),le=s=>{const{url:t}=s,[i,n]=A.useState(o.Active),{isOn:a,toggleKL:c}=L(),m=ee(G.KL_PILOT),x=Z(J.Creator),p=u=>{switch(u){case o.Resolved:b(T.ViewListOfArchivedNuggets,{url:t.toString()});break;case o.Active:b(T.ViewListOfActiveNuggets,{url:t.toString()});break;case o.Hidden:b(T.ViewListOfHiddenNuggets,{url:t.toString()});break}n(u)},j=()=>{Q({name:X.NavigateTo,route:Y.NewPin})};return e.jsxs(d,{direction:"column",gap:"4",children:[e.jsxs(d,{css:{gap:12},direction:"column",children:[e.jsxs(d,{alignItems:"center",justifyContent:"between",children:[e.jsx(_,{children:"Nuggets"}),e.jsx(D,{side:"left",content:a?"Hide all nuggets":"Show all nuggets",children:e.jsx(E,{"aria-label":a?"Hide all nuggets":"Show all nuggets",onClick:c,children:a?e.jsx(P,{}):e.jsx(K,{})})})]}),a?null:e.jsx(U,{size:"xs",variant:"info",children:"All nuggets are currently hidden on screen"}),x?e.jsx(z,{StartIcon:e.jsx(H,{}),disabled:!a,onClick:j,variant:"primary",size:"md",children:"Pin Nugget"}):null,e.jsxs(g,{children:[e.jsxs(ae,{children:[i," ",e.jsx(V,{color:r.colors.gray600.value,size:20})]}),e.jsxs(g.Content,{children:[e.jsxs(w,{onClick:()=>p(o.Active),children:["Active"," ",i===o.Active?e.jsx(f,{color:r.colors.gray500.value,size:16}):null]}),e.jsxs(w,{onClick:()=>p(o.Hidden),children:["Hidden"," ",i===o.Hidden?e.jsx(f,{color:r.colors.gray500.value,size:16}):null]}),m?e.jsxs(w,{onClick:()=>p(o.Resolved),children:["Resolved"," ",i===o.Resolved?e.jsx(f,{color:r.colors.gray500.value,size:16}):null]}):null]})]})]}),e.jsx(A.Suspense,{fallback:e.jsx(ie,{}),children:e.jsx(ne,{tab:i,url:t})})]})},de=()=>{const s=te();return s?e.jsx(M,{url:s.toString(),children:e.jsx(le,{url:s})}):null},Ve=de;export{Ve as default};
//# sourceMappingURL=CiZukmI1.js.map
