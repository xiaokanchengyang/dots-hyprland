import Settings from"../options/settings.js";export default{inject:function(t,e,s){chrome.tabs.query({currentWindow:!0},a=>{a.some(a=>a.id===t&&(Settings.getOptions(a=>{e.hasOwnProperty("allFrames")||(e.allFrames="true"===String(a.CONTENT_SCRIPT_ALLOW_ALL_FRAMES)),e.js="try{"+e.js+";}catch(e){};",e.files&&e.files.length?e.files.join(",").indexOf(".css")>-1?chrome.scripting.insertCSS({target:{tabId:t,allFrames:e.allFrames},files:e.files},function(){s&&s.apply(this,arguments)}):chrome.scripting.executeScript({target:{tabId:t,allFrames:e.allFrames},files:e.files},function(){chrome.scripting.executeScript({target:{tabId:t,allFrames:e.allFrames},func:function(t){try{evalCore.getEvalInstance(window)(t)}catch(t){}},args:[e.js]},function(){s&&s.apply(this,arguments)})}):e.css?chrome.scripting.executeScript({target:{tabId:t,allFrames:e.allFrames},css:e.css},function(){s&&s.apply(this,arguments)}):chrome.scripting.executeScript({target:{tabId:t,allFrames:e.allFrames},func:function(t){try{evalCore.getEvalInstance(window)(t)}catch(t){}},args:[e.js]},function(){s&&s.apply(this,arguments)})}),!0))})}};