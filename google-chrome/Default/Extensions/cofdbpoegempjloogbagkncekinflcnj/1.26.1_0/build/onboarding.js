var settings=function(e){"use strict";function t(){}const n=e=>e;function r(e){return e()}function o(){return Object.create(null)}function s(e){e.forEach(r)}function i(e){return"function"==typeof e}function a(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function c(e,...n){if(null==e){for(const e of n)e(void 0);return t}const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function l(e,t,n){e.$$.on_destroy.push(c(t,n))}function u(e,t,n,r){return e[1]&&r?function(e,t){for(const n in t)e[n]=t[n];return e}(n.ctx.slice(),e[1](r(t))):n.ctx}function d(e,t,n){return e.set(n),t}function p(e){const t="string"==typeof e&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}const h="undefined"!=typeof window;let f=h?()=>window.performance.now():()=>Date.now(),m=h?e=>requestAnimationFrame(e):t;const g=new Set;function y(e){g.forEach((t=>{t.c(e)||(g.delete(t),t.f())})),0!==g.size&&m(y)}function _(e){let t;return 0===g.size&&m(y),{promise:new Promise((n=>{g.add(t={c:e,f:n})})),abort(){g.delete(t)}}}const v="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function b(e,t){e.appendChild(t)}function S(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function w(e){const t=x("style");return t.textContent="/* empty */",function(e,t){b(e.head||e,t),t.sheet}(S(e),t),t.sheet}function k(e,t,n){e.insertBefore(t,n||null)}function E(e){e.parentNode&&e.parentNode.removeChild(e)}function T(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function x(e){return document.createElement(e)}function I(e){return document.createTextNode(e)}function C(){return I(" ")}function R(){return I("")}function A(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function O(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function M(e,t){t=""+t,e.data!==t&&(e.data=t)}function N(e,t,n){e.classList.toggle(t,!!n)}function L(e,t){return new e(t)}const D=new Map;let $,P=0;function F(e,t,n,r,o,s,i,a=0){const c=16.666/r;let l="{\n";for(let e=0;e<=1;e+=c){const r=t+(n-t)*s(e);l+=100*e+`%{${i(r,1-r)}}\n`}const u=l+`100% {${i(n,1-n)}}\n}`,d=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(u)}_${a}`,p=S(e),{stylesheet:h,rules:f}=D.get(p)||function(e,t){const n={stylesheet:w(t),rules:{}};return D.set(e,n),n}(p,e);f[d]||(f[d]=!0,h.insertRule(`@keyframes ${d} ${u}`,h.cssRules.length));const m=e.style.animation||"";return e.style.animation=`${m?`${m}, `:""}${d} ${r}ms linear ${o}ms 1 both`,P+=1,d}function j(e,t){const n=(e.style.animation||"").split(", "),r=n.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),o=n.length-r.length;o&&(e.style.animation=r.join(", "),P-=o,P||m((()=>{P||(D.forEach((e=>{const{ownerNode:t}=e.stylesheet;t&&E(t)})),D.clear())})))}function U(e){$=e}function B(){if(!$)throw new Error("Function called outside component initialization");return $}function H(e){B().$$.on_mount.push(e)}function z(e,t){return B().$$.context.set(e,t),t}function q(e){return B().$$.context.get(e)}const W=[],G=[];let V=[];const Y=[],K=Promise.resolve();let X=!1;function J(e){V.push(e)}const Q=new Set;let Z,ee=0;function te(){if(0!==ee)return;const e=$;do{try{for(;ee<W.length;){const e=W[ee];ee++,U(e),ne(e.$$)}}catch(e){throw W.length=0,ee=0,e}for(U(null),W.length=0,ee=0;G.length;)G.pop()();for(let e=0;e<V.length;e+=1){const t=V[e];Q.has(t)||(Q.add(t),t())}V.length=0}while(W.length);for(;Y.length;)Y.pop()();X=!1,Q.clear(),U(e)}function ne(e){if(null!==e.fragment){e.update(),s(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(J)}}function re(){return Z||(Z=Promise.resolve(),Z.then((()=>{Z=null}))),Z}function oe(e,t,n){e.dispatchEvent(function(e,t,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:r})}(`${t?"intro":"outro"}${n}`))}const se=new Set;let ie;function ae(){ie={r:0,c:[],p:ie}}function ce(){ie.r||s(ie.c),ie=ie.p}function le(e,t){e&&e.i&&(se.delete(e),e.i(t))}function ue(e,t,n,r){if(e&&e.o){if(se.has(e))return;se.add(e),ie.c.push((()=>{se.delete(e),r&&(n&&e.d(1),r())})),e.o(t)}else r&&r()}const de={duration:0};function pe(e){return void 0!==e?.length?e:Array.from(e)}function he(e){e&&e.c()}function fe(e,t,n){const{fragment:o,after_update:a}=e.$$;o&&o.m(t,n),J((()=>{const t=e.$$.on_mount.map(r).filter(i);e.$$.on_destroy?e.$$.on_destroy.push(...t):s(t),e.$$.on_mount=[]})),a.forEach(J)}function me(e,t){const n=e.$$;null!==n.fragment&&(!function(e){const t=[],n=[];V.forEach((r=>-1===e.indexOf(r)?t.push(r):n.push(r))),n.forEach((e=>e())),V=t}(n.after_update),s(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function ge(e,t){-1===e.$$.dirty[0]&&(W.push(e),X||(X=!0,K.then(te)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ye(e,n,r,i,a,c,l=null,u=[-1]){const d=$;U(e);const p=e.$$={fragment:null,ctx:[],props:c,update:t,not_equal:a,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(d?d.$$.context:[])),callbacks:o(),dirty:u,skip_bound:!1,root:n.target||d.$$.root};l&&l(p.root);let h=!1;if(p.ctx=r?r(e,n.props||{},((t,n,...r)=>{const o=r.length?r[0]:n;return p.ctx&&a(p.ctx[t],p.ctx[t]=o)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](o),h&&ge(e,t)),n})):[],p.update(),h=!0,s(p.before_update),p.fragment=!!i&&i(p.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);p.fragment&&p.fragment.l(e),e.forEach(E)}else p.fragment&&p.fragment.c();n.intro&&le(e.$$.fragment),fe(e,n.target,n.anchor),te()}U(d)}class _e{$$=void 0;$$set=void 0;$destroy(){me(this,1),this.$destroy=t}$on(e,n){if(!i(n))return t;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const e=r.indexOf(n);-1!==e&&r.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const ve=[];function be(e,n=t){let r;const o=new Set;function s(t){if(a(e,t)&&(e=t,r)){const t=!ve.length;for(const t of o)t[1](),ve.push(t,e);if(t){for(let e=0;e<ve.length;e+=2)ve[e][0](ve[e+1]);ve.length=0}}}function i(t){s(t(e))}return{set:s,update:i,subscribe:function(a,c=t){const l=[a,c];return o.add(l),1===o.size&&(r=n(s,i)||t),a(e),()=>{o.delete(l),0===o.size&&r&&(r(),r=null)}}}}const Se={most_used_apps:"MOST_USED_APPS",deepl_pro:"DEEPL_PRO",create_account:"CREATE_ACCOUNT"},we=be(1),ke={"#step-1":1,"#step-2":2,"#step-3":3,"#step-4":4,"#step-5":5};function Ee(){we.set(ke[location.hash]||1)}const Te=[{screen:Se.most_used_apps},{title:"onboarding_write_title",badge:"onboarding_title_free",description:"onboarding_write_description",description2:"onboarding_write_description_2"},{title:"onboarding_translate_title",badge:"onboarding_title_free",description:"onboarding_translate_description"},{title:"onboarding_full_page_translation_title",badge:"onboarding_title_pro",description:"onboarding_full_page_translation_description",screen:Se.deepl_pro},{title:"onboarding_disable_pages_title",description:"onboarding_disable_pages_description"}];"undefined"!=typeof window&&(window.__svelte||(window.__svelte={v:new Set})).v.add("4");const xe={hintKeyboardShortcut:"HINT_KEYBOARD_SHORTCUT",inputTranslation:"INPUT_TRANSLATION",inlineTranslation:"INLINE_TRANSLATION",fullPageTranslation:"FULL_PAGE_TRANSLATION",accountSuccessfullyCreated:"ACCOUNT_SUCCESSFULLY_CREATED",successfullyLoggedIn:"SUCCESSFULLY_LOGGED_IN",glidesPreventAssetLoss:"GSLIDES_WARNING_TO_AVOID_ASSET_LOSS",showAdsForMSAddins:"SHOW_ADS_FOR_MS_ADDINS"},Ie={green_theme:"green_theme",warning_theme:"warning_theme",ads_theme:"ads_theme"},Ce="ONBOARDING_SEE_ALL_INTEGRATIONS",Re="CLICK_ON_SHORTCUT_NOTIFICATION",Ae="DISABLE_PER_SITE",Oe="DISABLE_EVERYWHERE",Me="OPEN_PAGE",Ne="BACK_BUTTON",Le="NEXT_BUTTON",De="NAVIGATION",$e={TRANSLATOR:"TRANSLATOR",WRITE:"WRITE",API:"API",DOC_TRANSLATOR:"DOC_TRANSLATOR"},Pe="free",Fe="pro",je=e=>{const t=e||chrome.i18n.getUILanguage();return["ar","he","fa","ur"].includes(t.toLowerCase().substr(0,2))?"rtl":"ltr"},Ue={prod:"production",dev:"development",test:"testing"};function Be(){return Ue.prod}function He(){return Be()===Ue.prod}function ze(e){return new Promise(((t,n)=>{chrome.runtime.sendMessage(e,(function(e){e&&e.error&&n(e),t(e)}))}))}const qe=function(){const{subscribe:e,set:t,update:n}=be({});return chrome.storage.sync.get(null,(e=>{t(e),chrome.storage.local.get(["isLoggedIn","isProUser","translatorServiceType","writeServiceType","apiServiceType","docTranslatorServiceType","browserInstanceId","featureSet","hasTermbaseService"],(e=>{n((t=>({...t,...e})))}))})),chrome.storage.onChanged.addListener((e=>{const t=["a_t","r_t","i_t","accountId"];let r={};for(const[n,o]of Object.entries(e))!1===t.includes(n)&&(r[n]=o.newValue);if(Be()===Ue.dev){const e="background-color: #324054;padding: 3px; font-size:12px;color:#e1e8c3; font-weight:600";console.log(`%c${(new Date).toISOString()} UPDATE USER SETTINGS`,e,r)}n((e=>({...e,...r})))})),{subscribe:e,set:e=>chrome.storage.sync.set(e)}}(),We=function(){const{subscribe:e,update:t}=be({});return chrome.runtime.onMessage.addListener((function(e,n){switch(e.action){case"newWebsiteState":e.payload&&t((t=>({...t,[n.tab.id]:{...t[n.tab.id],...e.payload,error:e.payload.error?e.payload.error:void 0}})));break;case"resetWebsiteState":e.payload&&t((t=>({...t,[n.tab.id]:{...e.payload}})))}})),{subscribe:e,fetchCurrentWebsiteSettings:()=>{chrome.tabs&&chrome.tabs.query({active:!0,currentWindow:!0},(function(e){chrome.tabs.sendMessage(e[0].id,{action:"dlGetWebsiteData"},(function(n){t((t=>({...t,[e[0].id]:{...t[e[0].id],...n}})))}))}))}}}();!function(e,n,r){const o=!Array.isArray(e),a=o?[e]:e;if(!a.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const l=n.length<2;return u=(e,r)=>{let u=!1;const d=[];let p=0,h=t;const f=()=>{if(p)return;h();const s=n(o?d[0]:d,e,r);l?e(s):h=i(s)?s:t},m=a.map(((e,t)=>c(e,(e=>{d[t]=e,p&=~(1<<t),u&&f()}),(()=>{p|=1<<t}))));return u=!0,f(),function(){s(m),h(),u=!1}},{subscribe:be(r,u).subscribe};var u}(We,(async(e,t)=>{if(!chrome.tabs)return;t(e[(await chrome.tabs.query({active:!0,currentWindow:!0}))[0].id])})),function(){const{subscribe:e,set:t}=be([]);ze({action:"dlGetExperiments",payload:{forceFetch:!1}}).then((e=>t(e))),chrome.runtime.onMessage.addListener((function(e){if("dlExperimentsUpdated"===e.action)e.payload&&t(e.payload.experiments)}))}();const Ge={chrome:"Chrome",edge:"Edge",brave:"Brave",firefox:"Firefox",opera:"Opera",safari:"Safari"};function Ve(e,t){let n;try{switch(e){case Ge.chrome:case Ge.brave:n=t.split("Chrome/")[1].split(" ")[0];break;case Ge.edge:n=t.split("Edg/")[1].split(" ")[0];break;case Ge.firefox:n=t.split("Firefox/")[1].split(" ")[0];break;case Ge.opera:n=t.split("OPR/")[1].split(" ")[0];break;case Ge.safari:n=t.split("Version/")[1].split(" ")[0]}}catch(t){console.error(`Could not get the browsers (${e}) version from user agent`,t)}try{!n&&navigator?.userAgentData&&function(e){return e===Ge.chrome||e===Ge.edge||e===Ge.brave||e===Ge.opera}(e)&&(n=Ye(e).version)}catch(t){console.error(`Could not get the chromium browsers (${e}) version`,t)}return n&&"string"==typeof n?n:"unknown_browser_version"}function Ye(e){if(!navigator.userAgentData||!e)return;const t=new RegExp(`${e}`,"i");return navigator.userAgentData.brands.filter((e=>t.test(e.brand)))[0]}function Ke(){if({IS_PROD:!0,BASE_URLS:{dapApi:"https://s.deepl.com/chrome/statistics",toolingApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.26.1",toolingApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.26.1",toolingWriteApiPro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.26.1",toolingWriteApi:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.26.1",classicApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.26.1",classicApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.26.1",classicApiWrite:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.26.1",classicApiWritePro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.26.1",classicApiGlossary:"https://api.deepl.com/termbases/jsonrpc?client=chrome-extension,1.26.1",login:"https://www.deepl.com/auth/login",token:"https://w.deepl.com/oidc/token",logout:"https://www.deepl.com/auth/logout",feedbackSurvey:"https://deepl.typeform.com/to/MkMfP2Y6",newFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",firefoxFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eyfDZqQmXuNTFOK",uninstallSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU",gslidesFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_9XBLSAbDmLq5emO",deeplPro:"https://www.deepl.com/pro",deeplProWrite:"https://www.deepl.com/pro-write",deeplTranslator:"https://www.deepl.com/translator",deeplDoctrans:"https://www.deepl.com/translator/files",deeplTermsOfServiceFree:"https://www.deepl.com/en/pro-license?tab=free",deeplCreateAccount:"https://www.deepl.com/signup",extensionStorePage:"https://bit.ly/DeepL-Chrome",supportArticle:"https://support.deepl.com/hc/articles/4407580229522",deeplSupport:"https://support.deepl.com/hc",chromeWebstore:"https://chrome.google.com/webstore/detail/deepl-translate-reading-w/cofdbpoegempjloogbagkncekinflcnj",edgeWebstore:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-reading-/fancfknaplihpclbhbpclnmmjcjanbaf",firefoxWebstore:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate",firefoxShortcutDocs:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",firefoxPrivacyPolicy:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate/privacy/",clientStateApi:"https://w.deepl.com/web",experimentsEndpoint:"https://s.deepl.com/chrome/experiments",gmailFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_db8ItFTmYBcZjYW",customerSegmentationSurveyFree:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2071",customerSegmentationSurveyPro:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2070",arabicSurvey:"https://deepl.qualtrics.com/jfe/form/SV_ekTrC2ePp0wn7xQ",msAddinsDeepLAds:"https://www.deepl.com/en/microsoft-365"},APP_VERSION:"1.26.1",FEATURE_FLAGS:{TRANSLATE_INPUT:!0,PAGE_TRANSLATION:!0,IMPROVE_WRITING:!0,DOCUMENT_TRANSLATION:!0,RECOMMEND_TO_A_FRIEND:!0,PRO_LOGIN:!0,WEBPAGE_CUSTOMIZER:!0,GDOCS_INTEGRATION:!0,ZENDESK_INTEGRATION:!0,GMAIL_INTEGRATION:!0,GSLIDES_INTEGRATION:!0,ON_INSTALL_ONBOARDING:!0,WHATSAPP_TRANSLATE_ALL_CHAT:!1,DEEPL_WRITE_GENERAL:!1,DEEPL_WRITE_GDOCS:!0,SHOW_CUSTOMER_SEGMENTATION_SURVEY:!1,ARABIC_SURVEY:!0,REVIEW_UI_WITH_ITA:!1}}.browserBuild)return{IS_PROD:!0,BASE_URLS:{dapApi:"https://s.deepl.com/chrome/statistics",toolingApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.26.1",toolingApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.26.1",toolingWriteApiPro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.26.1",toolingWriteApi:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.26.1",classicApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.26.1",classicApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.26.1",classicApiWrite:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.26.1",classicApiWritePro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.26.1",classicApiGlossary:"https://api.deepl.com/termbases/jsonrpc?client=chrome-extension,1.26.1",login:"https://www.deepl.com/auth/login",token:"https://w.deepl.com/oidc/token",logout:"https://www.deepl.com/auth/logout",feedbackSurvey:"https://deepl.typeform.com/to/MkMfP2Y6",newFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",firefoxFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eyfDZqQmXuNTFOK",uninstallSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU",gslidesFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_9XBLSAbDmLq5emO",deeplPro:"https://www.deepl.com/pro",deeplProWrite:"https://www.deepl.com/pro-write",deeplTranslator:"https://www.deepl.com/translator",deeplDoctrans:"https://www.deepl.com/translator/files",deeplTermsOfServiceFree:"https://www.deepl.com/en/pro-license?tab=free",deeplCreateAccount:"https://www.deepl.com/signup",extensionStorePage:"https://bit.ly/DeepL-Chrome",supportArticle:"https://support.deepl.com/hc/articles/4407580229522",deeplSupport:"https://support.deepl.com/hc",chromeWebstore:"https://chrome.google.com/webstore/detail/deepl-translate-reading-w/cofdbpoegempjloogbagkncekinflcnj",edgeWebstore:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-reading-/fancfknaplihpclbhbpclnmmjcjanbaf",firefoxWebstore:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate",firefoxShortcutDocs:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",firefoxPrivacyPolicy:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate/privacy/",clientStateApi:"https://w.deepl.com/web",experimentsEndpoint:"https://s.deepl.com/chrome/experiments",gmailFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_db8ItFTmYBcZjYW",customerSegmentationSurveyFree:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2071",customerSegmentationSurveyPro:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2070",arabicSurvey:"https://deepl.qualtrics.com/jfe/form/SV_ekTrC2ePp0wn7xQ",msAddinsDeepLAds:"https://www.deepl.com/en/microsoft-365"},APP_VERSION:"1.26.1",FEATURE_FLAGS:{TRANSLATE_INPUT:!0,PAGE_TRANSLATION:!0,IMPROVE_WRITING:!0,DOCUMENT_TRANSLATION:!0,RECOMMEND_TO_A_FRIEND:!0,PRO_LOGIN:!0,WEBPAGE_CUSTOMIZER:!0,GDOCS_INTEGRATION:!0,ZENDESK_INTEGRATION:!0,GMAIL_INTEGRATION:!0,GSLIDES_INTEGRATION:!0,ON_INSTALL_ONBOARDING:!0,WHATSAPP_TRANSLATE_ALL_CHAT:!1,DEEPL_WRITE_GENERAL:!1,DEEPL_WRITE_GDOCS:!0,SHOW_CUSTOMER_SEGMENTATION_SURVEY:!1,ARABIC_SURVEY:!0,REVIEW_UI_WITH_ITA:!1}}.browserBuild.toLowerCase()===Ge.firefox.toLowerCase();const e=chrome.runtime.getURL("");return function(){const e=navigator?.userAgent||"unknown_user_agent",t=navigator?.userAgentData?.platform||navigator?.platform||"unknown_platform";let n="unknown_browser",r="unknown_browser_version";const o=navigator?.language||"unknown_browser_language";try{const t=e.match(/chrome|chromium|crios/i),o=e.match(/edg/i)||Ye(Ge.edge),s=e.match(/firefox|fxios/i),i=e.match(/opr\//i)||Ye(Ge.opera),a=e.match(/safari/i),c=Ye(Ge.brave);t?(n=Ge.chrome,o&&(n=Ge.edge),i&&(n=Ge.opera),c&&(n=Ge.brave)):o?n=Ge.edge:s?n=Ge.firefox:i?n=Ge.opera:a&&(n=Ge.safari),r=Ve(n,e)}catch(e){console.error("Could not get the name of the brower",e)}return{userAgent:e,platform:t,browser:n,browserVersion:r,browserLang:o}}().browser===Ge.firefox||/moz-extension:\/\//gm.test(e)}function Xe(e,t,n){const r=e.slice();return r[8]=t[n],r[10]=n,r}function Je(e){let t,n,r,o,s,i=chrome.i18n.getMessage("onboarding_back_button")+"";return{c(){t=x("a"),n=I(i),O(t,"class","dl-btn dl-btn-ghost svelte-zulkya"),O(t,"href",r="#step-"+(e[1]-1)),O(t,"data-qa","dl-onboarding-navigation-back-button")},m(r,i){k(r,t,i),b(t,n),o||(s=A(t,"click",e[4]),o=!0)},p(e,n){2&n&&r!==(r="#step-"+(e[1]-1))&&O(t,"href",r)},d(e){e&&E(t),o=!1,s()}}}function Qe(e){let t,n,r,o,s;function i(){return e[5](e[10])}return{c(){t=x("li"),n=x("a"),n.innerHTML='<span class="svelte-zulkya"></span>',r=C(),O(n,"href","#step-"+(e[10]+1)),O(n,"data-qa","dl-onboarding-navigation-step-"+(e[10]+1)),O(n,"aria-label",`Step ${e[10]+1}`),O(n,"class","svelte-zulkya"),O(t,"class","svelte-zulkya"),N(t,"active",e[1]===e[10]+1)},m(e,a){k(e,t,a),b(t,n),b(t,r),o||(s=A(n,"click",i),o=!0)},p(n,r){e=n,2&r&&N(t,"active",e[1]===e[10]+1)},d(e){e&&E(t),o=!1,s()}}}function Ze(e){let t,n,r,o,s,i=chrome.i18n.getMessage("onboarding_next_button")+"";return{c(){t=x("a"),n=I(i),O(t,"class","dl-btn dl-btn-primary svelte-zulkya"),O(t,"href",r="#step-"+(e[1]+1)),O(t,"data-qa","dl-onboarding-navigation-next-button")},m(r,i){k(r,t,i),b(t,n),o||(s=A(t,"click",e[6]),o=!0)},p(e,n){2&n&&r!==(r="#step-"+(e[1]+1))&&O(t,"href",r)},d(e){e&&E(t),o=!1,s()}}}function et(e){let n,r,o,s,i,a,c,l,u=e[1]>1&&Je(e),d=pe(Te),p=[];for(let t=0;t<d.length;t+=1)p[t]=Qe(Xe(e,d,t));let h=e[1]<Te.length&&Ze(e);return{c(){n=x("div"),r=x("div"),o=x("div"),u&&u.c(),s=C(),i=x("ul");for(let e=0;e<p.length;e+=1)p[e].c();a=C(),c=x("div"),h&&h.c(),O(o,"class","back-button svelte-zulkya"),O(i,"class","dl-navigation svelte-zulkya"),O(c,"class","next-button svelte-zulkya"),O(r,"class","dl-steps-navigation svelte-zulkya"),O(r,"style",`height: ${tt}px`),O(n,"class","dl-steps-navigation-wrapper svelte-zulkya"),O(n,"style",l=`top: ${e[0]}px`)},m(e,t){k(e,n,t),b(n,r),b(r,o),u&&u.m(o,null),b(r,s),b(r,i);for(let e=0;e<p.length;e+=1)p[e]&&p[e].m(i,null);b(r,a),b(r,c),h&&h.m(c,null)},p(e,[t]){if(e[1]>1?u?u.p(e,t):(u=Je(e),u.c(),u.m(o,null)):u&&(u.d(1),u=null),10&t){let n;for(d=pe(Te),n=0;n<d.length;n+=1){const r=Xe(e,d,n);p[n]?p[n].p(r,t):(p[n]=Qe(r),p[n].c(),p[n].m(i,null))}for(;n<p.length;n+=1)p[n].d(1);p.length=d.length}e[1]<Te.length?h?h.p(e,t):(h=Ze(e),h.c(),h.m(c,null)):h&&(h.d(1),h=null),1&t&&l!==(l=`top: ${e[0]}px`)&&O(n,"style",l)},i:t,o:t,d(e){e&&E(n),u&&u.d(),T(p,e),h&&h.d()}}}let tt=41;function nt(e,t,n){let r;const{currentStep:o,trackStepChange:s}=q("deepl_onboarding_navigation");l(e,o,(e=>n(1,r=e)));let i=616;function a(){document.body.offsetHeight>window.innerHeight?n(0,i=window.innerHeight-tt):n(0,i=document.body.offsetHeight)}var c;H((()=>{a(),window.addEventListener("resize",a)})),c=()=>{window.removeEventListener("resize",a)},B().$$.on_destroy.push(c);return[i,r,o,s,()=>s(r,r-1,Ne),e=>s(r,e+1,De),()=>s(r,r+1,Le)]}class rt extends _e{constructor(e){super(),ye(this,e,nt,et,a,{})}}function ot(e){let n,r,o=chrome.i18n.getMessage("onboarding_pin_extension")+"";return{c(){n=x("div"),r=I(o),O(n,"class","dl-pin svelte-1s3gyid"),O(n,"dir",e[3])},m(e,t){k(e,n,t),b(n,r)},p:t,d(e){e&&E(n)}}}function st(e){let t,n;return t=new rt({}),{c(){he(t.$$.fragment)},m(e,r){fe(t,e,r),n=!0},i(e){n||(le(t.$$.fragment,e),n=!0)},o(e){ue(t.$$.fragment,e),n=!1},d(e){me(t,e)}}}function it(e){let t,n,r,o,s,i,a,c,l,d=e[2]&&ot(e);const p=e[6].default,h=function(e,t,n,r){if(e){const o=u(e,t,n,r);return e[0](o)}}(p,e,e[5],null);let f=e[0]&&st();return{c(){d&&d.c(),t=C(),n=x("div"),r=x("div"),o=C(),s=x("div"),i=x("div"),a=x("div"),h&&h.c(),c=C(),f&&f.c(),O(r,"class","dl-logo svelte-1s3gyid"),O(n,"class","dl-logo-container svelte-1s3gyid"),O(n,"dir",e[3]),N(n,"isFirefox",e[4]),O(a,"class","dl-content svelte-1s3gyid"),O(i,"class","dl-body"),O(s,"class","dl-container svelte-1s3gyid"),O(s,"data-qa","dl-onboarding-page"),O(s,"dir",e[3]),N(s,"wideMode",e[1])},m(e,u){d&&d.m(e,u),k(e,t,u),k(e,n,u),b(n,r),k(e,o,u),k(e,s,u),b(s,i),b(i,a),h&&h.m(a,null),b(s,c),f&&f.m(s,null),l=!0},p(e,[n]){e[2]?d?d.p(e,n):(d=ot(e),d.c(),d.m(t.parentNode,t)):d&&(d.d(1),d=null),h&&h.p&&(!l||32&n)&&function(e,t,n,r,o,s){if(o){const i=u(t,n,r,s);e.p(i,o)}}(h,p,e,e[5],l?function(e,t,n,r){if(e[2]&&r){const o=e[2](r(n));if(void 0===t.dirty)return o;if("object"==typeof o){const e=[],n=Math.max(t.dirty.length,o.length);for(let r=0;r<n;r+=1)e[r]=t.dirty[r]|o[r];return e}return t.dirty|o}return t.dirty}(p,e[5],n,null):function(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let e=0;e<n;e++)t[e]=-1;return t}return-1}(e[5]),null),e[0]?f?1&n&&le(f,1):(f=st(),f.c(),le(f,1),f.m(s,null)):f&&(ae(),ue(f,1,1,(()=>{f=null})),ce()),(!l||2&n)&&N(s,"wideMode",e[1])},i(e){l||(le(h,e),le(f),l=!0)},o(e){ue(h,e),ue(f),l=!1},d(e){e&&(E(t),E(n),E(o),E(s)),d&&d.d(e),h&&h.d(e),f&&f.d()}}}function at(e,t,n){let{$$slots:r={},$$scope:o}=t;const s=q("text_direction"),i=Ke();let{showNavigation:a=!0}=t,{wideMode:c=!1}=t,{showPinMessage:l=!0}=t;return e.$$set=e=>{"showNavigation"in e&&n(0,a=e.showNavigation),"wideMode"in e&&n(1,c=e.wideMode),"showPinMessage"in e&&n(2,l=e.showPinMessage),"$$scope"in e&&n(5,o=e.$$scope)},[a,c,l,s,i,o,r]}class ct extends _e{constructor(e){super(),ye(this,e,at,it,a,{showNavigation:0,wideMode:1,showPinMessage:2})}}const lt="DEEPL_COM_PRO",ut="SHORTCUT_SETTINGS",dt={whatsapp:"EXTERNAL_WHATSAPP",twitter:"EXTERNAL_TWITTER",youtube:"EXTERNAL_YOUTUBE",facebook:"EXTERNAL_FACEBOOK",github:"EXTERNAL_GITHUB",discord:"EXTERNAL_DISCORD",telegram:"EXTERNAL_TELEGRAM",reddit:"EXTERNAL_REDDIT",gmail:"EXTERNAL_GMAIL",gdocs:"EXTERNAL_GDOCS",gslides:"EXTERNAL_GSLIDES",linkedIn:"EXTERNAL_LINKEDIN",msOffice:"EXTERNAL_MS_OFFICE"},pt="ADDINS_ADS",ht="SETTINGS_PAGE",ft="SETTINGS_CUSTOMIZATIONS";function mt(e){let n,r,o,i,a,c,l,u,d,p,h,f,m,g,y,_,v,S,w,T,I,R,M,N,L,D,$,P,F,j,U,B,H,z,q,W,G,V,Y=chrome.i18n.getMessage("onboarding_promotion_body_2")+"";return{c(){n=x("div"),r=x("div"),o=x("div"),o.textContent=`${chrome.i18n.getMessage("onboarding_promotion_header")}`,i=C(),a=x("p"),a.textContent=`${chrome.i18n.getMessage("onboarding_promotion_body")}`,c=C(),l=x("p"),u=C(),d=x("div"),p=x("div"),h=x("div"),f=x("div"),f.innerHTML='<img src="../images/graphics/onboarding/most-used-apps/gmail.png" alt="Gmail logo" class="svelte-4mkkcy"/>',m=C(),g=x("div"),g.textContent=`${chrome.i18n.getMessage("onboarding_promotion_link_gmail")}`,y=C(),_=x("div"),v=x("div"),v.innerHTML='<img src="../images/graphics/onboarding/most-used-apps/gdocs.png" alt="Google Docs Logo" class="svelte-4mkkcy"/>',S=C(),w=x("div"),w.textContent=`${chrome.i18n.getMessage("onboarding_promotion_link_google_docs")}`,T=C(),I=x("div"),R=x("div"),R.innerHTML='<img src="../images/graphics/onboarding/most-used-apps/gslides.png" alt="Google Slides logo" class="svelte-4mkkcy"/>',M=C(),N=x("div"),N.textContent=`${chrome.i18n.getMessage("onboarding_promotion_link_google_slides")}`,L=C(),D=x("div"),$=x("div"),$.innerHTML='<img src="../images/graphics/onboarding/most-used-apps/word-add-in.png" alt="Microsoft Word logo" class="svelte-4mkkcy"/>',P=C(),F=x("div"),j=x("div"),j.textContent=`${chrome.i18n.getMessage("onboarding_promotion_ms_word_header")}`,U=C(),B=x("p"),B.textContent=`${chrome.i18n.getMessage("onboarding_promotion_ms_word_body")}`,H=C(),z=x("div"),z.textContent=`${chrome.i18n.getMessage("onboarding_promotion_ms_word_link")}`,q=C(),W=x("div"),W.textContent=`${chrome.i18n.getMessage("onboarding_promotion_link_integrations")}`,O(o,"class","title svelte-4mkkcy"),O(a,"class","first svelte-4mkkcy"),O(l,"class","svelte-4mkkcy"),O(r,"class","dl-apps-description svelte-4mkkcy"),O(f,"class","dl-app-image svelte-4mkkcy"),O(g,"class","dl-app-cta svelte-4mkkcy"),O(h,"class","dl-app svelte-4mkkcy"),O(v,"class","dl-app-image svelte-4mkkcy"),O(w,"class","dl-app-cta svelte-4mkkcy"),O(_,"class","dl-app svelte-4mkkcy"),O(R,"class","dl-app-image svelte-4mkkcy"),O(N,"class","dl-app-cta svelte-4mkkcy"),O(I,"class","dl-app svelte-4mkkcy"),O(p,"class","dl-apps-top-row svelte-4mkkcy"),O($,"class","img-container svelte-4mkkcy"),O(j,"class","content-title svelte-4mkkcy"),O(B,"class","svelte-4mkkcy"),O(z,"class","cta svelte-4mkkcy"),O(F,"class","content svelte-4mkkcy"),O(D,"class","dl-apps-bottom-row svelte-4mkkcy"),O(W,"class","all-integrations svelte-4mkkcy"),O(d,"class","dl-apps-tiles svelte-4mkkcy"),O(n,"class","dl-apps-container svelte-4mkkcy")},m(t,s){k(t,n,s),b(n,r),b(r,o),b(r,i),b(r,a),b(r,c),b(r,l),l.innerHTML=Y,b(n,u),b(n,d),b(d,p),b(p,h),b(h,f),b(h,m),b(h,g),b(p,y),b(p,_),b(_,v),b(_,S),b(_,w),b(p,T),b(p,I),b(I,R),b(I,M),b(I,N),b(d,L),b(d,D),b(D,$),b(D,P),b(D,F),b(F,j),b(F,U),b(F,B),b(F,H),b(F,z),b(d,q),b(d,W),G||(V=[A(h,"click",e[2]),A(_,"click",e[3]),A(I,"click",e[4]),A(z,"click",e[5]),A(W,"click",e[1])],G=!0)},p:t,i:t,o:t,d(e){e&&E(n),G=!1,s(V)}}}function gt(e){function t(e){ze({action:"dlExternalURLRedirect",payload:{destination:e}});try{ze({action:"dlTrackOnboardingOpenExternalLink",payload:{url:e}})}catch(e){console.error("There was a problem tracking the following event: 'dlTrackOnboardingOpenExternalLink'. ",{error:e})}}return[t,function(){ze({action:"dlOpenInternalPage",payload:{destination:ft}}),ze({action:"dlTrackUILocationClicked",payload:Ce})},()=>t(dt.gmail),()=>t(dt.gdocs),()=>t(dt.gslides),()=>t(dt.msOffice)]}class yt extends _e{constructor(e){super(),ye(this,e,gt,mt,a,{})}}function _t(e){let n,r,o,i,a,c,l,u,d,p,h,f,m,g,y,_,v,S,w,T,I,R,M,N,L,D,$;return{c(){n=x("div"),r=x("button"),r.textContent=`${chrome.i18n.getMessage("onboarding_full_page_translation_table_cta")}`,o=C(),i=x("p"),i.textContent=`${chrome.i18n.getMessage("onboarding_full_page_translation_table_legend")}`,a=C(),c=x("div"),l=x("p"),l.textContent=`${chrome.i18n.getMessage("onboarding_full_page_translation_table_intro")}`,u=C(),d=x("ul"),p=x("li"),h=x("span"),f=C(),m=x("span"),m.textContent=`${chrome.i18n.getMessage("onboarding_full_page_translation_table_item_1")}`,g=C(),y=x("li"),_=x("span"),v=C(),S=x("span"),S.textContent=`${chrome.i18n.getMessage("onboarding_full_page_translation_table_item_2")}`,w=C(),T=x("li"),I=x("span"),R=C(),M=x("span"),M.textContent=`${chrome.i18n.getMessage("onboarding_full_page_translation_table_item_3")}`,N=C(),L=x("button"),L.textContent=`${chrome.i18n.getMessage("onboarding_full_page_translation_table_read_more")}`,O(r,"class","btn-deepl-pro svelte-lgp0fx"),O(r,"data-qa","dl-onboarding-deepl-pro-try-for-free"),O(i,"class","cta-legend svelte-lgp0fx"),O(l,"class","svelte-lgp0fx"),O(h,"class","check-icon svelte-lgp0fx"),O(p,"class","svelte-lgp0fx"),O(_,"class","check-icon svelte-lgp0fx"),O(y,"class","svelte-lgp0fx"),O(I,"class","check-icon svelte-lgp0fx"),O(T,"class","svelte-lgp0fx"),O(L,"class","read-more svelte-lgp0fx"),O(L,"data-qa","dl-onboarding-deepl-pro-read-more"),O(c,"class","deepl-pro-benefits svelte-lgp0fx"),O(n,"class","dl-deepl-pro svelte-lgp0fx")},m(t,s){k(t,n,s),b(n,r),b(n,o),b(n,i),b(n,a),b(n,c),b(c,l),b(c,u),b(c,d),b(d,p),b(p,h),b(p,f),b(p,m),b(d,g),b(d,y),b(y,_),b(y,v),b(y,S),b(d,w),b(d,T),b(T,I),b(T,R),b(T,M),b(c,N),b(c,L),D||($=[A(r,"click",e[0]),A(L,"click",e[1])],D=!0)},p:t,i:t,o:t,d(e){e&&E(n),D=!1,s($)}}}function vt(e){function t(e){ze({action:"dlExternalURLRedirect",payload:{destination:lt,additionalData:{utmContent:e}}});try{ze({action:"dlTrackOnboardingOpenExternalLink",payload:{url:lt}})}catch(e){console.error("There was a problem tracking the following event: 'dlTrackOnboardingOpenExternalLink'. ",{error:e})}}return[function(){return t("cta")},function(){return t("read-more")}]}class bt extends _e{constructor(e){super(),ye(this,e,vt,_t,a,{})}}function St(e){let t,n,r,o,s=chrome.i18n.getMessage(e[1].title)+"",i=e[1].badge&&wt(e);return{c(){t=x("h1"),n=x("span"),r=I(s),o=C(),i&&i.c(),O(t,"class","dl-step-title svelte-komuik")},m(e,s){k(e,t,s),b(t,n),b(n,r),b(t,o),i&&i.m(t,null)},p(e,n){2&n&&s!==(s=chrome.i18n.getMessage(e[1].title)+"")&&M(r,s),e[1].badge?i?i.p(e,n):(i=wt(e),i.c(),i.m(t,null)):i&&(i.d(1),i=null)},d(e){e&&E(t),i&&i.d()}}}function wt(e){let t,n,r=chrome.i18n.getMessage(e[1].badge)+"";return{c(){t=x("span"),n=I(r),O(t,"class","badge svelte-komuik")},m(e,r){k(e,t,r),b(t,n)},p(e,t){2&t&&r!==(r=chrome.i18n.getMessage(e[1].badge)+"")&&M(n,r)},d(e){e&&E(t)}}}function kt(e){let t,n,r=chrome.i18n.getMessage(e[1].description)+"";return{c(){t=x("p"),n=I(r),O(t,"class","dl-step-description svelte-komuik")},m(e,r){k(e,t,r),b(t,n)},p(e,t){2&t&&r!==(r=chrome.i18n.getMessage(e[1].description)+"")&&M(n,r)},d(e){e&&E(t)}}}function Et(e){let t,n,r=chrome.i18n.getMessage(e[1].description2)+"";return{c(){t=x("p"),n=I(r),O(t,"class","dl-step-description svelte-komuik")},m(e,r){k(e,t,r),b(t,n)},p(e,t){2&t&&r!==(r=chrome.i18n.getMessage(e[1].description2)+"")&&M(n,r)},d(e){e&&E(t)}}}function Tt(e){let n,r;return{c(){n=x("div"),O(n,"class",r="dl-step-illustration dl-step-illustration-"+e[0]+" svelte-komuik")},m(e,t){k(e,n,t)},p(e,t){1&t&&r!==(r="dl-step-illustration dl-step-illustration-"+e[0]+" svelte-komuik")&&O(n,"class",r)},i:t,o:t,d(e){e&&E(n)}}}function xt(e){let n,r;return n=new bt({}),{c(){he(n.$$.fragment)},m(e,t){fe(n,e,t),r=!0},p:t,i(e){r||(le(n.$$.fragment,e),r=!0)},o(e){ue(n.$$.fragment,e),r=!1},d(e){me(n,e)}}}function It(e){let n,r;return n=new yt({}),{c(){he(n.$$.fragment)},m(e,t){fe(n,e,t),r=!0},p:t,i(e){r||(le(n.$$.fragment,e),r=!0)},o(e){ue(n.$$.fragment,e),r=!1},d(e){me(n,e)}}}function Ct(e){let t,n,r,o,s,i,a,c,l,u=e[1].title&&St(e),d=e[1].description&&kt(e),p=e[1].description2&&Et(e);const h=[It,xt,Tt],f=[];function m(e,t){return e[1].screen===Se.most_used_apps?0:e[1].screen===Se.deepl_pro?1:2}return i=m(e),a=f[i]=h[i](e),{c(){t=x("div"),u&&u.c(),n=C(),r=x("div"),d&&d.c(),o=C(),p&&p.c(),s=C(),a.c(),O(r,"class","dl-step-description-wrapper svelte-komuik"),O(t,"class","dl-step svelte-komuik"),O(t,"data-qa",c="dl-onboarding-step-"+e[0])},m(e,a){k(e,t,a),u&&u.m(t,null),b(t,n),b(t,r),d&&d.m(r,null),b(r,o),p&&p.m(r,null),b(t,s),f[i].m(t,null),l=!0},p(e,[s]){e[1].title?u?u.p(e,s):(u=St(e),u.c(),u.m(t,n)):u&&(u.d(1),u=null),e[1].description?d?d.p(e,s):(d=kt(e),d.c(),d.m(r,o)):d&&(d.d(1),d=null),e[1].description2?p?p.p(e,s):(p=Et(e),p.c(),p.m(r,null)):p&&(p.d(1),p=null);let g=i;i=m(e),i===g?f[i].p(e,s):(ae(),ue(f[g],1,1,(()=>{f[g]=null})),ce(),a=f[i],a?a.p(e,s):(a=f[i]=h[i](e),a.c()),le(a,1),a.m(t,null)),(!l||1&s&&c!==(c="dl-onboarding-step-"+e[0]))&&O(t,"data-qa",c)},i(e){l||(le(a),l=!0)},o(e){ue(a),l=!1},d(e){e&&E(t),u&&u.d(),d&&d.d(),p&&p.d(),f[i].d()}}}function Rt(e,t,n){let{step:r=1}=t,{onboardingStep:o}=t;return e.$$set=e=>{"step"in e&&n(0,r=e.step),"onboardingStep"in e&&n(1,o=e.onboardingStep)},[r,o]}class At extends _e{constructor(e){super(),ye(this,e,Rt,Ct,a,{step:0,onboardingStep:1})}}function Ot(e){const t=e-1;return t*t*t+1}function Mt(e,{delay:t=0,duration:n=400,easing:r=Ot,x:o=0,y:s=0,opacity:i=0}={}){const a=getComputedStyle(e),c=+a.opacity,l="none"===a.transform?"":a.transform,u=c*(1-i),[d,h]=p(o),[f,m]=p(s);return{delay:t,duration:n,easing:r,css:(e,t)=>`\n\t\t\ttransform: ${l} translate(${(1-e)*d}${h}, ${(1-e)*f}${m});\n\t\t\topacity: ${c-u*t}`}}var Nt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Lt={exports:{}};
/*! @license DOMPurify 3.1.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.6/LICENSE */
!function(e,t){e.exports=function(){const{entries:e,setPrototypeOf:t,isFrozen:n,getPrototypeOf:r,getOwnPropertyDescriptor:o}=Object;let{freeze:s,seal:i,create:a}=Object,{apply:c,construct:l}="undefined"!=typeof Reflect&&Reflect;s||(s=function(e){return e}),i||(i=function(e){return e}),c||(c=function(e,t,n){return e.apply(t,n)}),l||(l=function(e,t){return new e(...t)});const u=w(Array.prototype.forEach),d=w(Array.prototype.pop),p=w(Array.prototype.push),h=w(String.prototype.toLowerCase),f=w(String.prototype.toString),m=w(String.prototype.match),g=w(String.prototype.replace),y=w(String.prototype.indexOf),_=w(String.prototype.trim),v=w(Object.prototype.hasOwnProperty),b=w(RegExp.prototype.test),S=k(TypeError);function w(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return c(e,t,r)}}function k(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return l(e,n)}}function E(e,r){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h;t&&t(e,null);let s=r.length;for(;s--;){let t=r[s];if("string"==typeof t){const e=o(t);e!==t&&(n(r)||(r[s]=e),t=e)}e[t]=!0}return e}function T(e){for(let t=0;t<e.length;t++)v(e,t)||(e[t]=null);return e}function x(t){const n=a(null);for(const[r,o]of e(t))v(t,r)&&(Array.isArray(o)?n[r]=T(o):o&&"object"==typeof o&&o.constructor===Object?n[r]=x(o):n[r]=o);return n}function I(e,t){for(;null!==e;){const n=o(e,t);if(n){if(n.get)return w(n.get);if("function"==typeof n.value)return w(n.value)}e=r(e)}function n(){return null}return n}const C=s(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),R=s(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),A=s(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),O=s(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),M=s(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),N=s(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),L=s(["#text"]),D=s(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),$=s(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),P=s(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),F=s(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),j=i(/\{\{[\w\W]*|[\w\W]*\}\}/gm),U=i(/<%[\w\W]*|[\w\W]*%>/gm),B=i(/\${[\w\W]*}/gm),H=i(/^data-[\-\w.\u00B7-\uFFFF]/),z=i(/^aria-[\-\w]+$/),q=i(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),W=i(/^(?:\w+script|data):/i),G=i(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),V=i(/^html$/i),Y=i(/^[a-z][.\w]*(-[.\w]+)+$/i);var K=Object.freeze({__proto__:null,MUSTACHE_EXPR:j,ERB_EXPR:U,TMPLIT_EXPR:B,DATA_ATTR:H,ARIA_ATTR:z,IS_ALLOWED_URI:q,IS_SCRIPT_OR_DATA:W,ATTR_WHITESPACE:G,DOCTYPE_NAME:V,CUSTOM_ELEMENT:Y});const X={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},J=function(){return"undefined"==typeof window?null:window},Q=function(e,t){if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;let n=null;const r="data-tt-policy-suffix";t&&t.hasAttribute(r)&&(n=t.getAttribute(r));const o="dompurify"+(n?"#"+n:"");try{return e.createPolicy(o,{createHTML:e=>e,createScriptURL:e=>e})}catch(e){return console.warn("TrustedTypes policy "+o+" could not be created."),null}};function Z(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J();const n=e=>Z(e);if(n.version="3.1.6",n.removed=[],!t||!t.document||t.document.nodeType!==X.document)return n.isSupported=!1,n;let{document:r}=t;const o=r,i=o.currentScript,{DocumentFragment:c,HTMLTemplateElement:l,Node:w,Element:k,NodeFilter:T,NamedNodeMap:j=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:U,DOMParser:B,trustedTypes:H}=t,z=k.prototype,W=I(z,"cloneNode"),G=I(z,"remove"),Y=I(z,"nextSibling"),ee=I(z,"childNodes"),te=I(z,"parentNode");if("function"==typeof l){const e=r.createElement("template");e.content&&e.content.ownerDocument&&(r=e.content.ownerDocument)}let ne,re="";const{implementation:oe,createNodeIterator:se,createDocumentFragment:ie,getElementsByTagName:ae}=r,{importNode:ce}=o;let le={};n.isSupported="function"==typeof e&&"function"==typeof te&&oe&&void 0!==oe.createHTMLDocument;const{MUSTACHE_EXPR:ue,ERB_EXPR:de,TMPLIT_EXPR:pe,DATA_ATTR:he,ARIA_ATTR:fe,IS_SCRIPT_OR_DATA:me,ATTR_WHITESPACE:ge,CUSTOM_ELEMENT:ye}=K;let{IS_ALLOWED_URI:_e}=K,ve=null;const be=E({},[...C,...R,...A,...M,...L]);let Se=null;const we=E({},[...D,...$,...P,...F]);let ke=Object.seal(a(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ee=null,Te=null,xe=!0,Ie=!0,Ce=!1,Re=!0,Ae=!1,Oe=!0,Me=!1,Ne=!1,Le=!1,De=!1,$e=!1,Pe=!1,Fe=!0,je=!1;const Ue="user-content-";let Be=!0,He=!1,ze={},qe=null;const We=E({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Ge=null;const Ve=E({},["audio","video","img","source","image","track"]);let Ye=null;const Ke=E({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Xe="http://www.w3.org/1998/Math/MathML",Je="http://www.w3.org/2000/svg",Qe="http://www.w3.org/1999/xhtml";let Ze=Qe,et=!1,tt=null;const nt=E({},[Xe,Je,Qe],f);let rt=null;const ot=["application/xhtml+xml","text/html"],st="text/html";let it=null,at=null;const ct=r.createElement("form"),lt=function(e){return e instanceof RegExp||e instanceof Function},ut=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!at||at!==e){if(e&&"object"==typeof e||(e={}),e=x(e),rt=-1===ot.indexOf(e.PARSER_MEDIA_TYPE)?st:e.PARSER_MEDIA_TYPE,it="application/xhtml+xml"===rt?f:h,ve=v(e,"ALLOWED_TAGS")?E({},e.ALLOWED_TAGS,it):be,Se=v(e,"ALLOWED_ATTR")?E({},e.ALLOWED_ATTR,it):we,tt=v(e,"ALLOWED_NAMESPACES")?E({},e.ALLOWED_NAMESPACES,f):nt,Ye=v(e,"ADD_URI_SAFE_ATTR")?E(x(Ke),e.ADD_URI_SAFE_ATTR,it):Ke,Ge=v(e,"ADD_DATA_URI_TAGS")?E(x(Ve),e.ADD_DATA_URI_TAGS,it):Ve,qe=v(e,"FORBID_CONTENTS")?E({},e.FORBID_CONTENTS,it):We,Ee=v(e,"FORBID_TAGS")?E({},e.FORBID_TAGS,it):{},Te=v(e,"FORBID_ATTR")?E({},e.FORBID_ATTR,it):{},ze=!!v(e,"USE_PROFILES")&&e.USE_PROFILES,xe=!1!==e.ALLOW_ARIA_ATTR,Ie=!1!==e.ALLOW_DATA_ATTR,Ce=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Re=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,Ae=e.SAFE_FOR_TEMPLATES||!1,Oe=!1!==e.SAFE_FOR_XML,Me=e.WHOLE_DOCUMENT||!1,De=e.RETURN_DOM||!1,$e=e.RETURN_DOM_FRAGMENT||!1,Pe=e.RETURN_TRUSTED_TYPE||!1,Le=e.FORCE_BODY||!1,Fe=!1!==e.SANITIZE_DOM,je=e.SANITIZE_NAMED_PROPS||!1,Be=!1!==e.KEEP_CONTENT,He=e.IN_PLACE||!1,_e=e.ALLOWED_URI_REGEXP||q,Ze=e.NAMESPACE||Qe,ke=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&lt(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ke.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&lt(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ke.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(ke.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ae&&(Ie=!1),$e&&(De=!0),ze&&(ve=E({},L),Se=[],!0===ze.html&&(E(ve,C),E(Se,D)),!0===ze.svg&&(E(ve,R),E(Se,$),E(Se,F)),!0===ze.svgFilters&&(E(ve,A),E(Se,$),E(Se,F)),!0===ze.mathMl&&(E(ve,M),E(Se,P),E(Se,F))),e.ADD_TAGS&&(ve===be&&(ve=x(ve)),E(ve,e.ADD_TAGS,it)),e.ADD_ATTR&&(Se===we&&(Se=x(Se)),E(Se,e.ADD_ATTR,it)),e.ADD_URI_SAFE_ATTR&&E(Ye,e.ADD_URI_SAFE_ATTR,it),e.FORBID_CONTENTS&&(qe===We&&(qe=x(qe)),E(qe,e.FORBID_CONTENTS,it)),Be&&(ve["#text"]=!0),Me&&E(ve,["html","head","body"]),ve.table&&(E(ve,["tbody"]),delete Ee.tbody),e.TRUSTED_TYPES_POLICY){if("function"!=typeof e.TRUSTED_TYPES_POLICY.createHTML)throw S('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw S('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');ne=e.TRUSTED_TYPES_POLICY,re=ne.createHTML("")}else void 0===ne&&(ne=Q(H,i)),null!==ne&&"string"==typeof re&&(re=ne.createHTML(""));s&&s(e),at=e}},dt=E({},["mi","mo","mn","ms","mtext"]),pt=E({},["foreignobject","annotation-xml"]),ht=E({},["title","style","font","a","script"]),ft=E({},[...R,...A,...O]),mt=E({},[...M,...N]),gt=function(e){let t=te(e);t&&t.tagName||(t={namespaceURI:Ze,tagName:"template"});const n=h(e.tagName),r=h(t.tagName);return!!tt[e.namespaceURI]&&(e.namespaceURI===Je?t.namespaceURI===Qe?"svg"===n:t.namespaceURI===Xe?"svg"===n&&("annotation-xml"===r||dt[r]):Boolean(ft[n]):e.namespaceURI===Xe?t.namespaceURI===Qe?"math"===n:t.namespaceURI===Je?"math"===n&&pt[r]:Boolean(mt[n]):e.namespaceURI===Qe?!(t.namespaceURI===Je&&!pt[r])&&!(t.namespaceURI===Xe&&!dt[r])&&!mt[n]&&(ht[n]||!ft[n]):!("application/xhtml+xml"!==rt||!tt[e.namespaceURI]))},yt=function(e){p(n.removed,{element:e});try{te(e).removeChild(e)}catch(t){G(e)}},_t=function(e,t){try{p(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){p(n.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!Se[e])if(De||$e)try{yt(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},vt=function(e){let t=null,n=null;if(Le)e="<remove></remove>"+e;else{const t=m(e,/^[\r\n\t ]+/);n=t&&t[0]}"application/xhtml+xml"===rt&&Ze===Qe&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const o=ne?ne.createHTML(e):e;if(Ze===Qe)try{t=(new B).parseFromString(o,rt)}catch(e){}if(!t||!t.documentElement){t=oe.createDocument(Ze,"template",null);try{t.documentElement.innerHTML=et?re:o}catch(e){}}const s=t.body||t.documentElement;return e&&n&&s.insertBefore(r.createTextNode(n),s.childNodes[0]||null),Ze===Qe?ae.call(t,Me?"html":"body")[0]:Me?t.documentElement:s},bt=function(e){return se.call(e.ownerDocument||e,e,T.SHOW_ELEMENT|T.SHOW_COMMENT|T.SHOW_TEXT|T.SHOW_PROCESSING_INSTRUCTION|T.SHOW_CDATA_SECTION,null)},St=function(e){return e instanceof U&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof j)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||"function"!=typeof e.hasChildNodes)},wt=function(e){return"function"==typeof w&&e instanceof w},kt=function(e,t,r){le[e]&&u(le[e],(e=>{e.call(n,t,r,at)}))},Et=function(e){let t=null;if(kt("beforeSanitizeElements",e,null),St(e))return yt(e),!0;const r=it(e.nodeName);if(kt("uponSanitizeElement",e,{tagName:r,allowedTags:ve}),e.hasChildNodes()&&!wt(e.firstElementChild)&&b(/<[/\w]/g,e.innerHTML)&&b(/<[/\w]/g,e.textContent))return yt(e),!0;if(e.nodeType===X.progressingInstruction)return yt(e),!0;if(Oe&&e.nodeType===X.comment&&b(/<[/\w]/g,e.data))return yt(e),!0;if(!ve[r]||Ee[r]){if(!Ee[r]&&xt(r)){if(ke.tagNameCheck instanceof RegExp&&b(ke.tagNameCheck,r))return!1;if(ke.tagNameCheck instanceof Function&&ke.tagNameCheck(r))return!1}if(Be&&!qe[r]){const t=te(e)||e.parentNode,n=ee(e)||e.childNodes;if(n&&t)for(let r=n.length-1;r>=0;--r){const o=W(n[r],!0);o.__removalCount=(e.__removalCount||0)+1,t.insertBefore(o,Y(e))}}return yt(e),!0}return e instanceof k&&!gt(e)?(yt(e),!0):"noscript"!==r&&"noembed"!==r&&"noframes"!==r||!b(/<\/no(script|embed|frames)/i,e.innerHTML)?(Ae&&e.nodeType===X.text&&(t=e.textContent,u([ue,de,pe],(e=>{t=g(t,e," ")})),e.textContent!==t&&(p(n.removed,{element:e.cloneNode()}),e.textContent=t)),kt("afterSanitizeElements",e,null),!1):(yt(e),!0)},Tt=function(e,t,n){if(Fe&&("id"===t||"name"===t)&&(n in r||n in ct))return!1;if(Ie&&!Te[t]&&b(he,t));else if(xe&&b(fe,t));else if(!Se[t]||Te[t]){if(!(xt(e)&&(ke.tagNameCheck instanceof RegExp&&b(ke.tagNameCheck,e)||ke.tagNameCheck instanceof Function&&ke.tagNameCheck(e))&&(ke.attributeNameCheck instanceof RegExp&&b(ke.attributeNameCheck,t)||ke.attributeNameCheck instanceof Function&&ke.attributeNameCheck(t))||"is"===t&&ke.allowCustomizedBuiltInElements&&(ke.tagNameCheck instanceof RegExp&&b(ke.tagNameCheck,n)||ke.tagNameCheck instanceof Function&&ke.tagNameCheck(n))))return!1}else if(Ye[t]);else if(b(_e,g(n,ge,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==y(n,"data:")||!Ge[e])if(Ce&&!b(me,g(n,ge,"")));else if(n)return!1;return!0},xt=function(e){return"annotation-xml"!==e&&m(e,ye)},It=function(e){kt("beforeSanitizeAttributes",e,null);const{attributes:t}=e;if(!t)return;const r={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Se};let o=t.length;for(;o--;){const s=t[o],{name:i,namespaceURI:a,value:c}=s,l=it(i);let p="value"===i?c:_(c);if(r.attrName=l,r.attrValue=p,r.keepAttr=!0,r.forceKeepAttr=void 0,kt("uponSanitizeAttribute",e,r),p=r.attrValue,Oe&&b(/((--!?|])>)|<\/(style|title)/i,p)){_t(i,e);continue}if(r.forceKeepAttr)continue;if(_t(i,e),!r.keepAttr)continue;if(!Re&&b(/\/>/i,p)){_t(i,e);continue}Ae&&u([ue,de,pe],(e=>{p=g(p,e," ")}));const h=it(e.nodeName);if(Tt(h,l,p)){if(!je||"id"!==l&&"name"!==l||(_t(i,e),p=Ue+p),ne&&"object"==typeof H&&"function"==typeof H.getAttributeType)if(a);else switch(H.getAttributeType(h,l)){case"TrustedHTML":p=ne.createHTML(p);break;case"TrustedScriptURL":p=ne.createScriptURL(p)}try{a?e.setAttributeNS(a,i,p):e.setAttribute(i,p),St(e)?yt(e):d(n.removed)}catch(e){}}}kt("afterSanitizeAttributes",e,null)},Ct=function e(t){let n=null;const r=bt(t);for(kt("beforeSanitizeShadowDOM",t,null);n=r.nextNode();)kt("uponSanitizeShadowNode",n,null),Et(n)||(n.content instanceof c&&e(n.content),It(n));kt("afterSanitizeShadowDOM",t,null)};return n.sanitize=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null,s=null,i=null,a=null;if(et=!e,et&&(e="\x3c!--\x3e"),"string"!=typeof e&&!wt(e)){if("function"!=typeof e.toString)throw S("toString is not a function");if("string"!=typeof(e=e.toString()))throw S("dirty is not a string, aborting")}if(!n.isSupported)return e;if(Ne||ut(t),n.removed=[],"string"==typeof e&&(He=!1),He){if(e.nodeName){const t=it(e.nodeName);if(!ve[t]||Ee[t])throw S("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof w)r=vt("\x3c!----\x3e"),s=r.ownerDocument.importNode(e,!0),s.nodeType===X.element&&"BODY"===s.nodeName||"HTML"===s.nodeName?r=s:r.appendChild(s);else{if(!De&&!Ae&&!Me&&-1===e.indexOf("<"))return ne&&Pe?ne.createHTML(e):e;if(r=vt(e),!r)return De?null:Pe?re:""}r&&Le&&yt(r.firstChild);const l=bt(He?e:r);for(;i=l.nextNode();)Et(i)||(i.content instanceof c&&Ct(i.content),It(i));if(He)return e;if(De){if($e)for(a=ie.call(r.ownerDocument);r.firstChild;)a.appendChild(r.firstChild);else a=r;return(Se.shadowroot||Se.shadowrootmode)&&(a=ce.call(o,a,!0)),a}let d=Me?r.outerHTML:r.innerHTML;return Me&&ve["!doctype"]&&r.ownerDocument&&r.ownerDocument.doctype&&r.ownerDocument.doctype.name&&b(V,r.ownerDocument.doctype.name)&&(d="<!DOCTYPE "+r.ownerDocument.doctype.name+">\n"+d),Ae&&u([ue,de,pe],(e=>{d=g(d,e," ")})),ne&&Pe?ne.createHTML(d):d},n.setConfig=function(){ut(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),Ne=!0},n.clearConfig=function(){at=null,Ne=!1},n.isValidAttribute=function(e,t,n){at||ut({});const r=it(e),o=it(t);return Tt(r,o,n)},n.addHook=function(e,t){"function"==typeof t&&(le[e]=le[e]||[],p(le[e],t))},n.removeHook=function(e){if(le[e])return d(le[e])},n.removeHooks=function(e){le[e]&&(le[e]=[])},n.removeAllHooks=function(){le={}},n}var ee=Z();return ee}()}(Lt);const Dt=(e,t={})=>Lt.exports.sanitize(e,{USE_PROFILES:{html:!0},...t});function $t(e){let n,r,o,s=Dt(e[1])+"";return{c(){n=x("div"),O(n,"class","container svelte-1dicgbw")},m(t,i){k(t,n,i),n.innerHTML=s,r||(o=A(n,"click",e[0]),r=!0)},p:t,i:t,o:t,d(e){e&&E(n),r=!1,o()}}}function Pt(e){return[function(){ze({action:"dlExternalURLRedirect",payload:{destination:ut}}),ze({action:"dlTrackUiAction",payload:{uiAction:Re}})},chrome.i18n.getMessage("notification_keyboard_shortcut_hint",`<span style="color: #006494; text-decoration: underline;">${chrome.i18n.getMessage("notification_keyboard_shortcut_hint_placeholder")}</span>`)]}class Ft extends _e{constructor(e){super(),ye(this,e,Pt,$t,a,{})}}function jt(e){let n,r,o,s=Dt(e[0])+"";return{c(){n=x("div"),O(n,"class","container svelte-1dicgbw"),O(n,"data-qa","deepl-notification-open-settings-page-writing-link")},m(t,i){k(t,n,i),n.innerHTML=s,r||(o=A(n,"click",e[1]),r=!0)},p(e,[t]){1&t&&s!==(s=Dt(e[0])+"")&&(n.innerHTML=s)},i:t,o:t,d(e){e&&E(n),r=!1,o()}}}function Ut(e,t,n){let{options:r}=t,o=r?.settingsPageURL?r?.settingsPageURL:ht;let s="",i=r?.currentDomain?r.currentDomain:"";switch(r.saveAction){case Oe:s=chrome.i18n.getMessage("notification_input_translation_disabled_everywhere",`<span style="text-decoration: underline;">${chrome.i18n.getMessage("notification_input_translation_link_to_settings_placeholder")}</span>`);break;case Ae:s=chrome.i18n.getMessage("notification_input_translation_disabled_per_site",[i,`<span style="text-decoration: underline;">${chrome.i18n.getMessage("notification_input_translation_link_to_settings_placeholder")}</span>`])}return e.$$set=e=>{"options"in e&&n(2,r=e.options)},[s,function(){ze({action:"dlOpenInternalPage",payload:{destination:o}})},r]}class Bt extends _e{constructor(e){super(),ye(this,e,Ut,jt,a,{options:2})}}function Ht(e){let n,r,o,s=Dt(e[0])+"";return{c(){n=x("div"),O(n,"class","container svelte-1dicgbw"),O(n,"data-qa","deepl-notification-open-settings-page-reading-link")},m(t,i){k(t,n,i),n.innerHTML=s,r||(o=A(n,"click",e[1]),r=!0)},p(e,[t]){1&t&&s!==(s=Dt(e[0])+"")&&(n.innerHTML=s)},i:t,o:t,d(e){e&&E(n),r=!1,o()}}}function zt(e,t,n){let{options:r}=t,o=r?.settingsPageURL?r?.settingsPageURL:ht;let s="",i=r?.currentDomain?r.currentDomain:"";switch(r.saveAction){case Oe:s=chrome.i18n.getMessage("notification_inline_translation_disabled_everywhere",`<span style="text-decoration: underline;">${chrome.i18n.getMessage("notification_inline_translation_link_to_settings_placeholder")}</span>`);break;case Ae:s=chrome.i18n.getMessage("notification_inline_translation_disabled_per_site",[i,`<span style="text-decoration: underline;">${chrome.i18n.getMessage("notification_inline_translation_link_to_settings_placeholder")}</span>`])}return e.$$set=e=>{"options"in e&&n(2,r=e.options)},[s,function(){ze({action:"dlOpenInternalPage",payload:{destination:o}})},r]}class qt extends _e{constructor(e){super(),ye(this,e,zt,Ht,a,{options:2})}}function Wt(e){let n,r,o;return{c(){n=x("div"),n.textContent=`${chrome.i18n.getMessage("ui_notification_fpt_hide")}`,O(n,"class","container svelte-1dicgbw"),O(n,"data-qa","deepl-notification-open-settings-page-reading-link")},m(t,s){k(t,n,s),r||(o=A(n,"click",e[0]),r=!0)},p:t,i:t,o:t,d(e){e&&E(n),r=!1,o()}}}function Gt(e){return[function(){ze({action:"dlOpenInternalPage",payload:{destination:ht}})}]}class Vt extends _e{constructor(e){super(),ye(this,e,Gt,Wt,a,{})}}function Yt(e){let n;return{c(){n=x("div"),n.textContent=`${chrome.i18n.getMessage("onboarding_account_successfully_created")}`,O(n,"class","dl-account-created svelte-nuwktw")},m(e,t){k(e,n,t)},p:t,i:t,o:t,d(e){e&&E(n)}}}class Kt extends _e{constructor(e){super(),ye(this,e,null,Yt,a,{})}}function Xt(e){let n;return{c(){n=x("div"),n.textContent=`${chrome.i18n.getMessage("onboarding_successful_login_notification")}`,O(n,"class","dl-account-created svelte-nuwktw")},m(e,t){k(e,n,t)},p:t,i:t,o:t,d(e){e&&E(n)}}}class Jt extends _e{constructor(e){super(),ye(this,e,null,Xt,a,{})}}function Qt(e){let n,r,o,s;return{c(){n=x("div"),r=x("span"),r.textContent=`${chrome.i18n.getMessage("ui_gslides_unsaved_asset_warning_main")}`,o=C(),s=x("span"),s.textContent=`${chrome.i18n.getMessage("ui_gslides_unsaved_asset_warning_explanation")}`,O(r,"class","main-text svelte-18of7gm"),O(n,"class","dl-notification-gslides-prevent-asset-loss")},m(e,t){k(e,n,t),b(n,r),b(n,o),b(n,s)},p:t,i:t,o:t,d(e){e&&E(n)}}}class Zt extends _e{constructor(e){super(),ye(this,e,null,Qt,a,{})}}function en(e){let n,r,o,s,i,a,c,l,u;return{c(){n=x("div"),r=x("div"),r.textContent=`${chrome.i18n.getMessage("notification_ads_ms_office_headline")}`,o=C(),s=x("div"),s.textContent=`${chrome.i18n.getMessage("notification_ads_ms_office_text")}`,i=C(),a=x("div"),c=x("div"),c.textContent=`${chrome.i18n.getMessage("notification_ads_ms_office_learn_more")}`,O(r,"class","dl-ads-for-addins_headline svelte-drhmpk"),O(s,"class","dl-ads-for-addins_text"),O(c,"class","dl-ads-for-addins_button svelte-drhmpk"),O(a,"class","dl-ads-for-addins_wrapper svelte-drhmpk"),O(n,"class","dl-ads-for-addins svelte-drhmpk")},m(t,d){k(t,n,d),b(n,r),b(n,o),b(n,s),b(n,i),b(n,a),b(a,c),l||(u=A(a,"click",e[0]),l=!0)},p:t,i:t,o:t,d(e){e&&E(n),l=!1,u()}}}function tn(e){return[()=>{ze({action:"dlExternalURLRedirect",payload:{destination:pt,utmContent:"msaddin_ads_notification"}}),ze({action:"dlTrackClicksOnAdsButton"})}]}class nn extends _e{constructor(e){super(),ye(this,e,tn,en,a,{})}}function rn(e){let r,o,a,c,l,u,d,p,h,m,g,y,v,S,w,T=e[4]==Ie.warning_theme&&on();var I=e[5];function R(e,t){return{props:{options:e[1]}}}return I&&(p=L(I,R(e))),{c(){r=x("div"),o=x("div"),a=x("button"),l=C(),u=x("div"),T&&T.c(),d=C(),p&&he(p.$$.fragment),O(a,"class",c="dl-close-icon "+e[4]+" svelte-np3z9s"),O(o,"class","header"),O(o,"notificationtheme",e[4]),O(u,"class",h="body "+e[4]+" svelte-np3z9s"),O(r,"class",m="container "+e[4]+" svelte-np3z9s"),O(r,"dir",je()),N(r,"success",e[0]===xe.accountSuccessfullyCreated||e[0]===xe.successfullyLoggedIn)},m(t,n){k(t,r,n),b(r,o),b(o,a),b(r,l),b(r,u),T&&T.m(u,null),b(u,d),p&&fe(p,u,null),v=!0,S||(w=A(a,"click",(function(){i(e[2])&&e[2].apply(this,arguments)})),S=!0)},p(t,n){if(e=t,(!v||16&n&&c!==(c="dl-close-icon "+e[4]+" svelte-np3z9s"))&&O(a,"class",c),(!v||16&n)&&O(o,"notificationtheme",e[4]),e[4]==Ie.warning_theme?T||(T=on(),T.c(),T.m(u,d)):T&&(T.d(1),T=null),32&n&&I!==(I=e[5])){if(p){ae();const e=p;ue(e.$$.fragment,1,0,(()=>{me(e,1)})),ce()}I?(p=L(I,R(e)),he(p.$$.fragment),le(p.$$.fragment,1),fe(p,u,null)):p=null}else if(I){const t={};2&n&&(t.options=e[1]),p.$set(t)}(!v||16&n&&h!==(h="body "+e[4]+" svelte-np3z9s"))&&O(u,"class",h),(!v||16&n&&m!==(m="container "+e[4]+" svelte-np3z9s"))&&O(r,"class",m),(!v||17&n)&&N(r,"success",e[0]===xe.accountSuccessfullyCreated||e[0]===xe.successfullyLoggedIn)},i(e){v||(p&&le(p.$$.fragment,e),J((()=>{v&&(y&&y.end(1),g=function(e,r,o){const s={direction:"in"};let a,c,l=r(e,o,s),u=!1,d=0;function p(){a&&j(e,a)}function h(){const{delay:r=0,duration:o=300,easing:s=n,tick:i=t,css:h}=l||de;h&&(a=F(e,0,1,o,r,s,h,d++)),i(0,1);const m=f()+r,g=m+o;c&&c.abort(),u=!0,J((()=>oe(e,!0,"start"))),c=_((t=>{if(u){if(t>=g)return i(1,0),oe(e,!0,"end"),p(),u=!1;if(t>=m){const e=s((t-m)/o);i(e,1-e)}}return u}))}let m=!1;return{start(){m||(m=!0,j(e),i(l)?(l=l(s),re().then(h)):h())},invalidate(){m=!1},end(){u&&(p(),u=!1)}}}(r,Mt,{x:100,duration:1e3}),g.start())})),v=!0)},o(e){p&&ue(p.$$.fragment,e),g&&g.invalidate(),y=function(e,r,o){const a={direction:"out"};let c,l=r(e,o,a),u=!0;const d=ie;let p;function h(){const{delay:r=0,duration:o=300,easing:i=n,tick:a=t,css:h}=l||de;h&&(c=F(e,1,0,o,r,i,h));const m=f()+r,g=m+o;J((()=>oe(e,!1,"start"))),"inert"in e&&(p=e.inert,e.inert=!0),_((t=>{if(u){if(t>=g)return a(0,1),oe(e,!1,"end"),--d.r||s(d.c),!1;if(t>=m){const e=i((t-m)/o);a(1-e,e)}}return u}))}return d.r+=1,i(l)?re().then((()=>{l=l(a),h()})):h(),{end(t){t&&"inert"in e&&(e.inert=p),t&&l.tick&&l.tick(1,0),u&&(c&&j(e,c),u=!1)}}}(r,Mt,{x:100,duration:1e3}),v=!1},d(e){e&&E(r),T&&T.d(),p&&me(p),e&&y&&y.end(),S=!1,w()}}}function on(e){let t;return{c(){t=x("div"),t.innerHTML='<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 6V10M10 14H10.01M19 10C19 14.9706 14.9706 19 10 19C5.02944 19 1 14.9706 1 10C1 5.02944 5.02944 1 10 1C14.9706 1 19 5.02944 19 10Z" stroke="#ECBA82" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>',O(t,"class","icon-container")},m(e,n){k(e,t,n)},d(e){e&&E(t)}}}function sn(e){let t,n,r=e[3]&&rn(e);return{c(){r&&r.c(),t=R()},m(e,o){r&&r.m(e,o),k(e,t,o),n=!0},p(e,[n]){e[3]?r?(r.p(e,n),8&n&&le(r,1)):(r=rn(e),r.c(),le(r,1),r.m(t.parentNode,t)):r&&(ae(),ue(r,1,1,(()=>{r=null})),ce())},i(e){n||(le(r),n=!0)},o(e){ue(r),n=!1},d(e){e&&E(t),r&&r.d(e)}}}function an(e,t,n){let r,o;z("text_direction",je());let{type:s}=t,{options:i}=t,{close:a}=t,c=!1;const l={[xe.hintKeyboardShortcut]:Ft,[xe.inputTranslation]:Bt,[xe.inlineTranslation]:qt,[xe.fullPageTranslation]:Vt,[xe.accountSuccessfullyCreated]:Kt,[xe.successfullyLoggedIn]:Jt,[xe.glidesPreventAssetLoss]:Zt,[xe.showAdsForMSAddins]:nn};return H((()=>{setTimeout((()=>n(3,c=!0)),100),setTimeout((()=>n(3,c=!1)),10100),setTimeout((()=>a()),11100)})),e.$$set=e=>{"type"in e&&n(0,s=e.type),"options"in e&&n(1,i=e.options),"close"in e&&n(2,a=e.close)},e.$$.update=()=>{1&e.$$.dirty&&n(5,r=l[s]),2&e.$$.dirty&&n(4,o=Ie[i?.theme]?Ie[i?.theme]:"")},[s,i,a,c,o,r]}class cn extends _e{constructor(e){super(),ye(this,e,an,sn,a,{type:0,options:1,close:2})}}const{window:ln}=v;function un(e,t,n){const r=e.slice();return r[8]=t[n],r[10]=n,r}function dn(e){let n,r,o;return r=new cn({props:{type:xe.accountSuccessfullyCreated,close:e[3]}}),{c(){n=x("div"),he(r.$$.fragment),O(n,"class","notification-container svelte-c0mafs")},m(e,t){k(e,n,t),fe(r,n,null),o=!0},p:t,i(e){o||(le(r.$$.fragment,e),o=!0)},o(e){ue(r.$$.fragment,e),o=!1},d(e){e&&E(n),me(r)}}}function pn(e){let n,r,o;return r=new cn({props:{type:xe.successfullyLoggedIn,close:e[3]}}),{c(){n=x("div"),he(r.$$.fragment),O(n,"class","notification-container svelte-c0mafs")},m(e,t){k(e,n,t),fe(r,n,null),o=!0},p:t,i(e){o||(le(r.$$.fragment,e),o=!0)},o(e){ue(r.$$.fragment,e),o=!1},d(e){e&&E(n),me(r)}}}function hn(e){let t,n;return t=new At({props:{onboardingStep:e[8],step:e[10]+1}}),{c(){he(t.$$.fragment)},m(e,r){fe(t,e,r),n=!0},i(e){n||(le(t.$$.fragment,e),n=!0)},o(e){ue(t.$$.fragment,e),n=!1},d(e){me(t,e)}}}function fn(e){let t,n,r=e[2]===e[10]+1&&hn(e);return{c(){r&&r.c(),t=R()},m(e,o){r&&r.m(e,o),k(e,t,o),n=!0},p(e,n){e[2]===e[10]+1?r?4&n&&le(r,1):(r=hn(e),r.c(),le(r,1),r.m(t.parentNode,t)):r&&(ae(),ue(r,1,1,(()=>{r=null})),ce())},i(e){n||(le(r),n=!0)},o(e){ue(r),n=!1},d(e){e&&E(t),r&&r.d(e)}}}function mn(e){let t,n,r=pe(Te),o=[];for(let t=0;t<r.length;t+=1)o[t]=fn(un(e,r,t));const s=e=>ue(o[e],1,1,(()=>{o[e]=null}));return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=R()},m(e,r){for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(e,r);k(e,t,r),n=!0},p(e,n){if(4&n){let i;for(r=pe(Te),i=0;i<r.length;i+=1){const s=un(e,r,i);o[i]?(o[i].p(s,n),le(o[i],1)):(o[i]=fn(s),o[i].c(),le(o[i],1),o[i].m(t.parentNode,t))}for(ae(),i=r.length;i<o.length;i+=1)s(i);ce()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)le(o[e]);n=!0}},o(e){o=o.filter(Boolean);for(let e=0;e<o.length;e+=1)ue(o[e]);n=!1},d(e){e&&E(t),T(o,e)}}}function gn(e){let t,n,r,o,s=function(e){let t,n,r,o,s=e[0]&&dn(e),i=e[1]&&pn(e);return r=new ct({props:{wideMode:1===e[2],$$slots:{default:[mn]},$$scope:{ctx:e}}}),{c(){s&&s.c(),t=C(),i&&i.c(),n=C(),he(r.$$.fragment)},m(e,a){s&&s.m(e,a),k(e,t,a),i&&i.m(e,a),k(e,n,a),fe(r,e,a),o=!0},p(e,o){e[0]?s?(s.p(e,o),1&o&&le(s,1)):(s=dn(e),s.c(),le(s,1),s.m(t.parentNode,t)):s&&(ae(),ue(s,1,1,(()=>{s=null})),ce()),e[1]?i?(i.p(e,o),2&o&&le(i,1)):(i=pn(e),i.c(),le(i,1),i.m(n.parentNode,n)):i&&(ae(),ue(i,1,1,(()=>{i=null})),ce());const a={};4&o&&(a.wideMode=1===e[2]),2052&o&&(a.$$scope={dirty:o,ctx:e}),r.$set(a)},i(e){o||(le(s),le(i),le(r.$$.fragment,e),o=!0)},o(e){ue(s),ue(i),ue(r.$$.fragment,e),o=!1},d(e){e&&(E(t),E(n)),s&&s.d(e),i&&i.d(e),me(r,e)}}}(e);return{c(){s&&s.c(),t=R()},m(e,i){s&&s.m(e,i),k(e,t,i),n=!0,r||(o=A(ln,"hashchange",Ee),r=!0)},p(e,[t]){s.p(e,t)},i(e){n||(le(s),n=!0)},o(e){ue(s),n=!1},d(e){e&&E(t),s&&s.d(e),r=!1,o()}}}function yn(e,t,n){let r,o;l(e,qe,(e=>n(5,r=e))),l(e,we,(e=>n(2,o=e))),z("text_direction",je());let s=performance.now(),i=performance.now(),a=!1,c=!1;function u(e,t,n){const r=performance.now();ze({action:"dlTrackOnboardingStepChange",payload:{previousStep:e,newStep:t,trigger:n,secondsOnOnboarding:Math.floor((r-s)/1e3),secondsOnPreviousStep:Math.floor((r-i)/1e3)}}),i=performance.now()}return z("deepl_onboarding_navigation",{currentStep:we,settings:qe,trackStepChange:u}),H((()=>{u(0,1,Me),"#login_successful"!==window.location.hash&&"#signup_successful"!==window.location.hash||(n(0,a=!0),d(qe,r.hasUserSeenAccountCreationOnboarding=!0,r),window.history.replaceState({},document.title,window.location.pathname)),"#successful_login"===window.location.hash&&(n(1,c=!0),d(qe,r.hasUserSeenAccountCreationOnboarding=!0,r))})),Ee(),[a,c,o,function(){n(0,a=!1),n(1,c=!1)}]}const _n=Object.prototype.toString;function vn(e){switch(_n.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return On(e,Error)}}function bn(e,t){return _n.call(e)===`[object ${t}]`}function Sn(e){return bn(e,"ErrorEvent")}function wn(e){return bn(e,"DOMError")}function kn(e){return bn(e,"String")}function En(e){return"object"==typeof e&&null!==e&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function Tn(e){return null===e||En(e)||"object"!=typeof e&&"function"!=typeof e}function xn(e){return bn(e,"Object")}function In(e){return"undefined"!=typeof Event&&On(e,Event)}function Cn(e){return bn(e,"RegExp")}function Rn(e){return Boolean(e&&e.then&&"function"==typeof e.then)}function An(e){return"number"==typeof e&&e!=e}function On(e,t){try{return e instanceof t}catch(e){return!1}}function Mn(e){return!("object"!=typeof e||null===e||!e.__isVue&&!e._isVue)}function Nn(e,t=0){return"string"!=typeof e||0===t||e.length<=t?e:`${e.slice(0,t)}...`}function Ln(e,t){let n=e;const r=n.length;if(r<=150)return n;t>r&&(t=r);let o=Math.max(t-60,0);o<5&&(o=0);let s=Math.min(o+140,r);return s>r-5&&(s=r),s===r&&(o=Math.max(s-140,0)),n=n.slice(o,s),o>0&&(n=`'{snip} ${n}`),s<r&&(n+=" {snip}"),n}function Dn(e,t){if(!Array.isArray(e))return"";const n=[];for(let t=0;t<e.length;t++){const r=e[t];try{Mn(r)?n.push("[VueViewModel]"):n.push(String(r))}catch(e){n.push("[value cannot be serialized]")}}return n.join(t)}function $n(e,t=[],n=!1){return t.some((t=>function(e,t,n=!1){return!!kn(e)&&(Cn(t)?t.test(e):!!kn(t)&&(n?e===t:e.includes(t)))}(e,t,n)))}function Pn(e,t,n=250,r,o,s,i){if(!(s.exception&&s.exception.values&&i&&On(i.originalException,Error)))return;const a=s.exception.values.length>0?s.exception.values[s.exception.values.length-1]:void 0;var c,l;a&&(s.exception.values=(c=Fn(e,t,o,i.originalException,r,s.exception.values,a,0),l=n,c.map((e=>(e.value&&(e.value=Nn(e.value,l)),e)))))}function Fn(e,t,n,r,o,s,i,a){if(s.length>=n+1)return s;let c=[...s];if(On(r[o],Error)){jn(i,a);const s=e(t,r[o]),l=c.length;Un(s,o,l,a),c=Fn(e,t,n,r[o],o,[s,...c],s,l)}return Array.isArray(r.errors)&&r.errors.forEach(((r,s)=>{if(On(r,Error)){jn(i,a);const l=e(t,r),u=c.length;Un(l,`errors[${s}]`,u,a),c=Fn(e,t,n,r,o,[l,...c],l,u)}})),c}function jn(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,..."AggregateError"===e.type&&{is_exception_group:!0},exception_id:t}}function Un(e,t,n,r){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}function Bn(e){return e&&e.Math==Math?e:void 0}const Hn="object"==typeof globalThis&&Bn(globalThis)||"object"==typeof window&&Bn(window)||"object"==typeof self&&Bn(self)||"object"==typeof global&&Bn(global)||function(){return this}()||{};function zn(){return Hn}function qn(e,t,n){const r=n||Hn,o=r.__SENTRY__=r.__SENTRY__||{};return o[e]||(o[e]=t())}const Wn=zn(),Gn=80;function Vn(e,t={}){if(!e)return"<unknown>";try{let n=e;const r=5,o=[];let s=0,i=0;const a=" > ",c=a.length;let l;const u=Array.isArray(t)?t:t.keyAttrs,d=!Array.isArray(t)&&t.maxStringLength||Gn;for(;n&&s++<r&&(l=Yn(n,u),!("html"===l||s>1&&i+o.length*c+l.length>=d));)o.push(l),i+=l.length,n=n.parentNode;return o.reverse().join(a)}catch(e){return"<unknown>"}}function Yn(e,t){const n=e,r=[];let o,s,i,a,c;if(!n||!n.tagName)return"";if(Wn.HTMLElement&&n instanceof HTMLElement&&n.dataset&&n.dataset.sentryComponent)return n.dataset.sentryComponent;r.push(n.tagName.toLowerCase());const l=t&&t.length?t.filter((e=>n.getAttribute(e))).map((e=>[e,n.getAttribute(e)])):null;if(l&&l.length)l.forEach((e=>{r.push(`[${e[0]}="${e[1]}"]`)}));else if(n.id&&r.push(`#${n.id}`),o=n.className,o&&kn(o))for(s=o.split(/\s+/),c=0;c<s.length;c++)r.push(`.${s[c]}`);const u=["aria-label","type","name","title","alt"];for(c=0;c<u.length;c++)i=u[c],a=n.getAttribute(i),a&&r.push(`[${i}="${a}"]`);return r.join("")}function Kn(){try{return Wn.document.location.href}catch(e){return""}}function Xn(e){return Wn.document&&Wn.document.querySelector?Wn.document.querySelector(e):null}function Jn(e){if(!Wn.HTMLElement)return null;let t=e;for(let e=0;e<5;e++){if(!t)return null;if(t instanceof HTMLElement&&t.dataset.sentryComponent)return t.dataset.sentryComponent;t=t.parentNode}return null}const Qn="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,Zn=["debug","info","warn","error","log","assert","trace"],er={};function tr(e){if(!("console"in Hn))return e();const t=Hn.console,n={},r=Object.keys(er);r.forEach((e=>{const r=er[e];n[e]=t[e],t[e]=r}));try{return e()}finally{r.forEach((e=>{t[e]=n[e]}))}}const nr=function(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return Qn?Zn.forEach((n=>{t[n]=(...t)=>{e&&tr((()=>{Hn.console[n](`Sentry Logger [${n}]:`,...t)}))}})):Zn.forEach((e=>{t[e]=()=>{}})),t}(),rr=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function or(e,t=!1){const{host:n,path:r,pass:o,port:s,projectId:i,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&o?`:${o}`:""}@${n}${s?`:${s}`:""}/${r?`${r}/`:r}${i}`}function sr(e){const t=rr.exec(e);if(!t)return void tr((()=>{console.error(`Invalid Sentry Dsn: ${e}`)}));const[n,r,o="",s,i="",a]=t.slice(1);let c="",l=a;const u=l.split("/");if(u.length>1&&(c=u.slice(0,-1).join("/"),l=u.pop()),l){const e=l.match(/^\d+/);e&&(l=e[0])}return ir({host:s,pass:o,path:c,projectId:l,port:i,protocol:n,publicKey:r})}function ir(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function ar(e){const t="string"==typeof e?sr(e):ir(e);if(t&&function(e){if(!Qn)return!0;const{port:t,projectId:n,protocol:r}=e;return!(["protocol","publicKey","host","projectId"].find((t=>!e[t]&&(nr.error(`Invalid Sentry Dsn: ${t} missing`),!0)))||(n.match(/^\d+$/)?function(e){return"http"===e||"https"===e}(r)?t&&isNaN(parseInt(t,10))&&(nr.error(`Invalid Sentry Dsn: Invalid port ${t}`),1):(nr.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),1):(nr.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),1)))}(t))return t}class cr extends Error{constructor(e,t="warn"){super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=t}}function lr(e,t,n){if(!(t in e))return;const r=e[t],o=n(r);"function"==typeof o&&dr(o,r),e[t]=o}function ur(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch(n){Qn&&nr.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function dr(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,ur(e,"__sentry_original__",t)}catch(e){}}function pr(e){return e.__sentry_original__}function hr(e){if(vn(e))return{message:e.message,name:e.name,stack:e.stack,...mr(e)};if(In(e)){const t={type:e.type,target:fr(e.target),currentTarget:fr(e.currentTarget),...mr(e)};return"undefined"!=typeof CustomEvent&&On(e,CustomEvent)&&(t.detail=e.detail),t}return e}function fr(e){try{return t=e,"undefined"!=typeof Element&&On(t,Element)?Vn(e):Object.prototype.toString.call(e)}catch(e){return"<unknown>"}var t}function mr(e){if("object"==typeof e&&null!==e){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}return{}}function gr(e){return yr(e,new Map)}function yr(e,t){if(function(e){if(!xn(e))return!1;try{const t=Object.getPrototypeOf(e).constructor.name;return!t||"Object"===t}catch(e){return!0}}(e)){const n=t.get(e);if(void 0!==n)return n;const r={};t.set(e,r);for(const n of Object.keys(e))void 0!==e[n]&&(r[n]=yr(e[n],t));return r}if(Array.isArray(e)){const n=t.get(e);if(void 0!==n)return n;const r=[];return t.set(e,r),e.forEach((e=>{r.push(yr(e,t))})),r}return e}const _r=50,vr=/\(error: (.*)\)/,br=/captureMessage|captureException/;function Sr(...e){const t=e.sort(((e,t)=>e[0]-t[0])).map((e=>e[1]));return(e,n=0)=>{const r=[],o=e.split("\n");for(let e=n;e<o.length;e++){const n=o[e];if(n.length>1024)continue;const s=vr.test(n)?n.replace(vr,"$1"):n;if(!s.match(/\S*Error: /)){for(const e of t){const t=e(s);if(t){r.push(t);break}}if(r.length>=_r)break}}return function(e){if(!e.length)return[];const t=Array.from(e);/sentryWrapped/.test(t[t.length-1].function||"")&&t.pop();t.reverse(),br.test(t[t.length-1].function||"")&&(t.pop(),br.test(t[t.length-1].function||"")&&t.pop());return t.slice(0,_r).map((e=>({...e,filename:e.filename||t[t.length-1].filename,function:e.function||"?"})))}(r)}}const wr="<anonymous>";function kr(e){try{return e&&"function"==typeof e&&e.name||wr}catch(e){return wr}}const Er={},Tr={};function xr(e,t){Er[e]=Er[e]||[],Er[e].push(t)}function Ir(e,t){Tr[e]||(t(),Tr[e]=!0)}function Cr(e,t){const n=e&&Er[e];if(n)for(const r of n)try{r(t)}catch(t){Qn&&nr.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${kr(r)}\nError:`,t)}}function Rr(e){const t="console";xr(t,e),Ir(t,Ar)}function Ar(){"console"in Hn&&Zn.forEach((function(e){e in Hn.console&&lr(Hn.console,e,(function(t){return er[e]=t,function(...t){Cr("console",{args:t,level:e});const n=er[e];n&&n.apply(Hn.console,t)}}))}))}function Or(){const e=Hn,t=e.crypto||e.msCrypto;let n=()=>16*Math.random();try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(n=()=>{const e=new Uint8Array(1);return t.getRandomValues(e),e[0]})}catch(e){}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,(e=>(e^(15&n())>>e/4).toString(16)))}function Mr(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function Nr(e){const{message:t,event_id:n}=e;if(t)return t;const r=Mr(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function Lr(e,t,n){const r=e.exception=e.exception||{},o=r.values=r.values||[],s=o[0]=o[0]||{};s.value||(s.value=t||""),s.type||(s.type=n||"Error")}function Dr(e,t){const n=Mr(e);if(!n)return;const r=n.mechanism;if(n.mechanism={type:"generic",handled:!0,...r,...t},t&&"data"in t){const e={...r&&r.data,...t.data};n.mechanism.data=e}}function $r(e){if(e&&e.__sentry_captured__)return!0;try{ur(e,"__sentry_captured__",!0)}catch(e){}return!1}function Pr(e){return Array.isArray(e)?e:[e]}const Fr=Hn,jr=1e3;let Ur,Br,Hr;function zr(e){xr("dom",e),Ir("dom",qr)}function qr(){if(!Fr.document)return;const e=Cr.bind(null,"dom"),t=Wr(e,!0);Fr.document.addEventListener("click",t,!1),Fr.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach((t=>{const n=Fr[t]&&Fr[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(lr(n,"addEventListener",(function(t){return function(n,r,o){if("click"===n||"keypress"==n)try{const r=this,s=r.__sentry_instrumentation_handlers__=r.__sentry_instrumentation_handlers__||{},i=s[n]=s[n]||{refCount:0};if(!i.handler){const r=Wr(e);i.handler=r,t.call(this,n,r,o)}i.refCount++}catch(e){}return t.call(this,n,r,o)}})),lr(n,"removeEventListener",(function(e){return function(t,n,r){if("click"===t||"keypress"==t)try{const n=this,o=n.__sentry_instrumentation_handlers__||{},s=o[t];s&&(s.refCount--,s.refCount<=0&&(e.call(this,t,s.handler,r),s.handler=void 0,delete o[t]),0===Object.keys(o).length&&delete n.__sentry_instrumentation_handlers__)}catch(e){}return e.call(this,t,n,r)}})))}))}function Wr(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;const r=function(e){try{return e.target}catch(e){return null}}(n);if(function(e,t){return"keypress"===e&&(!t||!t.tagName||"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&!t.isContentEditable)}(n.type,r))return;ur(n,"_sentryCaptured",!0),r&&!r._sentryId&&ur(r,"_sentryId",Or());const o="keypress"===n.type?"input":n.type;if(!function(e){if(e.type!==Br)return!1;try{if(!e.target||e.target._sentryId!==Hr)return!1}catch(e){}return!0}(n)){e({event:n,name:o,global:t}),Br=n.type,Hr=r?r._sentryId:void 0}clearTimeout(Ur),Ur=Fr.setTimeout((()=>{Hr=void 0,Br=void 0}),jr)}}const Gr=zn();function Vr(){if(!("fetch"in Gr))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(e){return!1}}function Yr(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function Kr(){if("string"==typeof EdgeRuntime)return!0;if(!Vr())return!1;if(Yr(Gr.fetch))return!0;let e=!1;const t=Gr.document;if(t&&"function"==typeof t.createElement)try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(e=Yr(n.contentWindow.fetch)),t.head.removeChild(n)}catch(e){Qn&&nr.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return e}function Xr(e){const t="fetch";xr(t,e),Ir(t,Jr)}function Jr(){Kr()&&lr(Hn,"fetch",(function(e){return function(...t){const{method:n,url:r}=function(e){if(0===e.length)return{method:"GET",url:""};if(2===e.length){const[t,n]=e;return{url:Zr(t),method:Qr(n,"method")?String(n.method).toUpperCase():"GET"}}const t=e[0];return{url:Zr(t),method:Qr(t,"method")?String(t.method).toUpperCase():"GET"}}(t),o={args:t,fetchData:{method:n,url:r},startTimestamp:Date.now()};return Cr("fetch",{...o}),e.apply(Hn,t).then((e=>(Cr("fetch",{...o,endTimestamp:Date.now(),response:e}),e)),(e=>{throw Cr("fetch",{...o,endTimestamp:Date.now(),error:e}),e}))}}))}function Qr(e,t){return!!e&&"object"==typeof e&&!!e[t]}function Zr(e){return"string"==typeof e?e:e?Qr(e,"url")?e.url:e.toString?e.toString():"":""}let eo=null;function to(e){const t="error";xr(t,e),Ir(t,no)}function no(){eo=Hn.onerror,Hn.onerror=function(e,t,n,r,o){return Cr("error",{column:r,error:o,line:n,msg:e,url:t}),!(!eo||eo.__SENTRY_LOADER__)&&eo.apply(this,arguments)},Hn.onerror.__SENTRY_INSTRUMENTED__=!0}let ro=null;function oo(e){const t="unhandledrejection";xr(t,e),Ir(t,so)}function so(){ro=Hn.onunhandledrejection,Hn.onunhandledrejection=function(e){return Cr("unhandledrejection",e),!(ro&&!ro.__SENTRY_LOADER__)||ro.apply(this,arguments)},Hn.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const io=zn();const ao=Hn;let co;function lo(e){const t="history";xr(t,e),Ir(t,uo)}function uo(){if(!function(){const e=io.chrome,t=e&&e.app&&e.app.runtime,n="history"in io&&!!io.history.pushState&&!!io.history.replaceState;return!t&&n}())return;const e=ao.onpopstate;function t(e){return function(...t){const n=t.length>2?t[2]:void 0;if(n){const e=co,t=String(n);co=t;Cr("history",{from:e,to:t})}return e.apply(this,t)}}ao.onpopstate=function(...t){const n=ao.location.href,r=co;co=n;if(Cr("history",{from:r,to:n}),e)try{return e.apply(this,t)}catch(e){}},lr(ao.history,"pushState",t),lr(ao.history,"replaceState",t)}const po=Hn,ho="__sentry_xhr_v3__";function fo(e){xr("xhr",e),Ir("xhr",mo)}function mo(){if(!po.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;lr(e,"open",(function(e){return function(...t){const n=Date.now(),r=kn(t[0])?t[0].toUpperCase():void 0,o=function(e){if(kn(e))return e;try{return e.toString()}catch(e){}return}(t[1]);if(!r||!o)return e.apply(this,t);this[ho]={method:r,url:o,request_headers:{}},"POST"===r&&o.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const s=()=>{const e=this[ho];if(e&&4===this.readyState){try{e.status_code=this.status}catch(e){}Cr("xhr",{args:[r,o],endTimestamp:Date.now(),startTimestamp:n,xhr:this})}};return"onreadystatechange"in this&&"function"==typeof this.onreadystatechange?lr(this,"onreadystatechange",(function(e){return function(...t){return s(),e.apply(this,t)}})):this.addEventListener("readystatechange",s),lr(this,"setRequestHeader",(function(e){return function(...t){const[n,r]=t,o=this[ho];return o&&kn(n)&&kn(r)&&(o.request_headers[n.toLowerCase()]=r),e.apply(this,t)}})),e.apply(this,t)}})),lr(e,"send",(function(e){return function(...t){const n=this[ho];if(!n)return e.apply(this,t);void 0!==t[0]&&(n.body=t[0]);return Cr("xhr",{args:[n.method,n.url],startTimestamp:Date.now(),xhr:this}),e.apply(this,t)}}))}function go(){return!("undefined"!=typeof __SENTRY_BROWSER_BUNDLE__&&__SENTRY_BROWSER_BUNDLE__)&&"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)}function yo(e,t){return e.require(t)}function _o(e){let t;try{t=yo(module,e)}catch(e){}try{const{cwd:n}=yo(module,"process");t=yo(module,`${n()}/node_modules/${e}`)}catch(e){}return t}function vo(){return"undefined"!=typeof window&&(!go()||void 0!==Hn.process&&"renderer"===Hn.process.type)}function bo(e,t=100,n=1/0){try{return wo("",e,t,n)}catch(e){return{ERROR:`**non-serializable** (${e})`}}}function So(e,t=3,n=102400){const r=bo(e,t);return o=r,function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(o))>n?So(e,t-1,n):r;var o}function wo(e,t,n=1/0,r=1/0,o=function(){const e="function"==typeof WeakSet,t=e?new WeakSet:[];return[function(n){if(e)return!!t.has(n)||(t.add(n),!1);for(let e=0;e<t.length;e++)if(t[e]===n)return!0;return t.push(n),!1},function(n){if(e)t.delete(n);else for(let e=0;e<t.length;e++)if(t[e]===n){t.splice(e,1);break}}]}()){const[s,i]=o;if(null==t||["number","boolean","string"].includes(typeof t)&&!An(t))return t;const a=function(e,t){try{if("domain"===e&&t&&"object"==typeof t&&t._events)return"[Domain]";if("domainEmitter"===e)return"[DomainEmitter]";if("undefined"!=typeof global&&t===global)return"[Global]";if("undefined"!=typeof window&&t===window)return"[Window]";if("undefined"!=typeof document&&t===document)return"[Document]";if(Mn(t))return"[VueViewModel]";if(xn(n=t)&&"nativeEvent"in n&&"preventDefault"in n&&"stopPropagation"in n)return"[SyntheticEvent]";if("number"==typeof t&&t!=t)return"[NaN]";if("function"==typeof t)return`[Function: ${kr(t)}]`;if("symbol"==typeof t)return`[${String(t)}]`;if("bigint"==typeof t)return`[BigInt: ${String(t)}]`;const r=function(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}(t);return/^HTML(\w*)Element$/.test(r)?`[HTMLElement: ${r}]`:`[object ${r}]`}catch(e){return`**non-serializable** (${e})`}var n}(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;const c="number"==typeof t.__sentry_override_normalization_depth__?t.__sentry_override_normalization_depth__:n;if(0===c)return a.replace("object ","");if(s(t))return"[Circular ~]";const l=t;if(l&&"function"==typeof l.toJSON)try{return wo("",l.toJSON(),c-1,r,o)}catch(e){}const u=Array.isArray(t)?[]:{};let d=0;const p=hr(t);for(const e in p){if(!Object.prototype.hasOwnProperty.call(p,e))continue;if(d>=r){u[e]="[MaxProperties ~]";break}const t=p[e];u[e]=wo(e,t,c-1,r,o),d++}return i(t),u}const ko=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function Eo(...e){let t="",n=!1;for(let r=e.length-1;r>=-1&&!n;r--){const o=r>=0?e[r]:"/";o&&(t=`${o}/${t}`,n="/"===o.charAt(0))}return t=function(e,t){let n=0;for(let t=e.length-1;t>=0;t--){const r=e[t];"."===r?e.splice(t,1):".."===r?(e.splice(t,1),n++):n&&(e.splice(t,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}(t.split("/").filter((e=>!!e)),!n).join("/"),(n?"/":"")+t||"."}function To(e){let t=0;for(;t<e.length&&""===e[t];t++);let n=e.length-1;for(;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}function xo(e,t){let n=function(e){const t=e.length>1024?`<truncated>${e.slice(-1024)}`:e,n=ko.exec(t);return n?n.slice(1):[]}(e)[2];return t&&n.slice(-1*t.length)===t&&(n=n.slice(0,n.length-t.length)),n}var Io;function Co(e){return new Ao((t=>{t(e)}))}function Ro(e){return new Ao(((t,n)=>{n(e)}))}!function(e){e[e.PENDING=0]="PENDING";e[e.RESOLVED=1]="RESOLVED";e[e.REJECTED=2]="REJECTED"}(Io||(Io={}));class Ao{constructor(e){Ao.prototype.__init.call(this),Ao.prototype.__init2.call(this),Ao.prototype.__init3.call(this),Ao.prototype.__init4.call(this),this._state=Io.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(e){this._reject(e)}}then(e,t){return new Ao(((n,r)=>{this._handlers.push([!1,t=>{if(e)try{n(e(t))}catch(e){r(e)}else n(t)},e=>{if(t)try{n(t(e))}catch(e){r(e)}else r(e)}]),this._executeHandlers()}))}catch(e){return this.then((e=>e),e)}finally(e){return new Ao(((t,n)=>{let r,o;return this.then((t=>{o=!1,r=t,e&&e()}),(t=>{o=!0,r=t,e&&e()})).then((()=>{o?n(r):t(r)}))}))}__init(){this._resolve=e=>{this._setResult(Io.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(Io.REJECTED,e)}}__init3(){this._setResult=(e,t)=>{this._state===Io.PENDING&&(Rn(t)?t.then(this._resolve,this._reject):(this._state=e,this._value=t,this._executeHandlers()))}}__init4(){this._executeHandlers=()=>{if(this._state===Io.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach((e=>{e[0]||(this._state===Io.RESOLVED&&e[1](this._value),this._state===Io.REJECTED&&e[2](this._value),e[0]=!0)}))}}}function Oo(e){const t=[];function n(e){return t.splice(t.indexOf(e),1)[0]}return{$:t,add:function(r){if(!(void 0===e||t.length<e))return Ro(new cr("Not adding Promise because buffer limit was reached."));const o=r();return-1===t.indexOf(o)&&t.push(o),o.then((()=>n(o))).then(null,(()=>n(o).then(null,(()=>{})))),o},drain:function(e){return new Ao(((n,r)=>{let o=t.length;if(!o)return n(!0);const s=setTimeout((()=>{e&&e>0&&n(!1)}),e);t.forEach((e=>{Co(e).then((()=>{--o||(clearTimeout(s),n(!0))}),r)}))}))}}}function Mo(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}function No(e){return e.split(/[\?#]/,1)[0]}function Lo(e){return e.split(/\\?\//).filter((e=>e.length>0&&","!==e)).length}const Do={ip:!1,request:!0,transaction:!0,user:!0},$o=["cookies","data","headers","method","query_string","url"],Po=["id","username","email"];function Fo(e,t={}){const n=e.method&&e.method.toUpperCase();let r="",o="url";t.customRoute||e.route?(r=t.customRoute||`${e.baseUrl||""}${e.route&&e.route.path}`,o="route"):(e.originalUrl||e.url)&&(r=No(e.originalUrl||e.url||""));let s="";return t.method&&n&&(s+=n),t.method&&t.path&&(s+=" "),t.path&&r&&(s+=r),[s,o]}function jo(e,t){const{include:n=$o,deps:r}=t||{},o={},s=e.headers||{},i=e.method,a=s.host||e.hostname||e.host||"<no host>",c="https"===e.protocol||e.socket&&e.socket.encrypted?"https":"http",l=e.originalUrl||e.url||"",u=l.startsWith(c)?l:`${c}://${a}${l}`;return n.forEach((t=>{switch(t){case"headers":o.headers=s,n.includes("cookies")||delete o.headers.cookie;break;case"method":o.method=i;break;case"url":o.url=u;break;case"cookies":o.cookies=e.cookies||s.cookie&&function(e){const t={};let n=0;for(;n<e.length;){const r=e.indexOf("=",n);if(-1===r)break;let o=e.indexOf(";",n);if(-1===o)o=e.length;else if(o<r){n=e.lastIndexOf(";",r-1)+1;continue}const s=e.slice(n,r).trim();if(void 0===t[s]){let n=e.slice(r+1,o).trim();34===n.charCodeAt(0)&&(n=n.slice(1,-1));try{t[s]=-1!==n.indexOf("%")?decodeURIComponent(n):n}catch(e){t[s]=n}}n=o+1}return t}(s.cookie)||{};break;case"query_string":o.query_string=function(e,t){let n=e.originalUrl||e.url||"";if(!n)return;n.startsWith("/")&&(n=`http://dogs.are.great${n}`);try{return e.query||"undefined"!=typeof URL&&new URL(n).search.slice(1)||t&&t.url&&t.url.parse(n).query||void 0}catch(e){return}}(e,r);break;case"data":if("GET"===i||"HEAD"===i)break;void 0!==e.body&&(o.data=kn(e.body)?e.body:JSON.stringify(bo(e.body)));break;default:({}).hasOwnProperty.call(e,t)&&(o[t]=e[t])}})),o}function Uo(e,t,n){const r={...Do,...n&&n.include};if(r.request){const o=Array.isArray(r.request)?jo(t,{include:r.request,deps:n&&n.deps}):jo(t,{deps:n&&n.deps});e.request={...e.request,...o}}if(r.user){const n=t.user&&xn(t.user)?function(e,t){const n={};return(Array.isArray(t)?t:Po).forEach((t=>{e&&t in e&&(n[t]=e[t])})),n}(t.user,r.user):{};Object.keys(n).length&&(e.user={...e.user,...n})}if(r.ip){const n=t.ip||t.socket&&t.socket.remoteAddress;n&&(e.user={...e.user,ip_address:n})}return r.transaction&&!e.transaction&&(e.transaction=function(e,t){switch(t){case"path":return Fo(e,{path:!0})[0];case"handler":return e.route&&e.route.stack&&e.route.stack[0]&&e.route.stack[0].name||"<anonymous>";default:return Fo(e,{path:!0,method:!0,customRoute:e._reconstructedRoute?e._reconstructedRoute:void 0})[0]}}(t,r.transaction)),e}const Bo=["fatal","error","warning","log","info","debug"];function Ho(e){return"warn"===e?"warning":Bo.includes(e)?e:"log"}const zo=1e3;function qo(){return Date.now()/zo}const Wo=function(){const{performance:e}=Hn;if(!e||!e.now)return qo;const t=Date.now()-e.now(),n=null==e.timeOrigin?t:e.timeOrigin;return()=>(n+e.now())/zo}(),Go=(()=>{const{performance:e}=Hn;if(!e||!e.now)return;const t=36e5,n=e.now(),r=Date.now(),o=e.timeOrigin?Math.abs(e.timeOrigin+n-r):t,s=o<t,i=e.timing&&e.timing.navigationStart,a="number"==typeof i?Math.abs(i+n-r):t;return s||a<t?o<=a?e.timeOrigin:i:r})(),Vo="baggage",Yo="sentry-",Ko=/^sentry-/,Xo=8192;function Jo(e){if(!kn(e)&&!Array.isArray(e))return;let t={};if(Array.isArray(e))t=e.reduce(((e,t)=>{const n=Zo(t);for(const t of Object.keys(n))e[t]=n[t];return e}),{});else{if(!e)return;t=Zo(e)}const n=Object.entries(t).reduce(((e,[t,n])=>{if(t.match(Ko)){e[t.slice(Yo.length)]=n}return e}),{});return Object.keys(n).length>0?n:void 0}function Qo(e){if(!e)return;return function(e){if(0===Object.keys(e).length)return;return Object.entries(e).reduce(((e,[t,n],r)=>{const o=`${encodeURIComponent(t)}=${encodeURIComponent(n)}`,s=0===r?o:`${e},${o}`;return s.length>Xo?(Qn&&nr.warn(`Not adding key: ${t} with val: ${n} to baggage header due to exceeding baggage size limits.`),e):s}),"")}(Object.entries(e).reduce(((e,[t,n])=>(n&&(e[`${Yo}${t}`]=n),e)),{}))}function Zo(e){return e.split(",").map((e=>e.split("=").map((e=>decodeURIComponent(e.trim()))))).reduce(((e,[t,n])=>(e[t]=n,e)),{})}const es=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function ts(e){if(!e)return;const t=e.match(es);if(!t)return;let n;return"1"===t[3]?n=!0:"0"===t[3]&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}function ns(e,t){const n=ts(e),r=Jo(t),{traceId:o,parentSpanId:s,parentSampled:i}=n||{};return n?{traceId:o||Or(),parentSpanId:s||Or().substring(16),spanId:Or().substring(16),sampled:i,dsc:r||{}}:{traceId:o||Or(),spanId:Or().substring(16)}}function rs(e=Or(),t=Or().substring(16),n){let r="";return void 0!==n&&(r=n?"-1":"-0"),`${e}-${t}${r}`}function os(e,t=[]){return[e,t]}function ss(e,t){const[n,r]=e;return[n,[...r,t]]}function is(e,t){const n=e[1];for(const e of n){if(t(e,e[0].type))return!0}return!1}function as(e,t){return(t||new TextEncoder).encode(e)}function cs(e,t){const[n,r]=e;let o=JSON.stringify(n);function s(e){"string"==typeof o?o="string"==typeof e?o+e:[as(o,t),e]:o.push("string"==typeof e?as(e,t):e)}for(const e of r){const[t,n]=e;if(s(`\n${JSON.stringify(t)}\n`),"string"==typeof n||n instanceof Uint8Array)s(n);else{let e;try{e=JSON.stringify(n)}catch(t){e=JSON.stringify(bo(n))}s(e)}}return"string"==typeof o?o:function(e){const t=e.reduce(((e,t)=>e+t.length),0),n=new Uint8Array(t);let r=0;for(const t of e)n.set(t,r),r+=t.length;return n}(o)}function ls(e,t){const n="string"==typeof e.data?as(e.data,t):e.data;return[gr({type:"attachment",length:n.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),n]}const us={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket"};function ds(e){return us[e]}function ps(e){if(!e||!e.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function hs(e,t,n,r){const o=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:or(r)},...o&&{trace:gr({...o})}}}const fs=6e4;function ms(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return 1e3*n;const r=Date.parse(`${e}`);return isNaN(r)?fs:r-t}function gs(e,t,n=Date.now()){return function(e,t){return e[t]||e.all||0}(e,t)>n}function ys(e,{statusCode:t,headers:n},r=Date.now()){const o={...e},s=n&&n["x-sentry-rate-limits"],i=n&&n["retry-after"];if(s)for(const e of s.trim().split(",")){const[t,n,,,s]=e.split(":",5),i=parseInt(t,10),a=1e3*(isNaN(i)?60:i);if(n)for(const e of n.split(";"))"metric_bucket"===e&&s&&!s.split(";").includes("custom")||(o[e]=r+a);else o.all=r+a}else i?o.all=r+ms(i,r):429===t&&(o.all=r+6e4);return o}function _s(e,t){const n={type:t.name||t.constructor.name,value:t.message},r=function(e,t){return e(t.stack||"",1)}(e,t);return r.length&&(n.stacktrace={frames:r}),n}function vs(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],s=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=s(n)):"call"!==o&&"optionalCall"!==o||(n=s(((...e)=>n.call(t,...e))),t=void 0)}return n}const bs="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,Ss="production";function ws(){return qn("globalEventProcessors",(()=>[]))}function ks(e){ws().push(e)}function Es(e,t,n,r=0){return new Ao(((o,s)=>{const i=e[r];if(null===t||"function"!=typeof i)o(t);else{const a=i({...t},n);bs&&i.id&&null===a&&nr.log(`Event processor "${i.id}" dropped event`),Rn(a)?a.then((t=>Es(e,t,n,r+1).then(o))).then(null,s):Es(e,a,n,r+1).then(o).then(null,s)}}))}function Ts(e){const t=Wo(),n={sid:Or(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(e){return gr({sid:`${e.sid}`,init:e.init,started:new Date(1e3*e.started).toISOString(),timestamp:new Date(1e3*e.timestamp).toISOString(),status:e.status,errors:e.errors,did:"number"==typeof e.did||"string"==typeof e.did?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}(n)};return e&&xs(n,e),n}function xs(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||Wo(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:Or()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{const t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}function Is(e,t){let n={};t?n={status:t}:"ok"===e.status&&(n={status:"exited"}),xs(e,n)}const Cs=1;function Rs(e){const{spanId:t,traceId:n}=e.spanContext(),{data:r,op:o,parent_span_id:s,status:i,tags:a,origin:c}=Ns(e);return gr({data:r,op:o,parent_span_id:s,span_id:t,status:i,tags:a,trace_id:n,origin:c})}function As(e){const{traceId:t,spanId:n}=e.spanContext();return rs(t,n,Ls(e))}function Os(e){return"number"==typeof e?Ms(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?Ms(e.getTime()):Wo()}function Ms(e){return e>9999999999?e/1e3:e}function Ns(e){return function(e){return"function"==typeof e.getSpanJSON}(e)?e.getSpanJSON():"function"==typeof e.toJSON?e.toJSON():{}}function Ls(e){const{traceFlags:t}=e.spanContext();return Boolean(t&Cs)}function Ds(e,t,n,r,o,s){const{normalizeDepth:i=3,normalizeMaxBreadth:a=1e3}=e,c={...t,event_id:t.event_id||n.event_id||Or(),timestamp:t.timestamp||qo()},l=n.integrations||e.integrations.map((e=>e.name));!function(e,t){const{environment:n,release:r,dist:o,maxValueLength:s=250}=t;"environment"in e||(e.environment="environment"in t?n:Ss);void 0===e.release&&void 0!==r&&(e.release=r);void 0===e.dist&&void 0!==o&&(e.dist=o);e.message&&(e.message=Nn(e.message,s));const i=e.exception&&e.exception.values&&e.exception.values[0];i&&i.value&&(i.value=Nn(i.value,s));const a=e.request;a&&a.url&&(a.url=Nn(a.url,s))}(c,e),function(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}(c,l),void 0===t.type&&function(e,t){const n=Hn._sentryDebugIds;if(!n)return;let r;const o=$s.get(t);o?r=o:(r=new Map,$s.set(t,r));const s=Object.keys(n).reduce(((e,o)=>{let s;const i=r.get(o);i?s=i:(s=t(o),r.set(o,s));for(let t=s.length-1;t>=0;t--){const r=s[t];if(r.filename){e[r.filename]=n[o];break}}return e}),{});try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.filename&&(e.debug_id=s[e.filename])}))}))}catch(e){}}(c,e.stackParser);const u=function(e,t){if(!t)return e;const n=e?e.clone():new oi;return n.update(t),n}(r,n.captureContext);n.mechanism&&Dr(c,n.mechanism);const d=o&&o.getEventProcessors?o.getEventProcessors():[],p=function(){ri||(ri=new oi);return ri}().getScopeData();if(s){ti(p,s.getScopeData())}if(u){ti(p,u.getScopeData())}const h=[...n.attachments||[],...p.attachments];h.length&&(n.attachments=h),ei(c,p);return Es([...d,...ws(),...p.eventProcessors],c,n).then((e=>(e&&function(e){const t={};try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.debug_id&&(e.abs_path?t[e.abs_path]=e.debug_id:e.filename&&(t[e.filename]=e.debug_id),delete e.debug_id)}))}))}catch(e){}if(0===Object.keys(t).length)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.keys(t).forEach((e=>{n.push({type:"sourcemap",code_file:e,debug_id:t[e]})}))}(e),"number"==typeof i&&i>0?function(e,t,n){if(!e)return null;const r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map((e=>({...e,...e.data&&{data:bo(e.data,t,n)}})))},...e.user&&{user:bo(e.user,t,n)},...e.contexts&&{contexts:bo(e.contexts,t,n)},...e.extra&&{extra:bo(e.extra,t,n)}};e.contexts&&e.contexts.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=bo(e.contexts.trace.data,t,n)));e.spans&&(r.spans=e.spans.map((e=>{const r=Ns(e).data;return r&&(e.data=bo(r,t,n)),e})));return r}(e,i,a):e)))}const $s=new WeakMap;function Ps(e){if(e)return function(e){return e instanceof oi||"function"==typeof e}(e)||function(e){return Object.keys(e).some((e=>Fs.includes(e)))}(e)?{captureContext:e}:e}const Fs=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function js(e,t){return pi().captureException(e,Ps(t))}function Us(e,t){const n="string"==typeof t?t:void 0,r="string"!=typeof t?{captureContext:t}:void 0;return pi().captureMessage(e,n,r)}function Bs(e,t){return pi().captureEvent(e,t)}function Hs(e,t){pi().addBreadcrumb(e,t)}function zs(e,t){pi().setContext(e,t)}function qs(...e){const t=pi();if(2===e.length){const[n,r]=e;return n?t.withScope((()=>(t.getStackTop().scope=n,r(n)))):t.withScope(r)}return t.withScope(e[0])}function Ws(){return pi().getClient()}function Gs(){return pi().getScope()}function Vs(e){const t=Ws(),n=hi(),r=Gs(),{release:o,environment:s=Ss}=t&&t.getOptions()||{},{userAgent:i}=Hn.navigator||{},a=Ts({release:o,environment:s,user:r.getUser()||n.getUser(),...i&&{userAgent:i},...e}),c=n.getSession();return c&&"ok"===c.status&&xs(c,{status:"exited"}),Ys(),n.setSession(a),r.setSession(a),a}function Ys(){const e=hi(),t=Gs(),n=t.getSession()||e.getSession();n&&Is(n),Ks(),e.setSession(),t.setSession()}function Ks(){const e=hi(),t=Gs(),n=Ws(),r=t.getSession()||e.getSession();r&&n&&n.captureSession&&n.captureSession(r)}function Xs(e=!1){e?Ys():Ks()}function Js(e){return e.transaction}function Qs(e,t,n){const r=t.getOptions(),{publicKey:o}=t.getDsn()||{},{segment:s}=n&&n.getUser()||{},i=gr({environment:r.environment||Ss,release:r.release,user_segment:s,public_key:o,trace_id:e});return t.emit&&t.emit("createDsc",i),i}function Zs(e){const t=Ws();if(!t)return{};const n=Qs(Ns(e).trace_id||"",t,Gs()),r=Js(e);if(!r)return n;const o=r&&r._frozenDynamicSamplingContext;if(o)return o;const{sampleRate:s,source:i}=r.metadata;null!=s&&(n.sample_rate=`${s}`);const a=Ns(r);return i&&"url"!==i&&(n.transaction=a.description),n.sampled=String(Ls(r)),t.emit&&t.emit("createDsc",n),n}function ei(e,t){const{fingerprint:n,span:r,breadcrumbs:o,sdkProcessingMetadata:s}=t;!function(e,t){const{extra:n,tags:r,user:o,contexts:s,level:i,transactionName:a}=t,c=gr(n);c&&Object.keys(c).length&&(e.extra={...c,...e.extra});const l=gr(r);l&&Object.keys(l).length&&(e.tags={...l,...e.tags});const u=gr(o);u&&Object.keys(u).length&&(e.user={...u,...e.user});const d=gr(s);d&&Object.keys(d).length&&(e.contexts={...d,...e.contexts});i&&(e.level=i);a&&(e.transaction=a)}(e,t),r&&function(e,t){e.contexts={trace:Rs(t),...e.contexts};const n=Js(t);if(n){e.sdkProcessingMetadata={dynamicSamplingContext:Zs(t),...e.sdkProcessingMetadata};const r=Ns(n).description;r&&(e.tags={transaction:r,...e.tags})}}(e,r),function(e,t){e.fingerprint=e.fingerprint?Pr(e.fingerprint):[],t&&(e.fingerprint=e.fingerprint.concat(t));e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}(e,n),function(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}(e,o),function(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}(e,s)}function ti(e,t){const{extra:n,tags:r,user:o,contexts:s,level:i,sdkProcessingMetadata:a,breadcrumbs:c,fingerprint:l,eventProcessors:u,attachments:d,propagationContext:p,transactionName:h,span:f}=t;ni(e,"extra",n),ni(e,"tags",r),ni(e,"user",o),ni(e,"contexts",s),ni(e,"sdkProcessingMetadata",a),i&&(e.level=i),h&&(e.transactionName=h),f&&(e.span=f),c.length&&(e.breadcrumbs=[...e.breadcrumbs,...c]),l.length&&(e.fingerprint=[...e.fingerprint,...l]),u.length&&(e.eventProcessors=[...e.eventProcessors,...u]),d.length&&(e.attachments=[...e.attachments,...d]),e.propagationContext={...e.propagationContext,...p}}function ni(e,t,n){if(n&&Object.keys(n).length){e[t]={...e[t]};for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[t][r]=n[r])}}let ri;class oi{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=si()}static clone(e){return e?e.clone():new oi}clone(){const e=new oi;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},e._user=this._user,e._level=this._level,e._span=this._span,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._requestSession=this._requestSession,e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e}setClient(e){this._client=e}getClient(){return this._client}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,segment:void 0,username:void 0},this._session&&xs(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSpan(e){return this._span=e,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const e=this._span;return e&&e.transaction}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const t="function"==typeof e?e(this):e;if(t instanceof oi){const e=t.getScopeData();this._tags={...this._tags,...e.tags},this._extra={...this._extra,...e.extra},this._contexts={...this._contexts,...e.contexts},e.user&&Object.keys(e.user).length&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint.length&&(this._fingerprint=e.fingerprint),t.getRequestSession()&&(this._requestSession=t.getRequestSession()),e.propagationContext&&(this._propagationContext=e.propagationContext)}else if(xn(t)){const t=e;this._tags={...this._tags,...t.tags},this._extra={...this._extra,...t.extra},this._contexts={...this._contexts,...t.contexts},t.user&&(this._user=t.user),t.level&&(this._level=t.level),t.fingerprint&&(this._fingerprint=t.fingerprint),t.requestSession&&(this._requestSession=t.requestSession),t.propagationContext&&(this._propagationContext=t.propagationContext)}return this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=si(),this}addBreadcrumb(e,t){const n="number"==typeof t?t:100;if(n<=0)return this;const r={timestamp:qo(),...e},o=this._breadcrumbs;return o.push(r),this._breadcrumbs=o.length>n?o.slice(-n):o,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}getAttachments(){return this.getScopeData().attachments}clearAttachments(){return this._attachments=[],this}getScopeData(){const{_breadcrumbs:e,_attachments:t,_contexts:n,_tags:r,_extra:o,_user:s,_level:i,_fingerprint:a,_eventProcessors:c,_propagationContext:l,_sdkProcessingMetadata:u,_transactionName:d,_span:p}=this;return{breadcrumbs:e,attachments:t,contexts:n,tags:r,extra:o,user:s,level:i,fingerprint:a||[],eventProcessors:c,propagationContext:l,sdkProcessingMetadata:u,transactionName:d,span:p}}applyToEvent(e,t={},n=[]){ei(e,this.getScopeData());return Es([...n,...ws(),...this._eventProcessors],e,t)}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,t){const n=t&&t.event_id?t.event_id:Or();if(!this._client)return nr.warn("No client configured on scope - will not capture exception!"),n;const r=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:r,...t,event_id:n},this),n}captureMessage(e,t,n){const r=n&&n.event_id?n.event_id:Or();if(!this._client)return nr.warn("No client configured on scope - will not capture message!"),r;const o=new Error(e);return this._client.captureMessage(e,t,{originalException:e,syntheticException:o,...n,event_id:r},this),r}captureEvent(e,t){const n=t&&t.event_id?t.event_id:Or();return this._client?(this._client.captureEvent(e,{...t,event_id:n},this),n):(nr.warn("No client configured on scope - will not capture event!"),n)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((e=>{e(this)})),this._notifyingListeners=!1)}}function si(){return{traceId:Or(),spanId:Or().substring(16)}}const ii="7.116.0",ai=parseFloat(ii),ci=100;class li{constructor(e,t,n,r=ai){let o,s;this._version=r,t?o=t:(o=new oi,o.setClient(e)),n?s=n:(s=new oi,s.setClient(e)),this._stack=[{scope:o}],e&&this.bindClient(e),this._isolationScope=s}isOlderThan(e){return this._version<e}bindClient(e){const t=this.getStackTop();t.client=e,t.scope.setClient(e),e&&e.setupIntegrations&&e.setupIntegrations()}pushScope(){const e=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:e}),e}popScope(){return!(this.getStack().length<=1)&&!!this.getStack().pop()}withScope(e){const t=this.pushScope();let n;try{n=e(t)}catch(e){throw this.popScope(),e}return Rn(n)?n.then((e=>(this.popScope(),e)),(e=>{throw this.popScope(),e})):(this.popScope(),n)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(e,t){const n=this._lastEventId=t&&t.event_id?t.event_id:Or(),r=new Error("Sentry syntheticException");return this.getScope().captureException(e,{originalException:e,syntheticException:r,...t,event_id:n}),n}captureMessage(e,t,n){const r=this._lastEventId=n&&n.event_id?n.event_id:Or(),o=new Error(e);return this.getScope().captureMessage(e,t,{originalException:e,syntheticException:o,...n,event_id:r}),r}captureEvent(e,t){const n=t&&t.event_id?t.event_id:Or();return e.type||(this._lastEventId=n),this.getScope().captureEvent(e,{...t,event_id:n}),n}lastEventId(){return this._lastEventId}addBreadcrumb(e,t){const{scope:n,client:r}=this.getStackTop();if(!r)return;const{beforeBreadcrumb:o=null,maxBreadcrumbs:s=ci}=r.getOptions&&r.getOptions()||{};if(s<=0)return;const i={timestamp:qo(),...e},a=o?tr((()=>o(i,t))):i;null!==a&&(r.emit&&r.emit("beforeAddBreadcrumb",a,t),n.addBreadcrumb(a,s))}setUser(e){this.getScope().setUser(e),this.getIsolationScope().setUser(e)}setTags(e){this.getScope().setTags(e),this.getIsolationScope().setTags(e)}setExtras(e){this.getScope().setExtras(e),this.getIsolationScope().setExtras(e)}setTag(e,t){this.getScope().setTag(e,t),this.getIsolationScope().setTag(e,t)}setExtra(e,t){this.getScope().setExtra(e,t),this.getIsolationScope().setExtra(e,t)}setContext(e,t){this.getScope().setContext(e,t),this.getIsolationScope().setContext(e,t)}configureScope(e){const{scope:t,client:n}=this.getStackTop();n&&e(t)}run(e){const t=di(this);try{e(this)}finally{di(t)}}getIntegration(e){const t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch(t){return bs&&nr.warn(`Cannot retrieve integration ${e.id} from the current Hub`),null}}startTransaction(e,t){const n=this._callExtensionMethod("startTransaction",e,t);if(bs&&!n){this.getClient()?nr.warn("Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':\nSentry.addTracingExtensions();\nSentry.init({...});\n"):nr.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")}return n}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(e=!1){if(e)return this.endSession();this._sendSessionUpdate()}endSession(){const e=this.getStackTop().scope,t=e.getSession();t&&Is(t),this._sendSessionUpdate(),e.setSession()}startSession(e){const{scope:t,client:n}=this.getStackTop(),{release:r,environment:o=Ss}=n&&n.getOptions()||{},{userAgent:s}=Hn.navigator||{},i=Ts({release:r,environment:o,user:t.getUser(),...s&&{userAgent:s},...e}),a=t.getSession&&t.getSession();return a&&"ok"===a.status&&xs(a,{status:"exited"}),this.endSession(),t.setSession(i),i}shouldSendDefaultPii(){const e=this.getClient(),t=e&&e.getOptions();return Boolean(t&&t.sendDefaultPii)}_sendSessionUpdate(){const{scope:e,client:t}=this.getStackTop(),n=e.getSession();n&&t&&t.captureSession&&t.captureSession(n)}_callExtensionMethod(e,...t){const n=ui().__SENTRY__;if(n&&n.extensions&&"function"==typeof n.extensions[e])return n.extensions[e].apply(this,t);bs&&nr.warn(`Extension method ${e} couldn't be found, doing nothing.`)}}function ui(){return Hn.__SENTRY__=Hn.__SENTRY__||{extensions:{},hub:void 0},Hn}function di(e){const t=ui(),n=mi(t);return gi(t,e),n}function pi(){const e=ui();if(e.__SENTRY__&&e.__SENTRY__.acs){const t=e.__SENTRY__.acs.getCurrentHub();if(t)return t}return function(e=ui()){t=e,t&&t.__SENTRY__&&t.__SENTRY__.hub&&!mi(e).isOlderThan(ai)||gi(e,new li);var t;return mi(e)}(e)}function hi(){return pi().getIsolationScope()}function fi(e,t={}){const n=ui();return n.__SENTRY__&&n.__SENTRY__.acs?n.__SENTRY__.acs.runWithAsyncContext(e,t):e()}function mi(e){return qn("hub",(()=>new li),e)}function gi(e,t){if(!e)return!1;return(e.__SENTRY__=e.__SENTRY__||{}).hub=t,!0}function yi(e){return(e||pi()).getScope().getTransaction()}const _i=ts;let vi=!1;function bi(){const e=yi();if(e){const t="internal_error";bs&&nr.log(`[Tracing] Transaction: ${t} -> Global error occured`),e.setStatus(t)}}var Si;function wi(e){if(e<400&&e>=100)return"ok";if(e>=400&&e<500)switch(e){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if(e>=500&&e<600)switch(e){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"}bi.tag="sentry_tracingErrorCallback",function(e){e.Ok="ok";e.DeadlineExceeded="deadline_exceeded";e.Unauthenticated="unauthenticated";e.PermissionDenied="permission_denied";e.NotFound="not_found";e.ResourceExhausted="resource_exhausted";e.InvalidArgument="invalid_argument";e.Unimplemented="unimplemented";e.Unavailable="unavailable";e.InternalError="internal_error";e.UnknownError="unknown_error";e.Cancelled="cancelled";e.AlreadyExists="already_exists";e.FailedPrecondition="failed_precondition";e.Aborted="aborted";e.OutOfRange="out_of_range";e.DataLoss="data_loss"}(Si||(Si={}));const ki=wi;function Ei(e,t){e.setTag("http.status_code",String(t)),e.setData("http.response.status_code",t);const n=wi(t);"unknown_error"!==n&&e.setStatus(n)}function Ti(e,t,n=(()=>{})){let r;try{r=e()}catch(e){throw t(e),n(),e}return function(e,t,n){if(Rn(e))return e.then((e=>(n(),e)),(e=>{throw t(e),n(),e}));return n(),e}(r,t,n)}function xi(e){if("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;const t=Ws(),n=e||t&&t.getOptions();return!!n&&(n.enableTracing||"tracesSampleRate"in n||"tracesSampler"in n)}function Ii(e,t){const n=Oi(e);return fi((()=>qs(e.scope,(r=>{const o=pi(),s=r.getSpan(),i=e.onlyIfParent&&!s?void 0:Ai(o,{parentSpan:s,spanContext:n,forceTransaction:e.forceTransaction,scope:r});return Ti((()=>t(i)),(()=>{if(i){const{status:e}=Ns(i);e&&"ok"!==e||i.setStatus("internal_error")}}),(()=>i&&i.end()))}))))}function Ci(e){if(!xi())return;const t=Oi(e),n=pi(),r=e.scope?e.scope.getSpan():Ri();if(e.onlyIfParent&&!r)return;const o=(e.scope||Gs()).clone();return Ai(n,{parentSpan:r,spanContext:t,forceTransaction:e.forceTransaction,scope:o})}function Ri(){return Gs().getSpan()}function Ai(e,{parentSpan:t,spanContext:n,forceTransaction:r,scope:o}){if(!xi())return;const s=hi();let i;if(t&&!r)i=t.startChild(n);else if(t){const r=Zs(t),{traceId:o,spanId:s}=t.spanContext(),a=Ls(t);i=e.startTransaction({traceId:o,parentSpanId:s,parentSampled:a,...n,metadata:{dynamicSamplingContext:r,...n.metadata}})}else{const{traceId:t,dsc:r,parentSpanId:a,sampled:c}={...s.getPropagationContext(),...o.getPropagationContext()};i=e.startTransaction({traceId:t,parentSpanId:a,parentSampled:c,...n,metadata:{dynamicSamplingContext:r,...n.metadata}})}return o.setSpan(i),function(e,t,n){e&&(ur(e,Ni,n),ur(e,Mi,t))}(i,o,s),i}function Oi(e){if(e.startTime){const t={...e};return t.startTimestamp=Os(e.startTime),delete t.startTime,t}return e}const Mi="_sentryScope",Ni="_sentryIsolationScope";let Li;function Di(e){return Li?Li.get(e):void 0}function $i(e){const t=Di(e);if(!t)return;const n={};for(const[,[e,r]]of t)n[e]||(n[e]=[]),n[e].push(gr(r));return n}const Pi="sentry.source",Fi="sentry.sample_rate",ji="sentry.op",Ui="sentry.origin";class Bi{constructor(e=1e3){this._maxlen=e,this.spans=[]}add(e){this.spans.length>this._maxlen?e.spanRecorder=void 0:this.spans.push(e)}}class Hi{constructor(e={}){this._traceId=e.traceId||Or(),this._spanId=e.spanId||Or().substring(16),this._startTime=e.startTimestamp||Wo(),this.tags=e.tags?{...e.tags}:{},this.data=e.data?{...e.data}:{},this.instrumenter=e.instrumenter||"sentry",this._attributes={},this.setAttributes({[Ui]:e.origin||"manual",[ji]:e.op,...e.attributes}),this._name=e.name||e.description,e.parentSpanId&&(this._parentSpanId=e.parentSpanId),"sampled"in e&&(this._sampled=e.sampled),e.status&&(this._status=e.status),e.endTimestamp&&(this._endTime=e.endTimestamp),void 0!==e.exclusiveTime&&(this._exclusiveTime=e.exclusiveTime),this._measurements=e.measurements?{...e.measurements}:{}}get name(){return this._name||""}set name(e){this.updateName(e)}get description(){return this._name}set description(e){this._name=e}get traceId(){return this._traceId}set traceId(e){this._traceId=e}get spanId(){return this._spanId}set spanId(e){this._spanId=e}set parentSpanId(e){this._parentSpanId=e}get parentSpanId(){return this._parentSpanId}get sampled(){return this._sampled}set sampled(e){this._sampled=e}get attributes(){return this._attributes}set attributes(e){this._attributes=e}get startTimestamp(){return this._startTime}set startTimestamp(e){this._startTime=e}get endTimestamp(){return this._endTime}set endTimestamp(e){this._endTime=e}get status(){return this._status}set status(e){this._status=e}get op(){return this._attributes[ji]}set op(e){this.setAttribute(ji,e)}get origin(){return this._attributes[Ui]}set origin(e){this.setAttribute(Ui,e)}spanContext(){const{_spanId:e,_traceId:t,_sampled:n}=this;return{spanId:e,traceId:t,traceFlags:n?Cs:0}}startChild(e){const t=new Hi({...e,parentSpanId:this._spanId,sampled:this._sampled,traceId:this._traceId});t.spanRecorder=this.spanRecorder,t.spanRecorder&&t.spanRecorder.add(t);const n=Js(this);if(t.transaction=n,bs&&n){const r=`[Tracing] Starting '${e&&e.op||"< unknown op >"}' span on transaction '${Ns(t).description||"< unknown name >"}' (${n.spanContext().spanId}).`;nr.log(r),this._logMessage=r}return t}setTag(e,t){return this.tags={...this.tags,[e]:t},this}setData(e,t){return this.data={...this.data,[e]:t},this}setAttribute(e,t){void 0===t?delete this._attributes[e]:this._attributes[e]=t}setAttributes(e){Object.keys(e).forEach((t=>this.setAttribute(t,e[t])))}setStatus(e){return this._status=e,this}setHttpStatus(e){return Ei(this,e),this}setName(e){this.updateName(e)}updateName(e){return this._name=e,this}isSuccess(){return"ok"===this._status}finish(e){return this.end(e)}end(e){if(this._endTime)return;const t=Js(this);if(bs&&t&&t.spanContext().spanId!==this._spanId){const e=this._logMessage;e&&nr.log(e.replace("Starting","Finishing"))}this._endTime=Os(e)}toTraceparent(){return As(this)}toContext(){return gr({data:this._getData(),description:this._name,endTimestamp:this._endTime,op:this.op,parentSpanId:this._parentSpanId,sampled:this._sampled,spanId:this._spanId,startTimestamp:this._startTime,status:this._status,tags:this.tags,traceId:this._traceId})}updateWithContext(e){return this.data=e.data||{},this._name=e.name||e.description,this._endTime=e.endTimestamp,this.op=e.op,this._parentSpanId=e.parentSpanId,this._sampled=e.sampled,this._spanId=e.spanId||this._spanId,this._startTime=e.startTimestamp||this._startTime,this._status=e.status,this.tags=e.tags||{},this._traceId=e.traceId||this._traceId,this}getTraceContext(){return Rs(this)}getSpanJSON(){return gr({data:this._getData(),description:this._name,op:this._attributes[ji],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:this._status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[Ui],_metrics_summary:$i(this),profile_id:this._attributes.profile_id,exclusive_time:this._exclusiveTime,measurements:Object.keys(this._measurements).length>0?this._measurements:void 0})}isRecording(){return!this._endTime&&!!this._sampled}toJSON(){return this.getSpanJSON()}_getData(){const{data:e,_attributes:t}=this,n=Object.keys(e).length>0,r=Object.keys(t).length>0;if(n||r)return n&&r?{...e,...t}:n?e:t}}class zi extends Hi{constructor(e,t){super(e),this._contexts={},this._hub=t||pi(),this._name=e.name||"",this._metadata={...e.metadata},this._trimEnd=e.trimEnd,this.transaction=this;const n=this._metadata.dynamicSamplingContext;n&&(this._frozenDynamicSamplingContext={...n})}get name(){return this._name}set name(e){this.setName(e)}get metadata(){return{source:"custom",spanMetadata:{},...this._metadata,...this._attributes[Pi]&&{source:this._attributes[Pi]},...this._attributes[Fi]&&{sampleRate:this._attributes[Fi]}}}set metadata(e){this._metadata=e}setName(e,t="custom"){this._name=e,this.setAttribute(Pi,t)}updateName(e){return this._name=e,this}initSpanRecorder(e=1e3){this.spanRecorder||(this.spanRecorder=new Bi(e)),this.spanRecorder.add(this)}setContext(e,t){null===t?delete this._contexts[e]:this._contexts[e]=t}setMeasurement(e,t,n=""){this._measurements[e]={value:t,unit:n}}setMetadata(e){this._metadata={...this._metadata,...e}}end(e){const t=Os(e),n=this._finishTransaction(t);if(n)return this._hub.captureEvent(n)}toContext(){return gr({...super.toContext(),name:this._name,trimEnd:this._trimEnd})}updateWithContext(e){return super.updateWithContext(e),this._name=e.name||"",this._trimEnd=e.trimEnd,this}getDynamicSamplingContext(){return Zs(this)}setHub(e){this._hub=e}getProfileId(){if(void 0!==this._contexts&&void 0!==this._contexts.profile)return this._contexts.profile.profile_id}_finishTransaction(e){if(void 0!==this._endTime)return;this._name||(bs&&nr.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>"),super.end(e);const t=this._hub.getClient();if(t&&t.emit&&t.emit("finishTransaction",this),!0!==this._sampled)return bs&&nr.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),void(t&&t.recordDroppedEvent("sample_rate","transaction"));const n=this.spanRecorder?this.spanRecorder.spans.filter((e=>e!==this&&Ns(e).timestamp)):[];if(this._trimEnd&&n.length>0){const e=n.map((e=>Ns(e).timestamp)).filter(Boolean);this._endTime=e.reduce(((e,t)=>e>t?e:t))}const{scope:r,isolationScope:o}={scope:(s=this)[Mi],isolationScope:s[Ni]};var s;const{metadata:i}=this,{source:a}=i,c={contexts:{...this._contexts,trace:Rs(this)},spans:n,start_timestamp:this._startTime,tags:this.tags,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{...i,capturedSpanScope:r,capturedSpanIsolationScope:o,...gr({dynamicSamplingContext:Zs(this)})},_metrics_summary:$i(this),...a&&{transaction_info:{source:a}}};return Object.keys(this._measurements).length>0&&(bs&&nr.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),c.measurements=this._measurements),bs&&nr.log(`[Tracing] Finishing ${this.op} transaction: ${this._name}.`),c}}const qi={idleTimeout:1e3,finalTimeout:3e4,heartbeatInterval:5e3},Wi=["heartbeatFailed","idleTimeout","documentHidden","finalTimeout","externalFinish","cancelled"];class Gi extends Bi{constructor(e,t,n,r){super(r),this._pushActivity=e,this._popActivity=t,this.transactionSpanId=n}add(e){if(e.spanContext().spanId!==this.transactionSpanId){const t=e.end;e.end=(...n)=>(this._popActivity(e.spanContext().spanId),t.apply(e,n)),void 0===Ns(e).timestamp&&this._pushActivity(e.spanContext().spanId)}super.add(e)}}class Vi extends zi{constructor(e,t,n=qi.idleTimeout,r=qi.finalTimeout,o=qi.heartbeatInterval,s=!1,i=!1){super(e,t),this._idleHub=t,this._idleTimeout=n,this._finalTimeout=r,this._heartbeatInterval=o,this._onScope=s,this.activities={},this._heartbeatCounter=0,this._finished=!1,this._idleTimeoutCanceledPermanently=!1,this._beforeFinishCallbacks=[],this._finishReason=Wi[4],this._autoFinishAllowed=!i,s&&(bs&&nr.log(`Setting idle transaction on scope. Span ID: ${this.spanContext().spanId}`),t.getScope().setSpan(this)),i||this._restartIdleTimeout(),setTimeout((()=>{this._finished||(this.setStatus("deadline_exceeded"),this._finishReason=Wi[3],this.end())}),this._finalTimeout)}end(e){const t=Os(e);if(this._finished=!0,this.activities={},"ui.action.click"===this.op&&this.setAttribute("finishReason",this._finishReason),this.spanRecorder){bs&&nr.log("[Tracing] finishing IdleTransaction",new Date(1e3*t).toISOString(),this.op);for(const e of this._beforeFinishCallbacks)e(this,t);this.spanRecorder.spans=this.spanRecorder.spans.filter((e=>{if(e.spanContext().spanId===this.spanContext().spanId)return!0;Ns(e).timestamp||(e.setStatus("cancelled"),e.end(t),bs&&nr.log("[Tracing] cancelling span since transaction ended early",JSON.stringify(e,void 0,2)));const{start_timestamp:n,timestamp:r}=Ns(e),o=n&&n<t,s=(this._finalTimeout+this._idleTimeout)/1e3,i=r&&n&&r-n<s;if(bs){const t=JSON.stringify(e,void 0,2);o?i||nr.log("[Tracing] discarding Span since it finished after Transaction final timeout",t):nr.log("[Tracing] discarding Span since it happened after Transaction was finished",t)}return o&&i})),bs&&nr.log("[Tracing] flushing IdleTransaction")}else bs&&nr.log("[Tracing] No active IdleTransaction");if(this._onScope){const e=this._idleHub.getScope();e.getTransaction()===this&&e.setSpan(void 0)}return super.end(e)}registerBeforeFinishCallback(e){this._beforeFinishCallbacks.push(e)}initSpanRecorder(e){if(!this.spanRecorder){const t=e=>{this._finished||this._pushActivity(e)},n=e=>{this._finished||this._popActivity(e)};this.spanRecorder=new Gi(t,n,this.spanContext().spanId,e),bs&&nr.log("Starting heartbeat"),this._pingHeartbeat()}this.spanRecorder.add(this)}cancelIdleTimeout(e,{restartOnChildSpanChange:t}={restartOnChildSpanChange:!0}){this._idleTimeoutCanceledPermanently=!1===t,this._idleTimeoutID&&(clearTimeout(this._idleTimeoutID),this._idleTimeoutID=void 0,0===Object.keys(this.activities).length&&this._idleTimeoutCanceledPermanently&&(this._finishReason=Wi[5],this.end(e)))}setFinishReason(e){this._finishReason=e}sendAutoFinishSignal(){this._autoFinishAllowed||(bs&&nr.log("[Tracing] Received finish signal for idle transaction."),this._restartIdleTimeout(),this._autoFinishAllowed=!0)}_restartIdleTimeout(e){this.cancelIdleTimeout(),this._idleTimeoutID=setTimeout((()=>{this._finished||0!==Object.keys(this.activities).length||(this._finishReason=Wi[1],this.end(e))}),this._idleTimeout)}_pushActivity(e){this.cancelIdleTimeout(void 0,{restartOnChildSpanChange:!this._idleTimeoutCanceledPermanently}),bs&&nr.log(`[Tracing] pushActivity: ${e}`),this.activities[e]=!0,bs&&nr.log("[Tracing] new activities count",Object.keys(this.activities).length)}_popActivity(e){if(this.activities[e]&&(bs&&nr.log(`[Tracing] popActivity ${e}`),delete this.activities[e],bs&&nr.log("[Tracing] new activities count",Object.keys(this.activities).length)),0===Object.keys(this.activities).length){const e=Wo();this._idleTimeoutCanceledPermanently?this._autoFinishAllowed&&(this._finishReason=Wi[5],this.end(e)):this._restartIdleTimeout(e+this._idleTimeout/1e3)}}_beat(){if(this._finished)return;const e=Object.keys(this.activities).join("");e===this._prevHeartbeatString?this._heartbeatCounter++:this._heartbeatCounter=1,this._prevHeartbeatString=e,this._heartbeatCounter>=3?this._autoFinishAllowed&&(bs&&nr.log("[Tracing] Transaction finished because of no change for 3 heart beats"),this.setStatus("deadline_exceeded"),this._finishReason=Wi[0],this.end()):this._pingHeartbeat()}_pingHeartbeat(){bs&&nr.log(`pinging Heartbeat -> current counter: ${this._heartbeatCounter}`),setTimeout((()=>{this._beat()}),this._heartbeatInterval)}}function Yi(e,t,n){if(!xi(t))return e.sampled=!1,e;if(void 0!==e.sampled)return e.setAttribute(Fi,Number(e.sampled)),e;let r;return"function"==typeof t.tracesSampler?(r=t.tracesSampler(n),e.setAttribute(Fi,Number(r))):void 0!==n.parentSampled?r=n.parentSampled:void 0!==t.tracesSampleRate?(r=t.tracesSampleRate,e.setAttribute(Fi,Number(r))):(r=1,e.setAttribute(Fi,r)),Ki(r)?r?(e.sampled=Math.random()<r,e.sampled?(bs&&nr.log(`[Tracing] starting ${e.op} transaction - ${Ns(e).description}`),e):(bs&&nr.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(r)})`),e)):(bs&&nr.log("[Tracing] Discarding transaction because "+("function"==typeof t.tracesSampler?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0")),e.sampled=!1,e):(bs&&nr.warn("[Tracing] Discarding transaction because of invalid sample rate."),e.sampled=!1,e)}function Ki(e){return An(e)||"number"!=typeof e&&"boolean"!=typeof e?(bs&&nr.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`),!1):!(e<0||e>1)||(bs&&nr.warn(`[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got ${e}.`),!1)}function Xi(){const e=this.getScope().getSpan();return e?{"sentry-trace":As(e)}:{}}function Ji(e,t){const n=this.getClient(),r=n&&n.getOptions()||{},o=r.instrumenter||"sentry",s=e.instrumenter||"sentry";o!==s&&(bs&&nr.error(`A transaction was started with instrumenter=\`${s}\`, but the SDK is configured with the \`${o}\` instrumenter.\nThe transaction will not be sampled. Please use the ${o} instrumentation to start transactions.`),e.sampled=!1);let i=new zi(e,this);return i=Yi(i,r,{name:e.name,parentSampled:e.parentSampled,transactionContext:e,attributes:{...e.data,...e.attributes},...t}),i.isRecording()&&i.initSpanRecorder(r._experiments&&r._experiments.maxSpans),n&&n.emit&&n.emit("startTransaction",i),i}function Qi(e,t,n,r,o,s,i,a=!1){const c=e.getClient(),l=c&&c.getOptions()||{};let u=new Vi(t,e,n,r,i,o,a);return u=Yi(u,l,{name:t.name,parentSampled:t.parentSampled,transactionContext:t,attributes:{...t.data,...t.attributes},...s}),u.isRecording()&&u.initSpanRecorder(l._experiments&&l._experiments.maxSpans),c&&c.emit&&c.emit("startTransaction",u),u}function Zi(){const e=ui();e.__SENTRY__&&(e.__SENTRY__.extensions=e.__SENTRY__.extensions||{},e.__SENTRY__.extensions.startTransaction||(e.__SENTRY__.extensions.startTransaction=Ji),e.__SENTRY__.extensions.traceHeaders||(e.__SENTRY__.extensions.traceHeaders=Xi),vi||(vi=!0,to(bi),oo(bi)))}function ea(e,t,n){const r=yi();r&&r.setMeasurement(e,t,n)}function ta(e,t,n,r){const o=ps(n),s=e.type&&"replay_event"!==e.type?e.type:"event";!function(e,t){t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]])}(e,n&&n.sdk);const i=hs(e,o,r,t);delete e.sdkProcessingMetadata;return os(i,[[{type:s},e]])}const na="7";function ra(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function oa(e,t){return n={sentry_key:e.publicKey,sentry_version:na,...t&&{sentry_client:`${t.name}/${t.version}`}},Object.keys(n).map((e=>`${encodeURIComponent(e)}=${encodeURIComponent(n[e])}`)).join("&");var n}function sa(e,t={}){const n="string"==typeof t?t:t.tunnel,r="string"!=typeof t&&t._metadata?t._metadata.sdk:void 0;return n||`${function(e){return`${ra(e)}${e.projectId}/envelope/`}(e)}?${oa(e,r)}`}const ia=[];function aa(e){const t=e.defaultIntegrations||[],n=e.integrations;let r;t.forEach((e=>{e.isDefaultInstance=!0})),r=Array.isArray(n)?[...t,...n]:"function"==typeof n?Pr(n(t)):t;const o=function(e){const t={};return e.forEach((e=>{const{name:n}=e,r=t[n];r&&!r.isDefaultInstance&&e.isDefaultInstance||(t[n]=e)})),Object.keys(t).map((e=>t[e]))}(r),s=function(e,t){for(let n=0;n<e.length;n++)if(!0===t(e[n]))return n;return-1}(o,(e=>"Debug"===e.name));if(-1!==s){const[e]=o.splice(s,1);o.push(e)}return o}function ca(e,t){for(const n of t)n&&n.afterAllSetup&&n.afterAllSetup(e)}function la(e,t,n){if(n[t.name])bs&&nr.log(`Integration skipped because it was already installed: ${t.name}`);else{if(n[t.name]=t,-1===ia.indexOf(t.name)&&(t.setupOnce(ks,pi),ia.push(t.name)),t.setup&&"function"==typeof t.setup&&t.setup(e),e.on&&"function"==typeof t.preprocessEvent){const n=t.preprocessEvent.bind(t);e.on("preprocessEvent",((t,r)=>n(t,r,e)))}if(e.addEventProcessor&&"function"==typeof t.processEvent){const n=t.processEvent.bind(t),r=Object.assign(((t,r)=>n(t,r,e)),{id:t.name});e.addEventProcessor(r)}bs&&nr.log(`Integration installed: ${t.name}`)}}function ua(e,t){return Object.assign((function(...e){return t(...e)}),{id:e})}function da(e){return e.replace(/[^\w\-./]+/gi,"")}const pa=[["\n","\\n"],["\r","\\r"],["\t","\\t"],["\\","\\\\"],["|","\\u{7c}"],[",","\\u{2c}"]];function ha(e){return[...e].reduce(((e,t)=>e+function(e){for(const[t,n]of pa)if(e===t)return n;return e}(t)),"")}function fa(e,t,n,r){const o={sent_at:(new Date).toISOString()};n&&n.sdk&&(o.sdk={name:n.sdk.name,version:n.sdk.version}),r&&t&&(o.dsn=or(t));const s=function(e){const t=function(e){let t="";for(const n of e){const e=Object.entries(n.tags),r=e.length>0?`|#${e.map((([e,t])=>`${e}:${t}`)).join(",")}`:"";t+=`${n.name}@${n.unit}:${n.metric}|${n.metricType}${r}|T${n.timestamp}\n`}return t}(e);return[{type:"statsd",length:t.length},t]}(e);return os(o,[s])}const ma="Not capturing exception because it's already been captured.";class ga{constructor(e){if(this._options=e,this._integrations={},this._integrationsInitialized=!1,this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=ar(e.dsn):bs&&nr.warn("No DSN provided, client will not send events."),this._dsn){const t=sa(this._dsn,e);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}}captureException(e,t,n){if($r(e))return void(bs&&nr.log(ma));let r=t&&t.event_id;return this._process(this.eventFromException(e,t).then((e=>this._captureEvent(e,t,n))).then((e=>{r=e}))),r}captureMessage(e,t,n,r){let o=n&&n.event_id;const s=En(e)?e:String(e),i=Tn(e)?this.eventFromMessage(s,t,n):this.eventFromException(e,n);return this._process(i.then((e=>this._captureEvent(e,n,r))).then((e=>{o=e}))),o}captureEvent(e,t,n){if(t&&t.originalException&&$r(t.originalException))return void(bs&&nr.log(ma));let r=t&&t.event_id;const o=(e.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(e,t,o||n).then((e=>{r=e}))),r}captureSession(e){"string"!=typeof e.release?bs&&nr.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),xs(e,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const t=this._transport;return t?(this.metricsAggregator&&this.metricsAggregator.flush(),this._isClientDoneProcessing(e).then((n=>t.flush(e).then((e=>n&&e))))):Co(!0)}close(e){return this.flush(e).then((e=>(this.getOptions().enabled=!1,this.metricsAggregator&&this.metricsAggregator.close(),e)))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}setupIntegrations(e){(e&&!this._integrationsInitialized||this._isEnabled()&&!this._integrationsInitialized)&&this._setupIntegrations()}init(){this._isEnabled()&&this._setupIntegrations()}getIntegrationById(e){return this.getIntegrationByName(e)}getIntegrationByName(e){return this._integrations[e]}getIntegration(e){try{return this._integrations[e.id]||null}catch(t){return bs&&nr.warn(`Cannot retrieve integration ${e.id} from the current Client`),null}}addIntegration(e){const t=this._integrations[e.name];la(this,e,this._integrations),t||ca(this,[e])}sendEvent(e,t={}){this.emit("beforeSendEvent",e,t);let n=ta(e,this._dsn,this._options._metadata,this._options.tunnel);for(const e of t.attachments||[])n=ss(n,ls(e,this._options.transportOptions&&this._options.transportOptions.textEncoder));const r=this._sendEnvelope(n);r&&r.then((t=>this.emit("afterSendEvent",e,t)),null)}sendSession(e){const t=function(e,t,n,r){const o=ps(n);return os({sent_at:(new Date).toISOString(),...o&&{sdk:o},...!!r&&t&&{dsn:or(t)}},["aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(t)}recordDroppedEvent(e,t,n){if(this._options.sendClientReports){const n=`${e}:${t}`;bs&&nr.log(`Adding outcome: "${n}"`),this._outcomes[n]=this._outcomes[n]+1||1}}captureAggregateMetrics(e){bs&&nr.log(`Flushing aggregated metrics, number of metrics: ${e.length}`);const t=fa(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(t)}on(e,t){this._hooks[e]||(this._hooks[e]=[]),this._hooks[e].push(t)}emit(e,...t){this._hooks[e]&&this._hooks[e].forEach((e=>e(...t)))}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=function(e,t){const n={};return t.forEach((t=>{t&&la(e,t,n)})),n}(this,e),ca(this,e),this._integrationsInitialized=!0}_updateSessionFromEvent(e,t){let n=!1,r=!1;const o=t.exception&&t.exception.values;if(o){r=!0;for(const e of o){const t=e.mechanism;if(t&&!1===t.handled){n=!0;break}}}const s="ok"===e.status;(s&&0===e.errors||s&&n)&&(xs(e,{...n&&{status:"crashed"},errors:e.errors||Number(r||n)}),this.captureSession(e))}_isClientDoneProcessing(e){return new Ao((t=>{let n=0;const r=setInterval((()=>{0==this._numProcessing?(clearInterval(r),t(!0)):(n+=1,e&&n>=e&&(clearInterval(r),t(!1)))}),1)}))}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(e,t,n,r=hi()){const o=this.getOptions(),s=Object.keys(this._integrations);return!t.integrations&&s.length>0&&(t.integrations=s),this.emit("preprocessEvent",e,t),Ds(o,e,t,n,this,r).then((e=>{if(null===e)return e;const t={...r.getPropagationContext(),...n?n.getPropagationContext():void 0};if(!(e.contexts&&e.contexts.trace)&&t){const{traceId:r,spanId:o,parentSpanId:s,dsc:i}=t;e.contexts={trace:{trace_id:r,span_id:o,parent_span_id:s},...e.contexts};const a=i||Qs(r,this,n);e.sdkProcessingMetadata={dynamicSamplingContext:a,...e.sdkProcessingMetadata}}return e}))}_captureEvent(e,t={},n){return this._processEvent(e,t,n).then((e=>e.event_id),(e=>{if(bs){const t=e;"log"===t.logLevel?nr.log(t.message):nr.warn(t)}}))}_processEvent(e,t,n){const r=this.getOptions(),{sampleRate:o}=r,s=_a(e),i=ya(e),a=e.type||"error",c=`before send for type \`${a}\``;if(i&&"number"==typeof o&&Math.random()>o)return this.recordDroppedEvent("sample_rate","error",e),Ro(new cr(`Discarding event because it's not included in the random sample (sampling rate = ${o})`,"log"));const l="replay_event"===a?"replay":a,u=(e.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(e,t,n,u).then((n=>{if(null===n)throw this.recordDroppedEvent("event_processor",l,e),new cr("An event processor returned `null`, will not send event.","log");if(t.data&&!0===t.data.__sentry__)return n;const o=function(e,t,n){const{beforeSend:r,beforeSendTransaction:o}=e;if(ya(t)&&r)return r(t,n);if(_a(t)&&o)return o(t,n);return t}(r,n,t);return function(e,t){const n=`${t} must return \`null\` or a valid event.`;if(Rn(e))return e.then((e=>{if(!xn(e)&&null!==e)throw new cr(n);return e}),(e=>{throw new cr(`${t} rejected with ${e}`)}));if(!xn(e)&&null!==e)throw new cr(n);return e}(o,c)})).then((r=>{if(null===r)throw this.recordDroppedEvent("before_send",l,e),new cr(`${c} returned \`null\`, will not send event.`,"log");const o=n&&n.getSession();!s&&o&&this._updateSessionFromEvent(o,r);const i=r.transaction_info;if(s&&i&&r.transaction!==e.transaction){const e="custom";r.transaction_info={...i,source:e}}return this.sendEvent(r,t),r})).then(null,(e=>{if(e instanceof cr)throw e;throw this.captureException(e,{data:{__sentry__:!0},originalException:e}),new cr(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${e}`)}))}_process(e){this._numProcessing++,e.then((e=>(this._numProcessing--,e)),(e=>(this._numProcessing--,e)))}_sendEnvelope(e){if(this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport)return this._transport.send(e).then(null,(e=>{bs&&nr.error("Error while sending event:",e)}));bs&&nr.error("Transport disabled")}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.keys(e).map((t=>{const[n,r]=t.split(":");return{reason:n,category:r,quantity:e[t]}}))}}function ya(e){return void 0===e.type}function _a(e){return"transaction"===e.type}function va(e){const t=Ws();t&&t.addEventProcessor&&t.addEventProcessor(e)}const ba={c:class{constructor(e){this._value=e}get weight(){return 1}add(e){this._value+=e}toString(){return`${this._value}`}},g:class{constructor(e){this._last=e,this._min=e,this._max=e,this._sum=e,this._count=1}get weight(){return 5}add(e){this._last=e,e<this._min&&(this._min=e),e>this._max&&(this._max=e),this._sum+=e,this._count++}toString(){return`${this._last}:${this._min}:${this._max}:${this._sum}:${this._count}`}},d:class{constructor(e){this._value=[e]}get weight(){return this._value.length}add(e){this._value.push(e)}toString(){return this._value.join(":")}},s:class{constructor(e){this.first=e,this._value=new Set([e])}get weight(){return this._value.size}add(e){this._value.add(e)}toString(){return Array.from(this._value).map((e=>"string"==typeof e?function(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return t>>>0}(e):e)).join(":")}}};function Sa(e){const t=pi().getStackTop();t.client=e,t.scope.setClient(e)}const wa=30;function ka(e,t,n=Oo(e.bufferSize||wa)){let r={};function o(o){const s=[];if(is(o,((t,n)=>{const o=ds(n);if(gs(r,o)){const r=Ea(t,n);e.recordDroppedEvent("ratelimit_backoff",o,r)}else s.push(t)})),0===s.length)return Co();const i=os(o[0],s),a=t=>{is(i,((n,r)=>{const o=Ea(n,r);e.recordDroppedEvent(t,ds(r),o)}))};return n.add((()=>t({body:cs(i,e.textEncoder)}).then((e=>(void 0!==e.statusCode&&(e.statusCode<200||e.statusCode>=300)&&bs&&nr.warn(`Sentry responded with status code ${e.statusCode} to sent event.`),r=ys(r,e),e)),(e=>{throw a("network_error"),e})))).then((e=>e),(e=>{if(e instanceof cr)return bs&&nr.error("Skipped sending event because buffer is full."),a("queue_overflow"),Co();throw e}))}return o.__sentry__baseTransport__=!0,{send:o,flush:e=>n.drain(e)}}function Ea(e,t){if("event"===t||"transaction"===t)return Array.isArray(e)?e[1]:void 0}const Ta=100,xa=5e3,Ia=36e5;function Ca(e,t){bs&&nr.info(`[Offline]: ${e}`,t)}function Ra(e){return t=>{const n=e(t),r=t.createStore?t.createStore(t):void 0;let o,s=xa;function i(e,n,r){return o=["replay_event","replay_recording","client_report"],!is(e,((e,t)=>o.includes(t)))&&(!t.shouldStore||t.shouldStore(e,n,r));var o}function a(e){r&&(o&&clearTimeout(o),o=setTimeout((async()=>{o=void 0;const e=await r.pop();e&&(Ca("Attempting to send previously queued event"),l(e).catch((e=>{Ca("Failed to retry sending",e)})))}),e),"number"!=typeof o&&o.unref&&o.unref())}function c(){o||(a(s),s=Math.min(2*s,Ia))}async function l(e){try{const t=await n.send(e);let r=Ta;if(t)if(t.headers&&t.headers["retry-after"])r=ms(t.headers["retry-after"]);else if((t.statusCode||0)>=400)return t;return a(r),s=xa,t}catch(t){if(r&&await i(e,t,s))return await r.insert(e),c(),Ca("Error sending. Event queued",t),{};throw t}}return t.flushAtStartup&&c(),{send:l,flush:e=>n.flush(e)}}}function Aa(e,t){let n;return is(e,((e,r)=>(t.includes(r)&&(n=Array.isArray(e)?e[1]:void 0),!!n))),n}function Oa(e){return[{type:"span"},e]}function Ma(e,t){const n=t&&function(e){return void 0!==e.getClient}(t)?t.getClient():t,r=n&&n.getDsn(),o=n&&n.getOptions().tunnel;return function(e,t){return!!t&&e.includes(t.host)}(e,r)||function(e,t){if(!t)return!1;return Na(e)===Na(t)}(e,o)}function Na(e){return"/"===e[e.length-1]?e.slice(0,-1):e}const La=new Map,Da=new Set;function $a(e,t){return function(e){if(Hn._sentryModuleMetadata)for(const t of Object.keys(Hn._sentryModuleMetadata)){const n=Hn._sentryModuleMetadata[t];if(Da.has(t))continue;Da.add(t);const r=e(t);for(const e of r.reverse())if(e.filename){La.set(e.filename,n);break}}}(e),La.get(t)}const Pa="ModuleMetadata",Fa=()=>({name:Pa,setupOnce(){},setup(e){"function"==typeof e.on&&e.on("beforeEnvelope",(e=>{is(e,((e,t)=>{if("event"===t){const t=Array.isArray(e)?e[1]:void 0;t&&(!function(e){try{e.exception.values.forEach((e=>{if(e.stacktrace)for(const t of e.stacktrace.frames||[])delete t.module_metadata}))}catch(e){}}(t),e[1]=t)}}))}))},processEvent:(e,t,n)=>(function(e,t){try{t.exception.values.forEach((t=>{if(t.stacktrace)for(const n of t.stacktrace.frames||[]){if(!n.filename)continue;const t=$a(e,n.filename);t&&(n.module_metadata=t)}}))}catch(e){}}(n.getOptions().stackParser,e),e)}),ja=ua(Pa,Fa),Ua={include:{cookies:!0,data:!0,headers:!0,ip:!1,query_string:!0,url:!0,user:{id:!0,username:!0,email:!0}},transactionNamingScheme:"methodPath"},Ba="RequestData";ua(Ba,((e={})=>{const t=Uo,n={...Ua,...e,include:{method:!0,...Ua.include,...e.include,user:e.include&&"boolean"==typeof e.include.user?e.include.user:{...Ua.include.user,...(e.include||{}).user}}};return{name:Ba,setupOnce(){},processEvent(e,r,o){const{transactionNamingScheme:s}=n,{sdkProcessingMetadata:i={}}=e,a=i.request;if(!a)return e;const c=i.requestDataOptionsFromExpressHandler||i.requestDataOptionsFromGCPWrapper||function(e){const{transactionNamingScheme:t,include:{ip:n,user:r,...o}}=e,s=[];for(const[e,t]of Object.entries(o))t&&s.push(e);let i;if(void 0===r)i=!0;else if("boolean"==typeof r)i=r;else{const e=[];for(const[t,n]of Object.entries(r))n&&e.push(t);i=e}return{include:{ip:n,user:i,request:0!==s.length?s:void 0,transaction:t}}}(n),l=t(e,a,c);if("transaction"===e.type||"handler"===s)return l;const u=a._sentryTransaction;if(u){const e=Ns(u).description||"",t="sentry.javascript.nextjs"===function(e){try{return e.getOptions()._metadata.sdk.name}catch(e){return}}(o)?e.startsWith("/api"):"path"!==s,[n]=Fo(a,{path:!0,method:t,customRoute:e});l.transaction=n}return l}}}));const Ha=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/],za=[/^.*\/healthcheck$/,/^.*\/healthy$/,/^.*\/live$/,/^.*\/ready$/,/^.*\/heartbeat$/,/^.*\/health$/,/^.*\/healthz$/],qa="InboundFilters",Wa=(e={})=>({name:qa,setupOnce(){},processEvent(t,n,r){const o=r.getOptions(),s=function(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:Ha],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[],...e.disableTransactionDefaults?[]:za],ignoreInternal:void 0===e.ignoreInternal||e.ignoreInternal}}(e,o);return function(e,t){if(t.ignoreInternal&&function(e){try{return"SentryError"===e.exception.values[0].type}catch(e){}return!1}(e))return bs&&nr.warn(`Event dropped due to being internal Sentry Error.\nEvent: ${Nr(e)}`),!0;if(function(e,t){if(e.type||!t||!t.length)return!1;return function(e){const t=[];e.message&&t.push(e.message);let n;try{n=e.exception.values[e.exception.values.length-1]}catch(e){}n&&n.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`));bs&&0===t.length&&nr.error(`Could not extract message for event ${Nr(e)}`);return t}(e).some((e=>$n(e,t)))}(e,t.ignoreErrors))return bs&&nr.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${Nr(e)}`),!0;if(function(e,t){if("transaction"!==e.type||!t||!t.length)return!1;const n=e.transaction;return!!n&&$n(n,t)}(e,t.ignoreTransactions))return bs&&nr.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${Nr(e)}`),!0;if(function(e,t){if(!t||!t.length)return!1;const n=Va(e);return!!n&&$n(n,t)}(e,t.denyUrls))return bs&&nr.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${Nr(e)}.\nUrl: ${Va(e)}`),!0;if(!function(e,t){if(!t||!t.length)return!0;const n=Va(e);return!n||$n(n,t)}(e,t.allowUrls))return bs&&nr.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${Nr(e)}.\nUrl: ${Va(e)}`),!0;return!1}(t,s)?null:t}}),Ga=ua(qa,Wa);function Va(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch(e){}return t?function(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&"<anonymous>"!==n.filename&&"[native code]"!==n.filename)return n.filename||null}return null}(t):null}catch(t){return bs&&nr.error(`Cannot extract url for event ${Nr(e)}`),null}}let Ya;const Ka="FunctionToString",Xa=new WeakMap,Ja=()=>({name:Ka,setupOnce(){Ya=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=pr(this),n=Xa.has(Ws())&&void 0!==t?t:this;return Ya.apply(n,e)}}catch(e){}},setup(e){Xa.set(e,!0)}}),Qa=ua(Ka,Ja),Za="LinkedErrors",ec=ua(Za,((e={})=>{const t=e.limit||5,n=e.key||"cause";return{name:Za,setupOnce(){},preprocessEvent(e,r,o){const s=o.getOptions();Pn(_s,s.stackParser,s.maxValueLength,n,t,e,r)}}}));var tc=Object.freeze({__proto__:null,FunctionToString:Qa,InboundFilters:Ga,LinkedErrors:ec});class nc{constructor(e){this._client=e,this._buckets=new Map,this._interval=setInterval((()=>this.flush()),5e3)}add(e,t,n,r="none",o={},s=Wo()){const i=Math.floor(s),a=t.replace(/[^\w\-.]+/gi,"_");const c=function(e){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[da(n)]=ha(String(e[n])));return t}(o),l=function(e){return e.replace(/[^\w]+/gi,"_")}(r),u=function(e,t,n,r){return`${e}${t}${n}${Object.entries(gr(r)).sort(((e,t)=>e[0].localeCompare(t[0])))}`}(e,a,l,c);let d=this._buckets.get(u);const p=d&&"s"===e?d.metric.weight:0;d?(d.metric.add(n),d.timestamp<i&&(d.timestamp=i)):(d={metric:new ba[e](n),timestamp:i,metricType:e,name:a,unit:l,tags:c},this._buckets.set(u,d));!function(e,t,n,r,o,s){const i=Ri();if(i){const a=Di(i)||new Map,c=`${e}:${t}@${r}`,l=a.get(s);if(l){const[,e]=l;a.set(s,[c,{min:Math.min(e.min,n),max:Math.max(e.max,n),count:e.count+=1,sum:e.sum+=n,tags:e.tags}])}else a.set(s,[c,{min:n,max:n,count:1,sum:n,tags:o}]);Li||(Li=new WeakMap),Li.set(i,a)}}(e,a,"string"==typeof n?d.metric.weight-p:n,l,o,u)}flush(){if(0!==this._buckets.size){if(this._client.captureAggregateMetrics){const e=Array.from(this._buckets).map((([,e])=>e));this._client.captureAggregateMetrics(e)}this._buckets.clear()}}close(){clearInterval(this._interval),this.flush()}}const rc="MetricsAggregator",oc=()=>({name:rc,setupOnce(){},setup(e){e.metricsAggregator=new nc(e)}});function sc(e,t,n,r={}){const o=Ws(),s=Gs();if(o){if(!o.metricsAggregator)return void(bs&&nr.warn("No metrics aggregator enabled. Please add the MetricsAggregator integration to use metrics APIs"));const{unit:i,tags:a,timestamp:c}=r,{release:l,environment:u}=o.getOptions(),d=s.getTransaction(),p={};l&&(p.release=l),u&&(p.environment=u),d&&(p.transaction=Ns(d).description||""),bs&&nr.log(`Adding value of ${n} to ${e} metric ${t}`),o.metricsAggregator.add(e,t,n,i,{...p,...a},c)}}const ic={increment:function(e,t=1,n){sc("c",e,t,n)},distribution:function(e,t,n){sc("d",e,t,n)},set:function(e,t,n){sc("s",e,t,n)},gauge:function(e,t,n){sc("g",e,t,n)},MetricsAggregator:ua(rc,oc),metricsAggregatorIntegration:oc},ac=tc,cc="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function lc(e){const t=vs([e,"call",e=>e(),"access",e=>e.getClient,"call",e=>e(),"optionalAccess",e=>e.getOptions,"call",e=>e()]);return"sentry"!==(vs([t,"optionalAccess",e=>e.instrumenter])||"sentry")}class uc{static __initStatic(){this.id="Express"}constructor(e={}){this.name=uc.id,this._router=e.router||e.app,this._methods=(Array.isArray(e.methods)?e.methods:[]).concat("use")}setupOnce(e,t){this._router?lc(t)?cc&&nr.log("Express Integration is skipped because of instrumenter configuration."):(function(e,t=[]){t.forEach((t=>function(e,t){const n=e[t];return e[t]=function(...e){return n.call(this,...function(e,t){return e.map((e=>"function"==typeof e?dc(e,t):Array.isArray(e)?e.map((e=>"function"==typeof e?dc(e,t):e)):e))}(e,t))},e}(e,t)))}(this._router,this._methods),function(e){const t="settings"in e;t&&void 0===e._router&&e.lazyrouter&&e.lazyrouter();const n=t?e._router:e;if(!n)return cc&&nr.debug("Cannot instrument router for URL Parameterization (did not find a valid router)."),void(cc&&nr.debug("Routing instrumentation is currently only supported in Express 4."));const r=Object.getPrototypeOf(n),o=r.process_params;r.process_params=function(e,t,n,r,s){n._reconstructedRoute||(n._reconstructedRoute="");const{layerRoutePath:i,isRegex:a,isArray:c,numExtraSegments:l}=function(e){let t=vs([e,"access",e=>e.route,"optionalAccess",e=>e.path]);const n=Cn(t),r=Array.isArray(t);if(!t){const[n]=Hn.process.versions.node.split(".").map(Number);n>=16&&(t=pc(e.path,e.regexp,e.keys))}if(!t)return{isRegex:n,isArray:r,numExtraSegments:0};const o=r?Math.max((i=t,i.reduce(((e,t)=>e+Lo(t.toString())),0)-Lo(e.path||"")),0):0,s=function(e,t){if(e)return t.map((e=>e.toString())).join(",");return t&&t.toString()}(r,t);var i;return{layerRoutePath:s,isRegex:n,isArray:r,numExtraSegments:o}}(e);let u;(i||a||c)&&(n._hasParameters=!0),u=i||(function(e,t,n){const r=vs([No(e||""),"optionalAccess",e=>e.split,"call",e=>e("/"),"access",e=>e.filter,"call",e=>e((e=>!!e))]);let o=0;const s=vs([t,"optionalAccess",e=>e.split,"call",e=>e("/"),"access",e=>e.filter,"call",e=>e((e=>!!e)),"access",e=>e.length])||0;return vs([n,"optionalAccess",e=>e.split,"call",e=>e("/"),"access",e=>e.filter,"call",e=>e((e=>vs([r,"optionalAccess",e=>e[s+o]])===e&&(o+=1,!0))),"access",e=>e.join,"call",e=>e("/")])}(n.originalUrl,n._reconstructedRoute,e.path)||"");const d=u.split("/").filter((e=>e.length>0&&(a||c||!e.includes("*")))).join("/");d&&d.length>0&&(n._reconstructedRoute+=`/${d}${a?"/":""}`);if(Lo(No(n.originalUrl||""))+l===Lo(n._reconstructedRoute)){n._hasParameters||n._reconstructedRoute!==n.originalUrl&&(n._reconstructedRoute=n.originalUrl?No(n.originalUrl):n.originalUrl);const e=r.__sentry_transaction,t=e&&Ns(e).data||{};if(e&&"custom"!==t[Pi]){const t=n._reconstructedRoute||"/",[r,o]=Fo(n,{path:!0,method:!0,customRoute:t});e.updateName(r),e.setAttribute(Pi,o)}}return o.call(this,e,t,n,r,s)}}(this._router)):cc&&nr.error("ExpressIntegration is missing an Express instance")}}function dc(e,t){const n=e.length;switch(n){case 2:return function(n,r){const o=r.__sentry_transaction;if(o){const n=o.startChild({description:e.name,op:`middleware.express.${t}`,origin:"auto.middleware.express"});r.once("finish",(()=>{n.end()}))}return e.call(this,n,r)};case 3:return function(n,r,o){const s=vs([r.__sentry_transaction,"optionalAccess",e=>e.startChild,"call",n=>n({description:e.name,op:`middleware.express.${t}`,origin:"auto.middleware.express"})]);e.call(this,n,r,(function(...e){vs([s,"optionalAccess",e=>e.end,"call",e=>e()]),o.call(this,...e)}))};case 4:return function(n,r,o,s){const i=vs([o.__sentry_transaction,"optionalAccess",e=>e.startChild,"call",n=>n({description:e.name,op:`middleware.express.${t}`,origin:"auto.middleware.express"})]);e.call(this,n,r,o,(function(...e){vs([i,"optionalAccess",e=>e.end,"call",e=>e()]),s.call(this,...e)}))};default:throw new Error(`Express middleware takes 2-4 arguments. Got: ${n}`)}}uc.__initStatic();const pc=(e,t,n)=>{if(!(e&&t&&n&&0!==Object.keys(n).length&&vs([n,"access",e=>e[0],"optionalAccess",e=>e.offset])))return;const r=n.sort(((e,t)=>e.offset-t.offset)),o=new RegExp(t,`${t.flags}d`).exec(e);if(!o||!o.indices)return;const[,...s]=o.indices;if(s.length!==r.length)return;let i=e,a=0;return s.forEach(((e,t)=>{if(e){const[n,o]=e,s=i.substring(0,n-a),c=`:${r[t].name}`,l=i.substring(o-a);i=s+c+l,a+=o-n-c.length}})),i};class hc{static __initStatic(){this.id="Postgres"}constructor(e={}){this.name=hc.id,this._usePgNative=!!e.usePgNative,this._module=e.module}loadDependency(){return this._module=this._module||_o("pg")}setupOnce(e,t){if(lc(t))return void(cc&&nr.log("Postgres Integration is skipped because of instrumenter configuration."));const n=this.loadDependency();if(!n)return void(cc&&nr.error("Postgres Integration was unable to require `pg` package."));const r=this._usePgNative?vs([n,"access",e=>e.native,"optionalAccess",e=>e.Client]):n.Client;r?lr(r.prototype,"query",(function(e){return function(n,r,o){const s=t().getScope().getSpan(),i={"db.system":"postgresql"};try{this.database&&(i["db.name"]=this.database),this.host&&(i["server.address"]=this.host),this.port&&(i["server.port"]=this.port),this.user&&(i["db.user"]=this.user)}catch(e){}const a=vs([s,"optionalAccess",e=>e.startChild,"call",e=>e({description:"string"==typeof n?n:n.text,op:"db",origin:"auto.db.postgres",data:i})]);if("function"==typeof o)return e.call(this,n,r,(function(e,t){vs([a,"optionalAccess",e=>e.end,"call",e=>e()]),o(e,t)}));if("function"==typeof r)return e.call(this,n,(function(e,t){vs([a,"optionalAccess",e=>e.end,"call",e=>e()]),r(e,t)}));const c=void 0!==r?e.call(this,n,r):e.call(this,n);return Rn(c)?c.then((e=>(vs([a,"optionalAccess",e=>e.end,"call",e=>e()]),e))):(vs([a,"optionalAccess",e=>e.end,"call",e=>e()]),c)}})):cc&&nr.error("Postgres Integration was unable to access 'pg-native' bindings.")}}hc.__initStatic();class fc{static __initStatic(){this.id="Mysql"}constructor(){this.name=fc.id}loadDependency(){return this._module=this._module||_o("mysql/lib/Connection.js")}setupOnce(e,t){if(lc(t))return void(cc&&nr.log("Mysql Integration is skipped because of instrumenter configuration."));const n=this.loadDependency();if(!n)return void(cc&&nr.error("Mysql Integration was unable to require `mysql` package."));let r;try{n.prototype.connect=new Proxy(n.prototype.connect,{apply:(e,t,n)=>(r||(r=t.config),e.apply(t,n))})}catch(e){cc&&nr.error("Mysql Integration was unable to instrument `mysql` config.")}function o(e){if(!e)return;const t=r?{"server.address":r.host,"server.port":r.port,"db.user":r.user}:{};Object.keys(t).forEach((n=>{e.setAttribute(n,t[n])})),e.end()}lr(n,"createQuery",(function(e){return function(n,r,s){const i=vs([t().getScope().getSpan(),"optionalAccess",e=>e.startChild,"call",e=>e({description:"string"==typeof n?n:n.sql,op:"db",origin:"auto.db.mysql",data:{"db.system":"mysql"}})]);if("function"==typeof s)return e.call(this,n,r,(function(e,t,n){o(i),s(e,t,n)}));if("function"==typeof r)return e.call(this,n,(function(e,t,n){o(i),r(e,t,n)}));const a=e.call(this,n,r);return a.on("end",(()=>{o(i)})),a}}))}}fc.__initStatic();const mc=["aggregate","bulkWrite","countDocuments","createIndex","createIndexes","deleteMany","deleteOne","distinct","drop","dropIndex","dropIndexes","estimatedDocumentCount","find","findOne","findOneAndDelete","findOneAndReplace","findOneAndUpdate","indexes","indexExists","indexInformation","initializeOrderedBulkOp","insertMany","insertOne","isCapped","mapReduce","options","parallelCollectionScan","rename","replaceOne","stats","updateMany","updateOne"],gc={bulkWrite:["operations"],countDocuments:["query"],createIndex:["fieldOrSpec"],createIndexes:["indexSpecs"],deleteMany:["filter"],deleteOne:["filter"],distinct:["key","query"],dropIndex:["indexName"],find:["query"],findOne:["query"],findOneAndDelete:["filter"],findOneAndReplace:["filter","replacement"],findOneAndUpdate:["filter","update"],indexExists:["indexes"],insertMany:["docs"],insertOne:["doc"],mapReduce:["map","reduce"],rename:["newName"],replaceOne:["filter","doc"],updateMany:["filter","update"],updateOne:["filter","update"]};class yc{static __initStatic(){this.id="Mongo"}constructor(e={}){this.name=yc.id,this._operations=Array.isArray(e.operations)?e.operations:mc,this._describeOperations=!("describeOperations"in e)||e.describeOperations,this._useMongoose=!!e.useMongoose}loadDependency(){const e=this._useMongoose?"mongoose":"mongodb";return this._module=this._module||_o(e)}setupOnce(e,t){if(lc(t))return void(cc&&nr.log("Mongo Integration is skipped because of instrumenter configuration."));const n=this.loadDependency();if(n)this._instrumentOperations(n.Collection,this._operations,t);else{const e=this._useMongoose?"mongoose":"mongodb";cc&&nr.error(`Mongo Integration was unable to require \`${e}\` package.`)}}_instrumentOperations(e,t,n){t.forEach((t=>this._patchOperation(e,t,n)))}_patchOperation(e,t,n){if(!(t in e.prototype))return;const r=this._getSpanContextFromOperationArguments.bind(this);lr(e.prototype,t,(function(e){return function(...o){const s=o[o.length-1],i=n(),a=i.getScope(),c=i.getClient(),l=a.getSpan(),u=vs([c,"optionalAccess",e=>e.getOptions,"call",e=>e(),"access",e=>e.sendDefaultPii]);if("function"!=typeof s||"mapReduce"===t&&2===o.length){const n=vs([l,"optionalAccess",e=>e.startChild,"call",e=>e(r(this,t,o,u))]),s=e.call(this,...o);if(Rn(s))return s.then((e=>(vs([n,"optionalAccess",e=>e.end,"call",e=>e()]),e)));if((d=s)&&"object"==typeof d&&d.once&&"function"==typeof d.once){const e=s;try{e.once("close",(()=>{vs([n,"optionalAccess",e=>e.end,"call",e=>e()])}))}catch(e){vs([n,"optionalAccess",e=>e.end,"call",e=>e()])}return e}return vs([n,"optionalAccess",e=>e.end,"call",e=>e()]),s}var d;const p=vs([l,"optionalAccess",e=>e.startChild,"call",e=>e(r(this,t,o.slice(0,-1)))]);return e.call(this,...o.slice(0,-1),(function(e,t){vs([p,"optionalAccess",e=>e.end,"call",e=>e()]),s(e,t)}))}}))}_getSpanContextFromOperationArguments(e,t,n,r=!1){const o={"db.system":"mongodb","db.name":e.dbName,"db.operation":t,"db.mongodb.collection":e.collectionName},s={op:"db",origin:"auto.db.mongo",description:t,data:o},i=gc[t],a=Array.isArray(this._describeOperations)?this._describeOperations.includes(t):this._describeOperations;if(!i||!a||!r)return s;try{if("mapReduce"===t){const[e,t]=n;o[i[0]]="string"==typeof e?e:e.name||"<anonymous>",o[i[1]]="string"==typeof t?t:t.name||"<anonymous>"}else for(let e=0;e<i.length;e++)o[`db.mongodb.${i[e]}`]=JSON.stringify(n[e])}catch(e){}return s}}yc.__initStatic();class _c{static __initStatic(){this.id="Prisma"}constructor(e={}){if(this.name=_c.id,(t=e.client)&&t.$use&&!e.client._sentryInstrumented){ur(e.client,"_sentryInstrumented",!0);const t={};try{const n=e.client._engineConfig;if(n){const{activeProvider:e,clientVersion:r}=n;e&&(t["db.system"]=e),r&&(t["db.prisma.version"]=r)}}catch(e){}e.client.$use(((e,n)=>{if(lc(pi))return n(e);const r=e.action,o=e.model;return Ii({name:o?`${o} ${r}`:r,onlyIfParent:!0,op:"db.prisma",attributes:{[Ui]:"auto.db.prisma"},data:{...t,"db.operation":r}},(()=>n(e)))}))}else cc&&nr.warn("Unsupported Prisma client provided to PrismaIntegration. Provided client:",e.client);var t}setupOnce(){}}_c.__initStatic();class vc{static __initStatic(){this.id="GraphQL"}constructor(){this.name=vc.id}loadDependency(){return this._module=this._module||_o("graphql/execution/execute.js")}setupOnce(e,t){if(lc(t))return void(cc&&nr.log("GraphQL Integration is skipped because of instrumenter configuration."));const n=this.loadDependency();n?lr(n,"execute",(function(e){return function(...n){const r=t().getScope(),o=r.getSpan(),s=vs([o,"optionalAccess",e=>e.startChild,"call",e=>e({description:"execute",op:"graphql.execute",origin:"auto.graphql.graphql"})]);vs([r,"optionalAccess",e=>e.setSpan,"call",e=>e(s)]);const i=e.call(this,...n);return Rn(i)?i.then((e=>(vs([s,"optionalAccess",e=>e.end,"call",e=>e()]),vs([r,"optionalAccess",e=>e.setSpan,"call",e=>e(o)]),e))):(vs([s,"optionalAccess",e=>e.end,"call",e=>e()]),vs([r,"optionalAccess",e=>e.setSpan,"call",e=>e(o)]),i)}})):cc&&nr.error("GraphQL Integration was unable to require graphql/execution package.")}}vc.__initStatic();class bc{static __initStatic(){this.id="Apollo"}constructor(e={useNestjs:!1}){this.name=bc.id,this._useNest=!!e.useNestjs}loadDependency(){return this._useNest?this._module=this._module||_o("@nestjs/graphql"):this._module=this._module||_o("apollo-server-core"),this._module}setupOnce(e,t){if(lc(t))cc&&nr.log("Apollo Integration is skipped because of instrumenter configuration.");else if(this._useNest){const e=this.loadDependency();if(!e)return void(cc&&nr.error("Apollo-NestJS Integration was unable to require @nestjs/graphql package."));lr(e.GraphQLFactory.prototype,"mergeWithSchema",(function(e){return function(...n){return lr(this.resolversExplorerService,"explore",(function(e){return function(){return Sc(Pr(e.call(this)),t)}})),e.call(this,...n)}}))}else{const e=this.loadDependency();if(!e)return void(cc&&nr.error("Apollo Integration was unable to require apollo-server-core package."));lr(e.ApolloServerBase.prototype,"constructSchema",(function(e){return function(){if(!this.config.resolvers)return cc&&(this.config.schema?(nr.warn("Apollo integration is not able to trace `ApolloServer` instances constructed via `schema` property.If you are using NestJS with Apollo, please use `Sentry.Integrations.Apollo({ useNestjs: true })` instead."),nr.warn()):this.config.modules&&nr.warn("Apollo integration is not able to trace `ApolloServer` instances constructed via `modules` property."),nr.error("Skipping tracing as no resolvers found on the `ApolloServer` instance.")),e.call(this);const n=Pr(this.config.resolvers);return this.config.resolvers=Sc(n,t),e.call(this)}}))}}}function Sc(e,t){return e.map((e=>(Object.keys(e).forEach((n=>{Object.keys(e[n]).forEach((r=>{"function"==typeof e[n][r]&&function(e,t,n,r){lr(e[t],n,(function(e){return function(...o){const s=vs([r().getScope().getSpan(),"optionalAccess",e=>e.startChild,"call",e=>e({description:`${t}.${n}`,op:"graphql.resolve",origin:"auto.graphql.apollo"})]),i=e.call(this,...o);return Rn(i)?i.then((e=>(vs([s,"optionalAccess",e=>e.end,"call",e=>e()]),e))):(vs([s,"optionalAccess",e=>e.end,"call",e=>e()]),i)}}))}(e,n,r,t)}))})),e)))}bc.__initStatic();const wc=Hn;function kc(){wc.document?wc.document.addEventListener("visibilitychange",(()=>{const e=yi();if(wc.document.hidden&&e){const t="cancelled",{op:n,status:r}=Ns(e);cc&&nr.log(`[Tracing] Transaction: ${t} -> since tab moved to the background, op: ${n}`),r||e.setStatus(t),e.setTag("visibilitychange","document.hidden"),e.end()}})):cc&&nr.warn("[Tracing] Could not set up background tab detection due to lack of global document")}const Ec=(e,t,n)=>{let r,o;return s=>{t.value>=0&&(s||n)&&(o=t.value-(r||0),(o||void 0===r)&&(r=t.value,t.delta=o,e(t)))}},Tc=()=>wc.__WEB_VITALS_POLYFILL__?wc.performance&&(performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]||(()=>{const e=wc.performance.timing,t=wc.performance.navigation.type,n={entryType:"navigation",startTime:0,type:2==t?"back_forward":1===t?"reload":"navigate"};for(const t in e)"navigationStart"!==t&&"toJSON"!==t&&(n[t]=Math.max(e[t]-e.navigationStart,0));return n})()):wc.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0],xc=()=>{const e=Tc();return e&&e.activationStart||0},Ic=(e,t)=>{const n=Tc();let r="navigate";return n&&(r=wc.document&&wc.document.prerendering||xc()>0?"prerender":n.type.replace(/_/g,"-")),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:`v3-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:r}},Cc=(e,t,n)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const r=new PerformanceObserver((e=>{t(e.getEntries())}));return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch(e){}},Rc=(e,t)=>{const n=r=>{"pagehide"!==r.type&&"hidden"!==wc.document.visibilityState||(e(r),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};wc.document&&(addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0))},Ac=(e,t={})=>{const n=Ic("CLS",0);let r,o=0,s=[];const i=e=>{e.forEach((e=>{if(!e.hadRecentInput){const t=s[0],i=s[s.length-1];o&&0!==s.length&&e.startTime-i.startTime<1e3&&e.startTime-t.startTime<5e3?(o+=e.value,s.push(e)):(o=e.value,s=[e]),o>n.value&&(n.value=o,n.entries=s,r&&r())}}))},a=Cc("layout-shift",i);if(a){r=Ec(e,n,t.reportAllChanges);const o=()=>{i(a.takeRecords()),r(!0)};return Rc(o),o}};let Oc=-1;const Mc=()=>(Oc<0&&(wc.document&&wc.document.visibilityState&&(Oc="hidden"!==wc.document.visibilityState||wc.document.prerendering?1/0:0),Rc((({timeStamp:e})=>{Oc=e}),!0)),{get firstHiddenTime(){return Oc}}),Nc=e=>{const t=Mc(),n=Ic("FID");let r;const o=e=>{e.startTime<t.firstHiddenTime&&(n.value=e.processingStart-e.startTime,n.entries.push(e),r(!0))},s=e=>{e.forEach(o)},i=Cc("first-input",s);r=Ec(e,n),i&&Rc((()=>{s(i.takeRecords()),i.disconnect()}),!0)};let Lc=0,Dc=1/0,$c=0;const Pc=e=>{e.forEach((e=>{e.interactionId&&(Dc=Math.min(Dc,e.interactionId),$c=Math.max($c,e.interactionId),Lc=$c?($c-Dc)/7+1:0)}))};let Fc;const jc=()=>{"interactionCount"in performance||Fc||(Fc=Cc("event",Pc,{type:"event",buffered:!0,durationThreshold:0}))},Uc=()=>Fc?Lc:performance.interactionCount||0,Bc=[],Hc={},zc=e=>{const t=Bc[Bc.length-1],n=Hc[e.interactionId];if(n||Bc.length<10||e.duration>t.latency){if(n)n.entries.push(e),n.latency=Math.max(n.latency,e.duration);else{const t={id:e.interactionId,latency:e.duration,entries:[e]};Hc[t.id]=t,Bc.push(t)}Bc.sort(((e,t)=>t.latency-e.latency)),Bc.splice(10).forEach((e=>{delete Hc[e.id]}))}},qc=(e,t)=>{t=t||{},jc();const n=Ic("INP");let r;const o=e=>{e.forEach((e=>{if(e.interactionId&&zc(e),"first-input"===e.entryType){!Bc.some((t=>t.entries.some((t=>e.duration===t.duration&&e.startTime===t.startTime))))&&zc(e)}}));const t=(()=>{const e=Math.min(Bc.length-1,Math.floor(Uc()/50));return Bc[e]})();t&&t.latency!==n.value&&(n.value=t.latency,n.entries=t.entries,r())},s=Cc("event",o,{durationThreshold:t.durationThreshold||40});r=Ec(e,n,t.reportAllChanges),s&&(s.observe({type:"first-input",buffered:!0}),Rc((()=>{o(s.takeRecords()),n.value<0&&Uc()>0&&(n.value=0,n.entries=[]),r(!0)})))},Wc={},Gc=e=>{const t=Mc(),n=Ic("LCP");let r;const o=e=>{const o=e[e.length-1];if(o){const e=Math.max(o.startTime-xc(),0);e<t.firstHiddenTime&&(n.value=e,n.entries=[o],r())}},s=Cc("largest-contentful-paint",o);if(s){r=Ec(e,n);const t=()=>{Wc[n.id]||(o(s.takeRecords()),s.disconnect(),Wc[n.id]=!0,r(!0))};return["keydown","click"].forEach((e=>{wc.document&&addEventListener(e,t,{once:!0,capture:!0})})),Rc(t,!0),t}},Vc=e=>{wc.document&&(wc.document.prerendering?addEventListener("prerenderingchange",(()=>Vc(e)),!0):"complete"!==wc.document.readyState?addEventListener("load",(()=>Vc(e)),!0):setTimeout(e,0))},Yc=(e,t)=>{t=t||{};const n=Ic("TTFB"),r=Ec(e,n,t.reportAllChanges);Vc((()=>{const e=Tc();if(e){if(n.value=Math.max(e.responseStart-xc(),0),n.value<0||n.value>performance.now())return;n.entries=[e],r(!0)}}))},Kc={},Xc={};let Jc,Qc,Zc,el,tl;function nl(e,t=!1){return ul("lcp",e,al,Zc,t)}function rl(e,t){return dl(e,t),Xc[e]||(!function(e){const t={};"event"===e&&(t.durationThreshold=0);Cc(e,(t=>{ol(e,{entries:t})}),t)}(e),Xc[e]=!0),pl(e,t)}function ol(e,t){const n=Kc[e];if(n&&n.length)for(const r of n)try{r(t)}catch(t){cc&&nr.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${kr(r)}\nError:`,t)}}function sl(){return Ac((e=>{ol("cls",{metric:e}),Jc=e}),{reportAllChanges:!0})}function il(){return Nc((e=>{ol("fid",{metric:e}),Qc=e}))}function al(){return Gc((e=>{ol("lcp",{metric:e}),Zc=e}))}function cl(){return Yc((e=>{ol("ttfb",{metric:e}),el=e}))}function ll(){return qc((e=>{ol("inp",{metric:e}),tl=e}))}function ul(e,t,n,r,o=!1){let s;return dl(e,t),Xc[e]||(s=n(),Xc[e]=!0),r&&t({metric:r}),pl(e,t,o?s:void 0)}function dl(e,t){Kc[e]=Kc[e]||[],Kc[e].push(t)}function pl(e,t,n){return()=>{n&&n();const r=Kc[e];if(!r)return;const o=r.indexOf(t);-1!==o&&r.splice(o,1)}}function hl(e){return"number"==typeof e&&isFinite(e)}function fl(e,{startTimestamp:t,...n}){return t&&e.startTimestamp>t&&(e.startTimestamp=t),e.startChild({startTimestamp:t,...n})}const ml=2147483647;function gl(e){return e/1e3}function yl(){return wc&&wc.addEventListener&&wc.performance}let _l,vl,bl=0,Sl={};function wl(){const e=yl();if(e&&Go){e.mark&&wc.performance.mark("sentry-tracing-init");const t=ul("fid",(({metric:e})=>{const t=e.entries[e.entries.length-1];if(!t)return;const n=gl(Go),r=gl(t.startTime);cc&&nr.log("[Measurements] Adding FID"),Sl.fid={value:e.value,unit:"millisecond"},Sl["mark.fid"]={value:n+r,unit:"second"}}),il,Qc),n=function(e,t=!1){return ul("cls",e,sl,Jc,t)}((({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(cc&&nr.log("[Measurements] Adding CLS"),Sl.cls={value:e.value,unit:""},vl=t)}),!0),r=nl((({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(cc&&nr.log("[Measurements] Adding LCP"),Sl.lcp={value:e.value,unit:"millisecond"},_l=t)}),!0),o=function(e){return ul("ttfb",e,cl,el)}((({metric:e})=>{e.entries[e.entries.length-1]&&(cc&&nr.log("[Measurements] Adding TTFB"),Sl.ttfb={value:e.value,unit:"millisecond"})}));return()=>{t(),n(),r(),o()}}return()=>{}}function kl(){rl("longtask",(({entries:e})=>{for(const t of e){const e=yi();if(!e)return;const n=gl(Go+t.startTime),r=gl(t.duration);e.startChild({description:"Main UI thread blocked",op:"ui.long-task",origin:"auto.ui.browser.metrics",startTimestamp:n,endTimestamp:n+r})}}))}function El(){rl("event",(({entries:e})=>{for(const t of e){const e=yi();if(!e)return;if("click"===t.name){const n=gl(Go+t.startTime),r=gl(t.duration),o={description:Vn(t.target),op:`ui.interaction.${t.name}`,origin:"auto.ui.browser.metrics",startTimestamp:n,endTimestamp:n+r},s=Jn(t.target);s&&(o.attributes={"ui.component_name":s}),e.startChild(o)}}}))}function Tl(e,t){if(yl()&&Go){const n=function(e,t){return n=({metric:n})=>{if(void 0===n.value)return;const r=n.entries.find((e=>e.duration===n.value&&void 0!==xl[e.name])),o=Ws();if(!r||!o)return;const s=xl[r.name],i=o.getOptions(),a=gl(Go+r.startTime),c=gl(n.value),l=void 0!==r.interactionId?e[r.interactionId]:void 0;if(void 0===l)return;const{routeName:u,parentContext:d,activeTransaction:p,user:h,replayId:f}=l,m=void 0!==h?h.email||h.id||h.ip_address:void 0,g=void 0!==p?p.getProfileId():void 0,y=new Hi({startTimestamp:a,endTimestamp:a+c,op:`ui.interaction.${s}`,name:Vn(r.target),attributes:{release:i.release,environment:i.environment,transaction:u,...void 0!==m&&""!==m?{user:m}:{},...void 0!==g?{profile_id:g}:{},...void 0!==f?{replay_id:f}:{}},exclusiveTime:n.value,measurements:{inp:{value:n.value,unit:"millisecond"}}}),_=function(e,t,n){if(!xi(t))return!1;let r;return r=void 0!==e&&"function"==typeof t.tracesSampler?t.tracesSampler({transactionContext:e,name:e.name,parentSampled:e.parentSampled,attributes:{...e.data,...e.attributes},location:wc.location}):void 0!==e&&void 0!==e.sampled?e.sampled:void 0!==t.tracesSampleRate?t.tracesSampleRate:1,Ki(r)?!0===r?n:!1===r?0:r*n:(cc&&nr.warn("[Tracing] Discarding interaction span because of invalid sample rate."),!1)}(d,i,t);if(_&&Math.random()<_){const e=y?function(e,t){const n={sent_at:(new Date).toISOString()};return t&&(n.dsn=or(t)),os(n,e.map(Oa))}([y],o.getDsn()):void 0,t=o&&o.getTransport();t&&e&&t.send(e).then(null,(e=>{cc&&nr.error("Error while sending interaction:",e)}))}},ul("inp",n,ll,tl);var n}(e,t);return()=>{n()}}return()=>{}}const xl={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};function Il(e){const t=yl();if(!t||!wc.performance.getEntries||!Go)return;cc&&nr.log("[Tracing] Adding & adjusting spans using Performance API");const n=gl(Go),r=t.getEntries(),{op:o,start_timestamp:s}=Ns(e);if(r.slice(bl).forEach((t=>{const r=gl(t.startTime),o=gl(t.duration);if(!("navigation"===e.op&&s&&n+r<s))switch(t.entryType){case"navigation":!function(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach((r=>{Cl(e,t,r,n)})),Cl(e,t,"secureConnection",n,"TLS/SSL","connectEnd"),Cl(e,t,"fetch",n,"cache","domainLookupStart"),Cl(e,t,"domainLookup",n,"DNS"),function(e,t,n){t.responseEnd&&(fl(e,{op:"browser",origin:"auto.browser.browser.metrics",description:"request",startTimestamp:n+gl(t.requestStart),endTimestamp:n+gl(t.responseEnd)}),fl(e,{op:"browser",origin:"auto.browser.browser.metrics",description:"response",startTimestamp:n+gl(t.responseStart),endTimestamp:n+gl(t.responseEnd)}))}(e,t,n)}(e,t,n);break;case"mark":case"paint":case"measure":{!function(e,t,n,r,o){const s=o+n,i=s+r;fl(e,{description:t.name,endTimestamp:i,op:t.entryType,origin:"auto.resource.browser.metrics",startTimestamp:s})}(e,t,r,o,n);const s=Mc(),i=t.startTime<s.firstHiddenTime;"first-paint"===t.name&&i&&(cc&&nr.log("[Measurements] Adding FP"),Sl.fp={value:t.startTime,unit:"millisecond"}),"first-contentful-paint"===t.name&&i&&(cc&&nr.log("[Measurements] Adding FCP"),Sl.fcp={value:t.startTime,unit:"millisecond"});break}case"resource":!function(e,t,n,r,o,s){if("xmlhttprequest"===t.initiatorType||"fetch"===t.initiatorType)return;const i=Mo(n),a={};Rl(a,t,"transferSize","http.response_transfer_size"),Rl(a,t,"encodedBodySize","http.response_content_length"),Rl(a,t,"decodedBodySize","http.decoded_response_content_length"),"renderBlockingStatus"in t&&(a["resource.render_blocking_status"]=t.renderBlockingStatus);i.protocol&&(a["url.scheme"]=i.protocol.split(":").pop());i.host&&(a["server.address"]=i.host);a["url.same_origin"]=n.includes(wc.location.origin);const c=s+r,l=c+o;fl(e,{description:n.replace(wc.location.origin,""),endTimestamp:l,op:t.initiatorType?`resource.${t.initiatorType}`:"resource.other",origin:"auto.resource.browser.metrics",startTimestamp:c,data:a})}(e,t,t.name,r,o,n)}})),bl=Math.max(r.length-1,0),function(e){const t=wc.navigator;if(!t)return;const n=t.connection;n&&(n.effectiveType&&e.setTag("effectiveConnectionType",n.effectiveType),n.type&&e.setTag("connectionType",n.type),hl(n.rtt)&&(Sl["connection.rtt"]={value:n.rtt,unit:"millisecond"}));hl(t.deviceMemory)&&e.setTag("deviceMemory",`${t.deviceMemory} GB`);hl(t.hardwareConcurrency)&&e.setTag("hardwareConcurrency",String(t.hardwareConcurrency))}(e),"pageload"===o){!function(e){const t=Tc();if(!t)return;const{responseStart:n,requestStart:r}=t;r<=n&&(cc&&nr.log("[Measurements] Adding TTFB Request Time"),e["ttfb.requestTime"]={value:n-r,unit:"millisecond"})}(Sl),["fcp","fp","lcp"].forEach((e=>{if(!Sl[e]||!s||n>=s)return;const t=Sl[e].value,r=n+gl(t),o=Math.abs(1e3*(r-s)),i=o-t;cc&&nr.log(`[Measurements] Normalized ${e} from ${t} to ${o} (${i})`),Sl[e].value=o}));const t=Sl["mark.fid"];t&&Sl.fid&&(fl(e,{description:"first input delay",endTimestamp:t.value+gl(Sl.fid.value),op:"ui.action",origin:"auto.ui.browser.metrics",startTimestamp:t.value}),delete Sl["mark.fid"]),"fcp"in Sl||delete Sl.cls,Object.keys(Sl).forEach((e=>{ea(e,Sl[e].value,Sl[e].unit)})),function(e){_l&&(cc&&nr.log("[Measurements] Adding LCP Data"),_l.element&&e.setTag("lcp.element",Vn(_l.element)),_l.id&&e.setTag("lcp.id",_l.id),_l.url&&e.setTag("lcp.url",_l.url.trim().slice(0,200)),e.setTag("lcp.size",_l.size));vl&&vl.sources&&(cc&&nr.log("[Measurements] Adding CLS Data"),vl.sources.forEach(((t,n)=>e.setTag(`cls.source.${n+1}`,Vn(t.node)))))}(e)}_l=void 0,vl=void 0,Sl={}}function Cl(e,t,n,r,o,s){const i=s?t[s]:t[`${n}End`],a=t[`${n}Start`];a&&i&&fl(e,{op:"browser",origin:"auto.browser.browser.metrics",description:o||n,startTimestamp:r+gl(a),endTimestamp:r+gl(i)})}function Rl(e,t,n,r){const o=t[n];null!=o&&o<ml&&(e[r]=o)}function Al(e,t,n,r,o="auto.http.browser"){if(!xi()||!e.fetchData)return;const s=t(e.fetchData.url);if(e.endTimestamp&&s){const t=e.fetchData.__span;if(!t)return;const n=r[t];return void(n&&(!function(e,t){if(t.response){Ei(e,t.response.status);const n=t.response&&t.response.headers&&t.response.headers.get("content-length");if(n){const t=parseInt(n);t>0&&e.setAttribute("http.response_content_length",t)}}else t.error&&e.setStatus("internal_error");e.end()}(n,e),delete r[t]))}const i=Gs(),a=Ws(),{method:c,url:l}=e.fetchData,u=function(e){try{return new URL(e).href}catch(e){return}}(l),d=u?Mo(u).host:void 0,p=s?Ci({name:`${c} ${l}`,onlyIfParent:!0,attributes:{url:l,type:"fetch","http.method":c,"http.url":u,"server.address":d,[Ui]:o},op:"http.client"}):void 0;if(p&&(e.fetchData.__span=p.spanContext().spanId,r[p.spanContext().spanId]=p),n(e.fetchData.url)&&a){const t=e.args[0];e.args[1]=e.args[1]||{};const n=e.args[1];n.headers=function(e,t,n,r,o){const s=o||n.getSpan(),i=hi(),{traceId:a,spanId:c,sampled:l,dsc:u}={...i.getPropagationContext(),...n.getPropagationContext()},d=s?As(s):rs(a,c,l),p=Qo(u||(s?Zs(s):Qs(a,t,n))),h=r.headers||("undefined"!=typeof Request&&On(e,Request)?e.headers:void 0);if(h){if("undefined"!=typeof Headers&&On(h,Headers)){const e=new Headers(h);return e.append("sentry-trace",d),p&&e.append(Vo,p),e}if(Array.isArray(h)){const e=[...h,["sentry-trace",d]];return p&&e.push([Vo,p]),e}{const e="baggage"in h?h.baggage:void 0,t=[];return Array.isArray(e)?t.push(...e):e&&t.push(e),p&&t.push(p),{...h,"sentry-trace":d,baggage:t.length>0?t.join(","):void 0}}}return{"sentry-trace":d,baggage:p}}(t,a,i,n,p)}return p}const Ol=["localhost",/^\/(?!\/)/],Ml={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,tracingOrigins:Ol,tracePropagationTargets:Ol};function Nl(e){const{traceFetch:t,traceXHR:n,tracePropagationTargets:r,tracingOrigins:o,shouldCreateSpanForRequest:s,enableHTTPTimings:i}={traceFetch:Ml.traceFetch,traceXHR:Ml.traceXHR,...e},a="function"==typeof s?s:e=>!0,c=e=>function(e,t){return $n(e,t||Ol)}(e,r||o),l={};t&&Xr((e=>{const t=Al(e,a,c,l);if(t){const n=$l(e.fetchData.url),r=n?Mo(n).host:void 0;t.setAttributes({"http.url":n,"server.address":r})}i&&t&&Ll(t)})),n&&fo((e=>{const t=function(e,t,n,r){const o=e.xhr,s=o&&o[ho];if(!xi()||!o||o.__sentry_own_request__||!s)return;const i=t(s.url);if(e.endTimestamp&&i){const e=o.__sentry_xhr_span_id__;if(!e)return;const t=r[e];return void(t&&void 0!==s.status_code&&(Ei(t,s.status_code),t.end(),delete r[e]))}const a=Gs(),c=hi(),l=$l(s.url),u=l?Mo(l).host:void 0,d=i?Ci({name:`${s.method} ${s.url}`,onlyIfParent:!0,attributes:{type:"xhr","http.method":s.method,"http.url":l,url:s.url,"server.address":u,[Ui]:"auto.http.browser"},op:"http.client"}):void 0;d&&(o.__sentry_xhr_span_id__=d.spanContext().spanId,r[o.__sentry_xhr_span_id__]=d);const p=Ws();if(o.setRequestHeader&&n(s.url)&&p){const{traceId:e,spanId:t,sampled:n,dsc:r}={...c.getPropagationContext(),...a.getPropagationContext()};!function(e,t,n){try{e.setRequestHeader("sentry-trace",t),n&&e.setRequestHeader(Vo,n)}catch(e){}}(o,d?As(d):rs(e,t,n),Qo(r||(d?Zs(d):Qs(e,p,a))))}return d}(e,a,c,l);i&&t&&Ll(t)}))}function Ll(e){const{url:t}=Ns(e).data||{};if(!t||"string"!=typeof t)return;const n=rl("resource",(({entries:r})=>{r.forEach((r=>{if(function(e){return"resource"===e.entryType&&"initiatorType"in e&&"string"==typeof e.nextHopProtocol&&("fetch"===e.initiatorType||"xmlhttprequest"===e.initiatorType)}(r)&&r.name.endsWith(t)){(function(e){const{name:t,version:n}=function(e){let t="unknown",n="unknown",r="";for(const o of e){if("/"===o){[t,n]=e.split("/");break}if(!isNaN(Number(o))){t="h"===r?"http":r,n=e.split(r)[1];break}r+=o}r===e&&(t=r);return{name:t,version:n}}(e.nextHopProtocol),r=[];if(r.push(["network.protocol.version",n],["network.protocol.name",t]),!Go)return r;return[...r,["http.request.redirect_start",Dl(e.redirectStart)],["http.request.fetch_start",Dl(e.fetchStart)],["http.request.domain_lookup_start",Dl(e.domainLookupStart)],["http.request.domain_lookup_end",Dl(e.domainLookupEnd)],["http.request.connect_start",Dl(e.connectStart)],["http.request.secure_connection_start",Dl(e.secureConnectionStart)],["http.request.connection_end",Dl(e.connectEnd)],["http.request.request_start",Dl(e.requestStart)],["http.request.response_start",Dl(e.responseStart)],["http.request.response_end",Dl(e.responseEnd)]]})(r).forEach((t=>e.setAttribute(...t))),setTimeout(n)}}))}))}function Dl(e=0){return((Go||performance.timeOrigin)+e)/1e3}function $l(e){try{return new URL(e,wc.location.origin).href}catch(e){return}}const Pl={...qi,markBackgroundTransactions:!0,routingInstrumentation:function(e,t=!0,n=!0){if(!wc||!wc.location)return void(cc&&nr.warn("Could not initialize routing instrumentation due to invalid location"));let r,o=wc.location.href;t&&(r=e({name:wc.location.pathname,startTimestamp:Go?Go/1e3:void 0,op:"pageload",origin:"auto.pageload.browser",metadata:{source:"url"}})),n&&lo((({to:t,from:n})=>{void 0===n&&o&&-1!==o.indexOf(t)?o=void 0:n!==t&&(o=void 0,r&&(cc&&nr.log(`[Tracing] Finishing current transaction with op: ${r.op}`),r.end()),r=e({name:wc.location.pathname,op:"navigation",origin:"auto.navigation.browser",metadata:{source:"url"}}))}))},startTransactionOnLocationChange:!0,startTransactionOnPageLoad:!0,enableLongTask:!0,enableInp:!1,interactionsSampleRate:1,_experiments:{},...Ml};function Fl(e){const t=Xn(`meta[name=${e}]`);return t?t.getAttribute("content"):void 0}function jl(e){const t=e.attributes&&e.attributes[Pi],n=e.data&&e.data[Pi],r=e.metadata&&e.metadata.source;return t||n||r}const Ul={...qi,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableInp:!1,interactionsSampleRate:1,_experiments:{},...Ml};function Bl(e,t){if(!e.emit)return;e.emit("startPageLoadSpan",t);const n=Ri();return"pageload"===(n&&Ns(n).op)?n:void 0}function Hl(e,t){if(!e.emit)return;e.emit("startNavigationSpan",t);const n=Ri();return"navigation"===(n&&Ns(n).op)?n:void 0}function zl(e){const t=Xn(`meta[name=${e}]`);return t?t.getAttribute("content"):void 0}const ql=10;function Wl(e){const t=e.attributes&&e.attributes[Pi],n=e.data&&e.data[Pi],r=e.metadata&&e.metadata.source;return t||n||r}const Gl=Hn;let Vl=0;function Yl(){return Vl>0}function Kl(e,t={},n){if("function"!=typeof e)return e;try{const t=e.__sentry_wrapped__;if(t)return t;if(pr(e))return e}catch(t){return e}const r=function(){const r=Array.prototype.slice.call(arguments);try{n&&"function"==typeof n&&n.apply(this,arguments);const o=r.map((e=>Kl(e,t)));return e.apply(this,o)}catch(e){throw Vl++,setTimeout((()=>{Vl--})),qs((n=>{n.addEventProcessor((e=>(t.mechanism&&(Lr(e,void 0,void 0),Dr(e,t.mechanism)),e.extra={...e.extra,arguments:r},e))),js(e)})),e}};try{for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t])}catch(e){}dr(r,e),ur(e,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get:()=>e.name})}catch(e){}return r}const Xl="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function Jl(e,t){const n=Zl(e,t),r={type:t&&t.name,value:tu(t)};return n.length&&(r.stacktrace={frames:n}),void 0===r.type&&""===r.value&&(r.value="Unrecoverable error caught"),r}function Ql(e,t){return{exception:{values:[Jl(e,t)]}}}function Zl(e,t){const n=t.stacktrace||t.stack||"",r=function(e){if(e){if("number"==typeof e.framesToPop)return e.framesToPop;if(eu.test(e.message))return 1}return 0}(t);try{return e(n,r)}catch(e){}return[]}const eu=/Minified React error #\d+;/i;function tu(e){const t=e&&e.message;return t?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"}function nu(e,t,n,r){const o=ou(e,t,n&&n.syntheticException||void 0,r);return Dr(o),o.level="error",n&&n.event_id&&(o.event_id=n.event_id),Co(o)}function ru(e,t,n="info",r,o){const s=su(e,t,r&&r.syntheticException||void 0,o);return s.level=n,r&&r.event_id&&(s.event_id=r.event_id),Co(s)}function ou(e,t,n,r,o){let s;if(Sn(t)&&t.error){return Ql(e,t.error)}if(wn(t)||bn(t,"DOMException")){const o=t;if("stack"in t)s=Ql(e,t);else{const t=o.name||(wn(o)?"DOMError":"DOMException"),i=o.message?`${t}: ${o.message}`:t;s=su(e,i,n,r),Lr(s,i)}return"code"in o&&(s.tags={...s.tags,"DOMException.code":`${o.code}`}),s}if(vn(t))return Ql(e,t);if(xn(t)||In(t)){return s=function(e,t,n,r){const o=Ws(),s=o&&o.getOptions().normalizeDepth,i={exception:{values:[{type:In(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:iu(t,{isUnhandledRejection:r})}]},extra:{__serialized__:So(t,s)}};if(n){const t=Zl(e,n);t.length&&(i.exception.values[0].stacktrace={frames:t})}return i}(e,t,n,o),Dr(s,{synthetic:!0}),s}return s=su(e,t,n,r),Lr(s,`${t}`,void 0),Dr(s,{synthetic:!0}),s}function su(e,t,n,r){const o={};if(r&&n){const r=Zl(e,n);r.length&&(o.exception={values:[{value:t,stacktrace:{frames:r}}]})}if(En(t)){const{__sentry_template_string__:e,__sentry_template_values__:n}=t;return o.logentry={message:e,params:n},o}return o.message=t,o}function iu(e,{isUnhandledRejection:t}){const n=function(e,t=40){const n=Object.keys(hr(e));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=t)return Nn(n[0],t);for(let e=n.length;e>0;e--){const r=n.slice(0,e).join(", ");if(!(r.length>t))return e===n.length?r:Nn(r,t)}return""}(e),r=t?"promise rejection":"exception";if(Sn(e))return`Event \`ErrorEvent\` captured as ${r} with message \`${e.message}\``;if(In(e)){return`Event \`${function(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch(e){}}(e)}\` (type=${e.type}) captured as ${r}`}return`Object captured as ${r} with keys: ${n}`}function au(e,{metadata:t,tunnel:n,dsn:r}){const o={event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&t.sdk&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!n&&!!r&&{dsn:or(r)}},s=function(e){return[{type:"user_report"},e]}(e);return os(o,[s])}class cu extends ga{constructor(e){!function(e,t,n=[t],r="npm"){const o=e._metadata||{};o.sdk||(o.sdk={name:`sentry.javascript.${t}`,packages:n.map((e=>({name:`${r}:@sentry/${e}`,version:ii}))),version:ii}),e._metadata=o}(e,"browser",["browser"],Gl.SENTRY_SDK_SOURCE||"npm"),super(e),e.sendClientReports&&Gl.document&&Gl.document.addEventListener("visibilitychange",(()=>{"hidden"===Gl.document.visibilityState&&this._flushOutcomes()}))}eventFromException(e,t){return nu(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e,t="info",n){return ru(this._options.stackParser,e,t,n,this._options.attachStacktrace)}captureUserFeedback(e){if(!this._isEnabled())return void(Xl&&nr.warn("SDK not enabled, will not capture user feedback."));const t=au(e,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this._sendEnvelope(t)}_prepareEvent(e,t,n){return e.platform=e.platform||"javascript",super._prepareEvent(e,t,n)}_flushOutcomes(){const e=this._clearOutcomes();if(0===e.length)return void(Xl&&nr.log("No outcomes to send"));if(!this._dsn)return void(Xl&&nr.log("No dsn provided, will not send outcomes"));Xl&&nr.log("Sending outcomes:",e);const t=(n=e,os((r=this._options.tunnel&&or(this._dsn))?{dsn:r}:{},[[{type:"client_report"},{timestamp:o||qo(),discarded_events:n}]]));var n,r,o;this._sendEnvelope(t)}}let lu;function uu(e,t=function(){if(lu)return lu;if(Yr(Gl.fetch))return lu=Gl.fetch.bind(Gl);const e=Gl.document;let t=Gl.fetch;if(e&&"function"==typeof e.createElement)try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n);const r=n.contentWindow;r&&r.fetch&&(t=r.fetch),e.head.removeChild(n)}catch(e){Xl&&nr.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return lu=t.bind(Gl)}()){let n=0,r=0;return ka(e,(function(o){const s=o.body.length;n+=s,r++;const i={body:o.body,method:"POST",referrerPolicy:"origin",headers:e.headers,keepalive:n<=6e4&&r<15,...e.fetchOptions};try{return t(e.url,i).then((e=>(n-=s,r--,{statusCode:e.status,headers:{"x-sentry-rate-limits":e.headers.get("X-Sentry-Rate-Limits"),"retry-after":e.headers.get("Retry-After")}})))}catch(e){return lu=void 0,n-=s,r--,Ro(e)}}))}const du=4;function pu(e){return ka(e,(function(t){return new Ao(((n,r)=>{const o=new XMLHttpRequest;o.onerror=r,o.onreadystatechange=()=>{o.readyState===du&&n({statusCode:o.status,headers:{"x-sentry-rate-limits":o.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":o.getResponseHeader("Retry-After")}})},o.open("POST",e.url);for(const t in e.headers)Object.prototype.hasOwnProperty.call(e.headers,t)&&o.setRequestHeader(t,e.headers[t]);o.send(t.body)}))}))}const hu="?";function fu(e,t,n,r){const o={filename:e,function:t,in_app:!0};return void 0!==n&&(o.lineno=n),void 0!==r&&(o.colno=r),o}const mu=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,gu=/\((\S*)(?::(\d+))(?::(\d+))\)/,yu=[30,e=>{const t=mu.exec(e);if(t){if(t[2]&&0===t[2].indexOf("eval")){const e=gu.exec(t[2]);e&&(t[2]=e[1],t[3]=e[2],t[4]=e[3])}const[e,n]=Ru(t[1]||hu,t[2]);return fu(n,e,t[3]?+t[3]:void 0,t[4]?+t[4]:void 0)}}],_u=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,vu=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,bu=[50,e=>{const t=_u.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const e=vu.exec(t[3]);e&&(t[1]=t[1]||"eval",t[3]=e[1],t[4]=e[2],t[5]="")}let e=t[3],n=t[1]||hu;return[n,e]=Ru(n,e),fu(e,n,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}],Su=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,wu=[40,e=>{const t=Su.exec(e);return t?fu(t[2],t[1]||hu,+t[3],t[4]?+t[4]:void 0):void 0}],ku=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,Eu=[10,e=>{const t=ku.exec(e);return t?fu(t[2],t[3]||hu,+t[1]):void 0}],Tu=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,xu=[20,e=>{const t=Tu.exec(e);return t?fu(t[5],t[3]||t[4]||hu,+t[1],+t[2]):void 0}],Iu=[yu,bu,wu],Cu=Sr(...Iu),Ru=(e,t)=>{const n=-1!==e.indexOf("safari-extension"),r=-1!==e.indexOf("safari-web-extension");return n||r?[-1!==e.indexOf("@")?e.split("@")[0]:hu,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]},Au=1024,Ou="Breadcrumbs",Mu=(e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:Ou,setupOnce(){},setup(e){t.console&&Rr(function(e){return function(t){if(Ws()!==e)return;const n={category:"console",data:{arguments:t.args,logger:"console"},level:Ho(t.level),message:Dn(t.args," ")};if("assert"===t.level){if(!1!==t.args[0])return;n.message=`Assertion failed: ${Dn(t.args.slice(1)," ")||"console.assert"}`,n.data.arguments=t.args.slice(1)}Hs(n,{input:t.args,level:t.level})}}(e)),t.dom&&zr(function(e,t){return function(n){if(Ws()!==e)return;let r,o,s="object"==typeof t?t.serializeAttribute:void 0,i="object"==typeof t&&"number"==typeof t.maxStringLength?t.maxStringLength:void 0;i&&i>Au&&(Xl&&nr.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${i} was configured. Sentry will use 1024 instead.`),i=Au),"string"==typeof s&&(s=[s]);try{const e=n.event,t=function(e){return!!e&&!!e.target}(e)?e.target:e;r=Vn(t,{keyAttrs:s,maxStringLength:i}),o=Jn(t)}catch(e){r="<unknown>"}if(0===r.length)return;const a={category:`ui.${n.name}`,message:r};o&&(a.data={"ui.component_name":o}),Hs(a,{event:n.event,name:n.name,global:n.global})}}(e,t.dom)),t.xhr&&fo(function(e){return function(t){if(Ws()!==e)return;const{startTimestamp:n,endTimestamp:r}=t,o=t.xhr[ho];if(!n||!r||!o)return;const{method:s,url:i,status_code:a,body:c}=o;Hs({category:"xhr",data:{method:s,url:i,status_code:a},type:"http"},{xhr:t.xhr,input:c,startTimestamp:n,endTimestamp:r})}}(e)),t.fetch&&Xr(function(e){return function(t){if(Ws()!==e)return;const{startTimestamp:n,endTimestamp:r}=t;if(r&&(!t.fetchData.url.match(/sentry_key/)||"POST"!==t.fetchData.method))if(t.error){Hs({category:"fetch",data:t.fetchData,level:"error",type:"http"},{data:t.error,input:t.args,startTimestamp:n,endTimestamp:r})}else{const e=t.response;Hs({category:"fetch",data:{...t.fetchData,status_code:e&&e.status},type:"http"},{input:t.args,response:e,startTimestamp:n,endTimestamp:r})}}}(e)),t.history&&lo(function(e){return function(t){if(Ws()!==e)return;let n=t.from,r=t.to;const o=Mo(Gl.location.href);let s=n?Mo(n):void 0;const i=Mo(r);s&&s.path||(s=o),o.protocol===i.protocol&&o.host===i.host&&(r=i.relative),o.protocol===s.protocol&&o.host===s.host&&(n=s.relative),Hs({category:"navigation",data:{from:n,to:r}})}}(e)),t.sentry&&e.on&&e.on("beforeSendEvent",function(e){return function(t){Ws()===e&&Hs({category:"sentry."+("transaction"===t.type?"transaction":"event"),event_id:t.event_id,level:t.level,message:Nr(t)},{event:t})}}(e))}}},Nu=ua(Ou,Mu);const Lu="Dedupe",Du=()=>{let e;return{name:Lu,setupOnce(){},processEvent(t){if(t.type)return t;try{if(function(e,t){if(!t)return!1;if(function(e,t){const n=e.message,r=t.message;if(!n&&!r)return!1;if(n&&!r||!n&&r)return!1;if(n!==r)return!1;if(!Fu(e,t))return!1;if(!Pu(e,t))return!1;return!0}(e,t))return!0;if(function(e,t){const n=ju(t),r=ju(e);if(!n||!r)return!1;if(n.type!==r.type||n.value!==r.value)return!1;if(!Fu(e,t))return!1;if(!Pu(e,t))return!1;return!0}(e,t))return!0;return!1}(t,e))return Xl&&nr.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(e){}return e=t}}},$u=ua(Lu,Du);function Pu(e,t){let n=Uu(e),r=Uu(t);if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;if(r.length!==n.length)return!1;for(let e=0;e<r.length;e++){const t=r[e],o=n[e];if(t.filename!==o.filename||t.lineno!==o.lineno||t.colno!==o.colno||t.function!==o.function)return!1}return!0}function Fu(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;try{return!(n.join("")!==r.join(""))}catch(e){return!1}}function ju(e){return e.exception&&e.exception.values&&e.exception.values[0]}function Uu(e){const t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch(e){return}}const Bu="GlobalHandlers",Hu=(e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:Bu,setupOnce(){Error.stackTraceLimit=50},setup(e){t.onerror&&(!function(e){to((t=>{const{stackParser:n,attachStacktrace:r}=Gu();if(Ws()!==e||Yl())return;const{msg:o,url:s,line:i,column:a,error:c}=t,l=void 0===c&&kn(o)?function(e,t,n,r){const o=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;let s=Sn(e)?e.message:e,i="Error";const a=s.match(o);a&&(i=a[1],s=a[2]);const c={exception:{values:[{type:i,value:s}]}};return qu(c,t,n,r)}(o,s,i,a):qu(ou(n,c||o,void 0,r,!1),s,i,a);l.level="error",Bs(l,{originalException:c,mechanism:{handled:!1,type:"onerror"}})}))}(e),Wu("onerror")),t.onunhandledrejection&&(!function(e){oo((t=>{const{stackParser:n,attachStacktrace:r}=Gu();if(Ws()!==e||Yl())return;const o=function(e){if(Tn(e))return e;const t=e;try{if("reason"in t)return t.reason;if("detail"in t&&"reason"in t.detail)return t.detail.reason}catch(e){}return e}(t),s=Tn(o)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(o)}`}]}}:ou(n,o,void 0,r,!0);s.level="error",Bs(s,{originalException:o,mechanism:{handled:!1,type:"onunhandledrejection"}})}))}(e),Wu("onunhandledrejection"))}}},zu=ua(Bu,Hu);function qu(e,t,n,r){const o=e.exception=e.exception||{},s=o.values=o.values||[],i=s[0]=s[0]||{},a=i.stacktrace=i.stacktrace||{},c=a.frames=a.frames||[],l=isNaN(parseInt(r,10))?void 0:r,u=isNaN(parseInt(n,10))?void 0:n,d=kn(t)&&t.length>0?t:Kn();return 0===c.length&&c.push({colno:l,filename:d,function:"?",in_app:!0,lineno:u}),e}function Wu(e){Xl&&nr.log(`Global Handler attached: ${e}`)}function Gu(){const e=Ws();return e&&e.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const Vu="HttpContext",Yu=()=>({name:Vu,setupOnce(){},preprocessEvent(e){if(!Gl.navigator&&!Gl.location&&!Gl.document)return;const t=e.request&&e.request.url||Gl.location&&Gl.location.href,{referrer:n}=Gl.document||{},{userAgent:r}=Gl.navigator||{},o={...e.request&&e.request.headers,...n&&{Referer:n},...r&&{"User-Agent":r}},s={...e.request,...t&&{url:t},headers:o};e.request=s}}),Ku=ua(Vu,Yu),Xu="LinkedErrors",Ju=(e={})=>{const t=e.limit||5,n=e.key||"cause";return{name:Xu,setupOnce(){},preprocessEvent(e,r,o){const s=o.getOptions();Pn(Jl,s.stackParser,s.maxValueLength,n,t,e,r)}}},Qu=ua(Xu,Ju),Zu=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],ed="TryCatch",td=(e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e};return{name:ed,setupOnce(){t.setTimeout&&lr(Gl,"setTimeout",rd),t.setInterval&&lr(Gl,"setInterval",rd),t.requestAnimationFrame&&lr(Gl,"requestAnimationFrame",od),t.XMLHttpRequest&&"XMLHttpRequest"in Gl&&lr(XMLHttpRequest.prototype,"send",sd);const e=t.eventTarget;if(e){(Array.isArray(e)?e:Zu).forEach(id)}}}},nd=ua(ed,td);function rd(e){return function(...t){const n=t[0];return t[0]=Kl(n,{mechanism:{data:{function:kr(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function od(e){return function(t){return e.apply(this,[Kl(t,{mechanism:{data:{function:"requestAnimationFrame",handler:kr(e)},handled:!1,type:"instrument"}})])}}function sd(e){return function(...t){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach((e=>{e in n&&"function"==typeof n[e]&&lr(n,e,(function(t){const n={mechanism:{data:{function:e,handler:kr(t)},handled:!1,type:"instrument"}},r=pr(t);return r&&(n.mechanism.data.handler=kr(r)),Kl(t,n)}))})),e.apply(this,t)}}function id(e){const t=Gl,n=t[e]&&t[e].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(lr(n,"addEventListener",(function(t){return function(n,r,o){try{"function"==typeof r.handleEvent&&(r.handleEvent=Kl(r.handleEvent,{mechanism:{data:{function:"handleEvent",handler:kr(r),target:e},handled:!1,type:"instrument"}}))}catch(e){}return t.apply(this,[n,Kl(r,{mechanism:{data:{function:"addEventListener",handler:kr(r),target:e},handled:!1,type:"instrument"}}),o])}})),lr(n,"removeEventListener",(function(e){return function(t,n,r){const o=n;try{const n=o&&o.__sentry_wrapped__;n&&e.call(this,t,n,r)}catch(e){}return e.call(this,t,o,r)}})))}const ad=[Wa(),Ja(),td(),Mu(),Hu(),Ju(),Du(),Yu()];function cd(e){return[...ad]}function ld(e={}){void 0===e.defaultIntegrations&&(e.defaultIntegrations=cd()),void 0===e.release&&("string"==typeof __SENTRY_RELEASE__&&(e.release=__SENTRY_RELEASE__),Gl.SENTRY_RELEASE&&Gl.SENTRY_RELEASE.id&&(e.release=Gl.SENTRY_RELEASE.id)),void 0===e.autoSessionTracking&&(e.autoSessionTracking=!0),void 0===e.sendClientReports&&(e.sendClientReports=!0);const t={...e,stackParser:(n=e.stackParser||Cu,Array.isArray(n)?Sr(...n):n),integrations:aa(e),transport:e.transport||(Vr()?uu:pu)};var n;!function(e,t){!0===t.debug&&(bs?nr.enable():tr((()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")}))),Gs().update(t.initialScope);const n=new e(t);Sa(n),function(e){e.init?e.init():e.setupIntegrations&&e.setupIntegrations()}(n)}(cu,t),e.autoSessionTracking&&function(){if(void 0===Gl.document)return void(Xl&&nr.warn("Session tracking in non-browser environment with @sentry/browser is not supported."));Vs({ignoreDuration:!0}),Xs(),lo((({from:e,to:t})=>{void 0!==e&&e!==t&&(Vs({ignoreDuration:!0}),Xs())}))}()}var ud=Object.freeze({__proto__:null,GlobalHandlers:zu,TryCatch:nd,Breadcrumbs:Nu,LinkedErrors:Qu,HttpContext:Ku,Dedupe:$u});const dd=Hn,pd="sentryReplaySession",hd="replay_event",fd="Unable to send Replay",md=15e4,gd=5e3,yd=2e7,_d=36e5;function vd(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],s=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=s(n)):"call"!==o&&"optionalCall"!==o||(n=s(((...e)=>n.call(t,...e))),t=void 0)}return n}var bd;function Sd(e){const t=vd([e,"optionalAccess",e=>e.host]);return Boolean(vd([t,"optionalAccess",e=>e.shadowRoot])===e)}function wd(e){return"[object ShadowRoot]"===Object.prototype.toString.call(e)}function kd(e){try{const n=e.rules||e.cssRules;return n?((t=Array.from(n,Ed).join("")).includes(" background-clip: text;")&&!t.includes(" -webkit-background-clip: text;")&&(t=t.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),t):null}catch(e){return null}var t}function Ed(e){let t;if(function(e){return"styleSheet"in e}(e))try{t=kd(e.styleSheet)||function(e){const{cssText:t}=e;if(t.split('"').length<3)return t;const n=["@import",`url(${JSON.stringify(e.href)})`];return""===e.layerName?n.push("layer"):e.layerName&&n.push(`layer(${e.layerName})`),e.supportsText&&n.push(`supports(${e.supportsText})`),e.media.length&&n.push(e.media.mediaText),n.join(" ")+";"}(e)}catch(e){}else if(function(e){return"selectorText"in e}(e)&&e.selectorText.includes(":"))return function(e){const t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}(e.cssText);return t||e.cssText}!function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(bd||(bd={}));class Td{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(e){if(!e)return-1;const t=vd([this,"access",e=>e.getMeta,"call",t=>t(e),"optionalAccess",e=>e.id]);return r=()=>-1,null!=(n=t)?n:r();var n,r}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach((e=>this.removeNodeFromMap(e)))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){const n=t.id;this.idNodeMap.set(n,e),this.nodeMetaMap.set(e,t)}replace(e,t){const n=this.getNode(e);if(n){const e=this.nodeMetaMap.get(n);e&&this.nodeMetaMap.set(t,e)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function xd({maskInputOptions:e,tagName:t,type:n}){return"OPTION"===t&&(t="SELECT"),Boolean(e[t.toLowerCase()]||n&&e[n]||"password"===n||"INPUT"===t&&!n&&e.text)}function Id({isMasked:e,element:t,value:n,maskInputFn:r}){let o=n||"";return e?(r&&(o=r(o,t)),"*".repeat(o.length)):o}function Cd(e){return e.toLowerCase()}function Rd(e){return e.toUpperCase()}const Ad="__rrweb_original__";function Od(e){const t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?Cd(t):null}function Md(e,t,n){return"INPUT"!==t||"radio"!==n&&"checkbox"!==n?e.value:e.getAttribute("value")||""}let Nd=1;const Ld=new RegExp("[^a-z0-9-_:]"),Dd=-2;function $d(){return Nd++}let Pd,Fd;const jd=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,Ud=/^(?:[a-z+]+:)?\/\//i,Bd=/^www\..*/i,Hd=/^(data:)([^,]*),(.*)/i;function zd(e,t){return(e||"").replace(jd,((e,n,r,o,s,i)=>{const a=r||s||i,c=n||o||"";if(!a)return e;if(Ud.test(a)||Bd.test(a))return`url(${c}${a}${c})`;if(Hd.test(a))return`url(${c}${a}${c})`;if("/"===a[0])return`url(${c}${function(e){let t="";return t=e.indexOf("//")>-1?e.split("/").slice(0,3).join("/"):e.split("/")[0],t=t.split("?")[0],t}(t)+a}${c})`;const l=t.split("/"),u=a.split("/");l.pop();for(const e of u)"."!==e&&(".."===e?l.pop():l.push(e));return`url(${c}${l.join("/")}${c})`}))}const qd=/^[^ \t\n\r\u000c]+/,Wd=/^[, \t\n\r\u000c]+/;function Gd(e,t){if(!t||""===t.trim())return t;const n=e.createElement("a");return n.href=t,n.href}function Vd(e){return Boolean("svg"===e.tagName||e.ownerSVGElement)}function Yd(){const e=document.createElement("a");return e.href="",e.href}function Kd(e,t,n,r,o,s){return r?"src"===n||"href"===n&&("use"!==t||"#"!==r[0])||"xlink:href"===n&&"#"!==r[0]?Gd(e,r):"background"!==n||"table"!==t&&"td"!==t&&"th"!==t?"srcset"===n?function(e,t){if(""===t.trim())return t;let n=0;function r(e){let r;const o=e.exec(t.substring(n));return o?(r=o[0],n+=r.length,r):""}const o=[];for(;r(Wd),!(n>=t.length);){let s=r(qd);if(","===s.slice(-1))s=Gd(e,s.substring(0,s.length-1)),o.push(s);else{let r="";s=Gd(e,s);let i=!1;for(;;){const e=t.charAt(n);if(""===e){o.push((s+r).trim());break}if(i)")"===e&&(i=!1);else{if(","===e){n+=1,o.push((s+r).trim());break}"("===e&&(i=!0)}r+=e,n+=1}}}return o.join(", ")}(e,r):"style"===n?zd(r,Yd()):"object"===t&&"data"===n?Gd(e,r):"function"==typeof s?s(n,r,o):r:Gd(e,r):r}function Xd(e,t,n){return("video"===e||"audio"===e)&&"autoplay"===t}function Jd(e,t,n=1/0,r=0){return e?e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:Jd(e.parentNode,t,n,r+1):-1}function Qd(e,t){return n=>{const r=n;if(null===r)return!1;try{if(e)if("string"==typeof e){if(r.matches(`.${e}`))return!0}else if(function(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}(r,e))return!0;return!(!t||!r.matches(t))}catch(e){return!1}}}function Zd(e,t,n,r,o,s){try{const i=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(null===i)return!1;if("INPUT"===i.tagName){const e=i.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(e))return!0}let a=-1,c=-1;if(s){if(c=Jd(i,Qd(r,o)),c<0)return!0;a=Jd(i,Qd(t,n),c>=0?c:1/0)}else{if(a=Jd(i,Qd(t,n)),a<0)return!1;c=Jd(i,Qd(r,o),a>=0?a:1/0)}return a>=0?!(c>=0)||a<=c:!(c>=0)&&!!s}catch(e){}return!!s}function ep(e,t){const{doc:n,mirror:r,blockClass:o,blockSelector:s,unblockSelector:i,maskAllText:a,maskAttributeFn:c,maskTextClass:l,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:p,inlineStylesheet:h,maskInputOptions:f={},maskTextFn:m,maskInputFn:g,dataURLOptions:y={},inlineImages:_,recordCanvas:v,keepIframeSrcFn:b,newlyAddedElement:S=!1}=t,w=function(e,t){if(!t.hasNode(e))return;const n=t.getId(e);return 1===n?void 0:n}(n,r);switch(e.nodeType){case e.DOCUMENT_NODE:return"CSS1Compat"!==e.compatMode?{type:bd.Document,childNodes:[],compatMode:e.compatMode}:{type:bd.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:bd.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:w};case e.ELEMENT_NODE:return function(e,t){const{doc:n,blockClass:r,blockSelector:o,unblockSelector:s,inlineStylesheet:i,maskInputOptions:a={},maskAttributeFn:c,maskInputFn:l,dataURLOptions:u={},inlineImages:d,recordCanvas:p,keepIframeSrcFn:h,newlyAddedElement:f=!1,rootId:m,maskAllText:g,maskTextClass:y,unmaskTextClass:_,maskTextSelector:v,unmaskTextSelector:b}=t,S=function(e,t,n,r){try{if(r&&e.matches(r))return!1;if("string"==typeof t){if(e.classList.contains(t))return!0}else for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}if(n)return e.matches(n)}catch(e){}return!1}(e,r,o,s),w=function(e){if(e instanceof HTMLFormElement)return"form";const t=Cd(e.tagName);return Ld.test(t)?"div":t}(e);let k={};const E=e.attributes.length;for(let t=0;t<E;t++){const r=e.attributes[t];r.name&&!Xd(w,r.name,r.value)&&(k[r.name]=Kd(n,w,Cd(r.name),r.value,e,c))}if("link"===w&&i){const t=Array.from(n.styleSheets).find((t=>t.href===e.href));let r=null;t&&(r=kd(t)),r&&(delete k.rel,delete k.href,k._cssText=zd(r,t.href))}if("style"===w&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){const t=kd(e.sheet);t&&(k._cssText=zd(t,Yd()))}if("input"===w||"textarea"===w||"select"===w||"option"===w){const t=e,n=Od(t),r=Md(t,Rd(w),n),o=t.checked;if("submit"!==n&&"button"!==n&&r){const e=Zd(t,y,v,_,b,xd({type:n,tagName:Rd(w),maskInputOptions:a}));k.value=Id({isMasked:e,element:t,value:r,maskInputFn:l})}o&&(k.checked=o)}"option"===w&&(e.selected&&!a.select?k.selected=!0:delete k.selected);if("canvas"===w&&p)if("2d"===e.__context)(function(e){const t=e.getContext("2d");if(!t)return!0;for(let n=0;n<e.width;n+=50)for(let r=0;r<e.height;r+=50){const o=t.getImageData,s=Ad in o?o[Ad]:o;if(new Uint32Array(s.call(t,n,r,Math.min(50,e.width-n),Math.min(50,e.height-r)).data.buffer).some((e=>0!==e)))return!1}return!0})(e)||(k.rr_dataURL=e.toDataURL(u.type,u.quality));else if(!("__context"in e)){const t=e.toDataURL(u.type,u.quality),n=document.createElement("canvas");n.width=e.width,n.height=e.height;t!==n.toDataURL(u.type,u.quality)&&(k.rr_dataURL=t)}if("img"===w&&d){Pd||(Pd=n.createElement("canvas"),Fd=Pd.getContext("2d"));const t=e,r=t.crossOrigin;t.crossOrigin="anonymous";const o=()=>{t.removeEventListener("load",o);try{Pd.width=t.naturalWidth,Pd.height=t.naturalHeight,Fd.drawImage(t,0,0),k.rr_dataURL=Pd.toDataURL(u.type,u.quality)}catch(e){console.warn(`Cannot inline img src=${t.currentSrc}! Error: ${e}`)}r?k.crossOrigin=r:t.removeAttribute("crossorigin")};t.complete&&0!==t.naturalWidth?o():t.addEventListener("load",o)}"audio"!==w&&"video"!==w||(k.rr_mediaState=e.paused?"paused":"played",k.rr_mediaCurrentTime=e.currentTime);f||(e.scrollLeft&&(k.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(k.rr_scrollTop=e.scrollTop));if(S){const{width:t,height:n}=e.getBoundingClientRect();k={class:k.class,rr_width:`${t}px`,rr_height:`${n}px`}}"iframe"!==w||h(k.src)||(e.contentDocument||(k.rr_src=k.src),delete k.src);let T;try{customElements.get(w)&&(T=!0)}catch(e){}return{type:bd.Element,tagName:w,attributes:k,childNodes:[],isSVG:Vd(e)||void 0,needBlock:S,rootId:m,isCustom:T}}(e,{doc:n,blockClass:o,blockSelector:s,unblockSelector:i,inlineStylesheet:h,maskAttributeFn:c,maskInputOptions:f,maskInputFn:g,dataURLOptions:y,inlineImages:_,recordCanvas:v,keepIframeSrcFn:b,newlyAddedElement:S,rootId:w,maskAllText:a,maskTextClass:l,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:p});case e.TEXT_NODE:return function(e,t){const{maskAllText:n,maskTextClass:r,unmaskTextClass:o,maskTextSelector:s,unmaskTextSelector:i,maskTextFn:a,maskInputOptions:c,maskInputFn:l,rootId:u}=t,d=e.parentNode&&e.parentNode.tagName;let p=e.textContent;const h="STYLE"===d||void 0,f="SCRIPT"===d||void 0,m="TEXTAREA"===d||void 0;if(h&&p){try{e.nextSibling||e.previousSibling||vd([e,"access",e=>e.parentNode,"access",e=>e.sheet,"optionalAccess",e=>e.cssRules])&&(p=kd(e.parentNode.sheet))}catch(t){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${t}`,e)}p=zd(p,Yd())}f&&(p="SCRIPT_PLACEHOLDER");const g=Zd(e,r,s,o,i,n);h||f||m||!p||!g||(p=a?a(p,e.parentElement):p.replace(/[\S]/g,"*"));m&&p&&(c.textarea||g)&&(p=l?l(p,e.parentNode):p.replace(/[\S]/g,"*"));if("OPTION"===d&&p){p=Id({isMasked:Zd(e,r,s,o,i,xd({type:null,tagName:d,maskInputOptions:c})),element:e,value:p,maskInputFn:l})}return{type:bd.Text,textContent:p||"",isStyle:h,rootId:u}}(e,{maskAllText:a,maskTextClass:l,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:p,maskTextFn:m,maskInputOptions:f,maskInputFn:g,rootId:w});case e.CDATA_SECTION_NODE:return{type:bd.CDATA,textContent:"",rootId:w};case e.COMMENT_NODE:return{type:bd.Comment,textContent:e.textContent||"",rootId:w};default:return!1}}function tp(e){return null==e?"":e.toLowerCase()}function np(e,t){const{doc:n,mirror:r,blockClass:o,blockSelector:s,unblockSelector:i,maskAllText:a,maskTextClass:c,unmaskTextClass:l,maskTextSelector:u,unmaskTextSelector:d,skipChild:p=!1,inlineStylesheet:h=!0,maskInputOptions:f={},maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:_,dataURLOptions:v={},inlineImages:b=!1,recordCanvas:S=!1,onSerialize:w,onIframeLoad:k,iframeLoadTimeout:E=5e3,onStylesheetLoad:T,stylesheetLoadTimeout:x=5e3,keepIframeSrcFn:I=(()=>!1),newlyAddedElement:C=!1}=t;let{preserveWhiteSpace:R=!0}=t;const A=ep(e,{doc:n,mirror:r,blockClass:o,blockSelector:s,maskAllText:a,unblockSelector:i,maskTextClass:c,unmaskTextClass:l,maskTextSelector:u,unmaskTextSelector:d,inlineStylesheet:h,maskInputOptions:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,dataURLOptions:v,inlineImages:b,recordCanvas:S,keepIframeSrcFn:I,newlyAddedElement:C});if(!A)return console.warn(e,"not serialized"),null;let O;O=r.hasNode(e)?r.getId(e):!function(e,t){if(t.comment&&e.type===bd.Comment)return!0;if(e.type===bd.Element){if(t.script&&("script"===e.tagName||"link"===e.tagName&&("preload"===e.attributes.rel||"modulepreload"===e.attributes.rel)&&"script"===e.attributes.as||"link"===e.tagName&&"prefetch"===e.attributes.rel&&"string"==typeof e.attributes.href&&e.attributes.href.endsWith(".js")))return!0;if(t.headFavicon&&("link"===e.tagName&&"shortcut icon"===e.attributes.rel||"meta"===e.tagName&&(tp(e.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===tp(e.attributes.name)||"icon"===tp(e.attributes.rel)||"apple-touch-icon"===tp(e.attributes.rel)||"shortcut icon"===tp(e.attributes.rel))))return!0;if("meta"===e.tagName){if(t.headMetaDescKeywords&&tp(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(tp(e.attributes.property).match(/^(og|twitter|fb):/)||tp(e.attributes.name).match(/^(og|twitter):/)||"pinterest"===tp(e.attributes.name)))return!0;if(t.headMetaRobots&&("robots"===tp(e.attributes.name)||"googlebot"===tp(e.attributes.name)||"bingbot"===tp(e.attributes.name)))return!0;if(t.headMetaHttpEquiv&&void 0!==e.attributes["http-equiv"])return!0;if(t.headMetaAuthorship&&("author"===tp(e.attributes.name)||"generator"===tp(e.attributes.name)||"framework"===tp(e.attributes.name)||"publisher"===tp(e.attributes.name)||"progid"===tp(e.attributes.name)||tp(e.attributes.property).match(/^article:/)||tp(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&("google-site-verification"===tp(e.attributes.name)||"yandex-verification"===tp(e.attributes.name)||"csrf-token"===tp(e.attributes.name)||"p:domain_verify"===tp(e.attributes.name)||"verify-v1"===tp(e.attributes.name)||"verification"===tp(e.attributes.name)||"shopify-checkout-api-token"===tp(e.attributes.name)))return!0}}return!1}(A,_)&&(R||A.type!==bd.Text||A.isStyle||A.textContent.replace(/^\s+|\s+$/gm,"").length)?$d():Dd;const M=Object.assign(A,{id:O});if(r.add(e,M),O===Dd)return null;w&&w(e);let N=!p;if(M.type===bd.Element){N=N&&!M.needBlock,delete M.needBlock;const t=e.shadowRoot;t&&wd(t)&&(M.isShadowHost=!0)}if((M.type===bd.Document||M.type===bd.Element)&&N){_.headWhitespace&&M.type===bd.Element&&"head"===M.tagName&&(R=!1);const t={doc:n,mirror:r,blockClass:o,blockSelector:s,maskAllText:a,unblockSelector:i,maskTextClass:c,unmaskTextClass:l,maskTextSelector:u,unmaskTextSelector:d,skipChild:p,inlineStylesheet:h,maskInputOptions:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:_,dataURLOptions:v,inlineImages:b,recordCanvas:S,preserveWhiteSpace:R,onSerialize:w,onIframeLoad:k,iframeLoadTimeout:E,onStylesheetLoad:T,stylesheetLoadTimeout:x,keepIframeSrcFn:I};for(const n of Array.from(e.childNodes)){const e=np(n,t);e&&M.childNodes.push(e)}if(function(e){return e.nodeType===e.ELEMENT_NODE}(e)&&e.shadowRoot)for(const n of Array.from(e.shadowRoot.childNodes)){const r=np(n,t);r&&(wd(e.shadowRoot)&&(r.isShadow=!0),M.childNodes.push(r))}}return e.parentNode&&Sd(e.parentNode)&&wd(e.parentNode)&&(M.isShadow=!0),M.type===bd.Element&&"iframe"===M.tagName&&function(e,t,n){const r=e.contentWindow;if(!r)return;let o,s=!1;try{o=r.document.readyState}catch(e){return}if("complete"!==o){const r=setTimeout((()=>{s||(t(),s=!0)}),n);return void e.addEventListener("load",(()=>{clearTimeout(r),s=!0,t()}))}const i="about:blank";if(r.location.href!==i||e.src===i||""===e.src)return setTimeout(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}(e,(()=>{const t=e.contentDocument;if(t&&k){const n=np(t,{doc:t,mirror:r,blockClass:o,blockSelector:s,unblockSelector:i,maskAllText:a,maskTextClass:c,unmaskTextClass:l,maskTextSelector:u,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:h,maskInputOptions:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:_,dataURLOptions:v,inlineImages:b,recordCanvas:S,preserveWhiteSpace:R,onSerialize:w,onIframeLoad:k,iframeLoadTimeout:E,onStylesheetLoad:T,stylesheetLoadTimeout:x,keepIframeSrcFn:I});n&&k(e,n)}}),E),M.type===bd.Element&&"link"===M.tagName&&"stylesheet"===M.attributes.rel&&function(e,t,n){let r,o=!1;try{r=e.sheet}catch(e){return}if(r)return;const s=setTimeout((()=>{o||(t(),o=!0)}),n);e.addEventListener("load",(()=>{clearTimeout(s),o=!0,t()}))}(e,(()=>{if(T){const t=np(e,{doc:n,mirror:r,blockClass:o,blockSelector:s,unblockSelector:i,maskAllText:a,maskTextClass:c,unmaskTextClass:l,maskTextSelector:u,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:h,maskInputOptions:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:_,dataURLOptions:v,inlineImages:b,recordCanvas:S,preserveWhiteSpace:R,onSerialize:w,onIframeLoad:k,iframeLoadTimeout:E,onStylesheetLoad:T,stylesheetLoadTimeout:x,keepIframeSrcFn:I});t&&T(e,t)}}),x),M}function rp(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],s=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=s(n)):"call"!==o&&"optionalCall"!==o||(n=s(((...e)=>n.call(t,...e))),t=void 0)}return n}function op(e,t,n=document){const r={capture:!0,passive:!0};return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}const sp="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let ip={map:{},getId:()=>(console.error(sp),-1),getNode:()=>(console.error(sp),null),removeNodeFromMap(){console.error(sp)},has:()=>(console.error(sp),!1),reset(){console.error(sp)}};function ap(e,t,n={}){let r=null,o=0;return function(...s){const i=Date.now();o||!1!==n.leading||(o=i);const a=t-(i-o),c=this;a<=0||a>t?(r&&(!function(...e){Ip("clearTimeout")(...e)}(r),r=null),o=i,e.apply(c,s)):r||!1===n.trailing||(r=Cp((()=>{o=!1===n.leading?0:Date.now(),r=null,e.apply(c,s)}),a))}}function cp(e,t,n,r,o=window){const s=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,r?n:{set(e){Cp((()=>{n.set.call(this,e)}),0),s&&s.set&&s.set.call(this,e)}}),()=>cp(e,t,s||{},!0)}function lp(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],o=n(r);return"function"==typeof o&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=o,()=>{e[t]=r}}catch(e){return()=>{}}}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(ip=new Proxy(ip,{get:(e,t,n)=>("map"===t&&console.error(sp),Reflect.get(e,t,n))}));let up=Date.now;function dp(e){const t=e.document;return{left:t.scrollingElement?t.scrollingElement.scrollLeft:void 0!==e.pageXOffset?e.pageXOffset:rp([t,"optionalAccess",e=>e.documentElement,"access",e=>e.scrollLeft])||rp([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.parentElement,"optionalAccess",e=>e.scrollLeft])||rp([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.scrollLeft])||0,top:t.scrollingElement?t.scrollingElement.scrollTop:void 0!==e.pageYOffset?e.pageYOffset:rp([t,"optionalAccess",e=>e.documentElement,"access",e=>e.scrollTop])||rp([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.parentElement,"optionalAccess",e=>e.scrollTop])||rp([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.scrollTop])||0}}function pp(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function hp(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function fp(e){if(!e)return null;return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}function mp(e,t,n,r,o){if(!e)return!1;const s=fp(e);if(!s)return!1;const i=Qd(t,n);if(!o){const e=r&&s.matches(r);return i(s)&&!e}const a=Jd(s,i);let c=-1;return!(a<0)&&(r&&(c=Jd(s,Qd(null,r))),a>-1&&c<0||a<c)}function gp(e,t){return t.getId(e)===Dd}function yp(e,t){if(Sd(e))return!1;const n=t.getId(e);return!t.has(n)||(!e.parentNode||e.parentNode.nodeType!==e.DOCUMENT_NODE)&&(!e.parentNode||yp(e.parentNode,t))}function _p(e){return Boolean(e.changedTouches)}function vp(e,t){return Boolean("IFRAME"===e.nodeName&&t.getMeta(e))}function bp(e,t){return Boolean("LINK"===e.nodeName&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&"stylesheet"===e.getAttribute("rel")&&t.getMeta(e))}function Sp(e){return Boolean(rp([e,"optionalAccess",e=>e.shadowRoot]))}/[1-9][0-9]{12}/.test(Date.now().toString())||(up=()=>(new Date).getTime());class wp{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(e){return t=this.styleIDMap.get(e),n=()=>-1,null!=t?t:n();var t,n}has(e){return this.styleIDMap.has(e)}add(e,t){if(this.has(e))return this.getId(e);let n;return n=void 0===t?this.id++:t,this.styleIDMap.set(e,n),this.idStyleMap.set(n,e),n}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function kp(e){let t=null;return rp([e,"access",e=>e.getRootNode,"optionalCall",e=>e(),"optionalAccess",e=>e.nodeType])===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(t=e.getRootNode().host),t}function Ep(e){const t=e.ownerDocument;if(!t)return!1;const n=function(e){let t,n=e;for(;t=kp(n);)n=t;return n}(e);return t.contains(n)}function Tp(e){const t=e.ownerDocument;return!!t&&(t.contains(e)||Ep(e))}const xp={};function Ip(e){const t=xp[e];if(t)return t;const n=window.document;let r=window[e];if(n&&"function"==typeof n.createElement)try{const t=n.createElement("iframe");t.hidden=!0,n.head.appendChild(t);const o=t.contentWindow;o&&o[e]&&(r=o[e]),n.head.removeChild(t)}catch(e){}return xp[e]=r.bind(window)}function Cp(...e){return Ip("setTimeout")(...e)}var Rp=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(Rp||{}),Ap=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(Ap||{}),Op=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(Op||{}),Mp=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(Mp||{});function Np(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],s=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=s(n)):"call"!==o&&"optionalCall"!==o||(n=s(((...e)=>n.call(t,...e))),t=void 0)}return n}function Lp(e){return"__ln"in e}class Dp{constructor(){this.length=0,this.head=null,this.tail=null}get(e){if(e>=this.length)throw new Error("Position outside of list range");let t=this.head;for(let n=0;n<e;n++)t=Np([t,"optionalAccess",e=>e.next])||null;return t}addNode(e){const t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&Lp(e.previousSibling)){const n=e.previousSibling.__ln.next;t.next=n,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,n&&(n.previous=t)}else if(e.nextSibling&&Lp(e.nextSibling)&&e.nextSibling.__ln.previous){const n=e.nextSibling.__ln.previous;t.previous=n,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,n&&(n.next=t)}else this.head&&(this.head.previous=t),t.next=this.head,this.head=t;null===t.next&&(this.tail=t),this.length++}removeNode(e){const t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next,t.next?t.next.previous=t.previous:this.tail=t.previous):(this.head=t.next,this.head?this.head.previous=null:this.tail=null),e.__ln&&delete e.__ln,this.length--)}}const $p=(e,t)=>`${e}@${t}`;class Pp{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=e=>{e.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const e=[],t=new Set,n=new Dp,r=e=>{let t=e,n=Dd;for(;n===Dd;)t=t&&t.nextSibling,n=t&&this.mirror.getId(t);return n},o=o=>{if(!o.parentNode||!Tp(o))return;const s=Sd(o.parentNode)?this.mirror.getId(kp(o)):this.mirror.getId(o.parentNode),i=r(o);if(-1===s||-1===i)return n.addNode(o);const a=np(o,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:e=>{vp(e,this.mirror)&&this.iframeManager.addIframe(e),bp(e,this.mirror)&&this.stylesheetManager.trackLinkElement(e),Sp(o)&&this.shadowDomManager.addShadowRoot(o.shadowRoot,this.doc)},onIframeLoad:(e,t)=>{this.iframeManager.attachIframe(e,t),this.shadowDomManager.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{this.stylesheetManager.attachLinkElement(e,t)}});a&&(e.push({parentId:s,nextId:i,node:a}),t.add(a.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const e of this.movedSet)jp(this.removes,e,this.mirror)&&!this.movedSet.has(e.parentNode)||o(e);for(const e of this.addedSet)Bp(this.droppedSet,e)||jp(this.removes,e,this.mirror)?Bp(this.movedSet,e)?o(e):this.droppedSet.add(e):o(e);let s=null;for(;n.length;){let e=null;if(s){const t=this.mirror.getId(s.value.parentNode),n=r(s.value);-1!==t&&-1!==n&&(e=s)}if(!e){let t=n.tail;for(;t;){const n=t;if(t=t.previous,n){const t=this.mirror.getId(n.value.parentNode);if(-1===r(n.value))continue;if(-1!==t){e=n;break}{const t=n.value;if(t.parentNode&&t.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const r=t.parentNode.host;if(-1!==this.mirror.getId(r)){e=n;break}}}}}}if(!e){for(;n.head;)n.removeNode(n.head.value);break}s=e.previous,n.removeNode(e.value),o(e.value)}const i={texts:this.texts.map((e=>({id:this.mirror.getId(e.node),value:e.value}))).filter((e=>!t.has(e.id))).filter((e=>this.mirror.has(e.id))),attributes:this.attributes.map((e=>{const{attributes:t}=e;if("string"==typeof t.style){const n=JSON.stringify(e.styleDiff),r=JSON.stringify(e._unchangedStyles);n.length<t.style.length&&(n+r).split("var(").length===t.style.split("var(").length&&(t.style=e.styleDiff)}return{id:this.mirror.getId(e.node),attributes:t}})).filter((e=>!t.has(e.id))).filter((e=>this.mirror.has(e.id))),removes:this.removes,adds:e};(i.texts.length||i.attributes.length||i.removes.length||i.adds.length)&&(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(i))},this.processMutation=e=>{if(!gp(e.target,this.mirror))switch(e.type){case"characterData":{const t=e.target.textContent;mp(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||t===e.oldValue||this.texts.push({value:Zd(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&t?this.maskTextFn?this.maskTextFn(t,fp(e.target)):t.replace(/[\S]/g,"*"):t,node:e.target});break}case"attributes":{const t=e.target;let n=e.attributeName,r=e.target.getAttribute(n);if("value"===n){const n=Od(t),o=t.tagName;r=Md(t,o,n);const s=xd({maskInputOptions:this.maskInputOptions,tagName:o,type:n});r=Id({isMasked:Zd(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,s),element:t,value:r,maskInputFn:this.maskInputFn})}if(mp(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||r===e.oldValue)return;let o=this.attributeMap.get(e.target);if("IFRAME"===t.tagName&&"src"===n&&!this.keepIframeSrcFn(r)){if(t.contentDocument)return;n="rr_src"}if(o||(o={node:e.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(o),this.attributeMap.set(e.target,o)),"type"===n&&"INPUT"===t.tagName&&"password"===(e.oldValue||"").toLowerCase()&&t.setAttribute("data-rr-is-password","true"),!Xd(t.tagName,n)&&(o.attributes[n]=Kd(this.doc,Cd(t.tagName),Cd(n),r,t,this.maskAttributeFn),"style"===n)){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch(e){this.unattachedDoc=this.doc}const n=this.unattachedDoc.createElement("span");e.oldValue&&n.setAttribute("style",e.oldValue);for(const e of Array.from(t.style)){const r=t.style.getPropertyValue(e),s=t.style.getPropertyPriority(e);r!==n.style.getPropertyValue(e)||s!==n.style.getPropertyPriority(e)?o.styleDiff[e]=""===s?r:[r,s]:o._unchangedStyles[e]=[r,s]}for(const e of Array.from(n.style))""===t.style.getPropertyValue(e)&&(o.styleDiff[e]=!1)}break}case"childList":if(mp(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;e.addedNodes.forEach((t=>this.genAdds(t,e.target))),e.removedNodes.forEach((t=>{const n=this.mirror.getId(t),r=Sd(e.target)?this.mirror.getId(e.target.host):this.mirror.getId(e.target);mp(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||gp(t,this.mirror)||!function(e,t){return-1!==t.getId(e)}(t,this.mirror)||(this.addedSet.has(t)?(Fp(this.addedSet,t),this.droppedSet.add(t)):this.addedSet.has(e.target)&&-1===n||yp(e.target,this.mirror)||(this.movedSet.has(t)&&this.movedMap[$p(n,r)]?Fp(this.movedSet,t):this.removes.push({parentId:r,id:n,isShadow:!(!Sd(e.target)||!wd(e.target))||void 0})),this.mapRemoves.push(t))}))}},this.genAdds=(e,t)=>{if(!this.processedNodeManager.inOtherBuffer(e,this)&&!this.addedSet.has(e)&&!this.movedSet.has(e)){if(this.mirror.hasNode(e)){if(gp(e,this.mirror))return;this.movedSet.add(e);let n=null;t&&this.mirror.hasNode(t)&&(n=this.mirror.getId(t)),n&&-1!==n&&(this.movedMap[$p(this.mirror.getId(e),n)]=!0)}else this.addedSet.add(e),this.droppedSet.delete(e);mp(e,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(e.childNodes.forEach((e=>this.genAdds(e))),Sp(e)&&e.shadowRoot.childNodes.forEach((t=>{this.processedNodeManager.add(t,this),this.genAdds(t,e)})))}}}init(e){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach((t=>{this[t]=e[t]}))}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function Fp(e,t){e.delete(t),t.childNodes.forEach((t=>Fp(e,t)))}function jp(e,t,n){return 0!==e.length&&Up(e,t,n)}function Up(e,t,n){const{parentNode:r}=t;if(!r)return!1;const o=n.getId(r);return!!e.some((e=>e.id===o))||Up(e,r,n)}function Bp(e,t){return 0!==e.size&&Hp(e,t)}function Hp(e,t){const{parentNode:n}=t;return!!n&&(!!e.has(n)||Hp(e,n))}let zp;const qp=e=>{if(!zp)return e;return(...t)=>{try{return e(...t)}catch(e){if(zp&&!0===zp(e))return()=>{};throw e}}};function Wp(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],s=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=s(n)):"call"!==o&&"optionalCall"!==o||(n=s(((...e)=>n.call(t,...e))),t=void 0)}return n}const Gp=[];function Vp(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch(e){}return e&&e.target}function Yp(e,t){const n=new Pp;Gp.push(n),n.init(e);let r=window.MutationObserver||window.__rrMutationObserver;const o=Wp([window,"optionalAccess",e=>e.Zone,"optionalAccess",e=>e.__symbol__,"optionalCall",e=>e("MutationObserver")]);o&&window[o]&&(r=window[o]);const s=new r(qp((t=>{e.onMutation&&!1===e.onMutation(t)||n.processMutations.bind(n)(t)})));return s.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),s}function Kp({mouseInteractionCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:s,sampling:i}){if(!1===i.mouseInteraction)return()=>{};const a=!0===i.mouseInteraction||void 0===i.mouseInteraction?{}:i.mouseInteraction,c=[];let l=null;return Object.keys(Op).filter((e=>Number.isNaN(Number(e))&&!e.endsWith("_Departed")&&!1!==a[e])).forEach((i=>{let a=Cd(i);const u=(t=>i=>{const a=Vp(i);if(mp(a,r,o,s,!0))return;let c=null,u=t;if("pointerType"in i){switch(i.pointerType){case"mouse":c=Mp.Mouse;break;case"touch":c=Mp.Touch;break;case"pen":c=Mp.Pen}c===Mp.Touch?Op[t]===Op.MouseDown?u="TouchStart":Op[t]===Op.MouseUp&&(u="TouchEnd"):Mp.Pen}else _p(i)&&(c=Mp.Touch);null!==c?(l=c,(u.startsWith("Touch")&&c===Mp.Touch||u.startsWith("Mouse")&&c===Mp.Mouse)&&(c=null)):Op[t]===Op.Click&&(c=l,l=null);const d=_p(i)?i.changedTouches[0]:i;if(!d)return;const p=n.getId(a),{clientX:h,clientY:f}=d;qp(e)({type:Op[u],id:p,x:h,y:f,...null!==c&&{pointerType:c}})})(i);if(window.PointerEvent)switch(Op[i]){case Op.MouseDown:case Op.MouseUp:a=a.replace("mouse","pointer");break;case Op.TouchStart:case Op.TouchEnd:return}c.push(op(a,u,t))})),qp((()=>{c.forEach((e=>e()))}))}function Xp({scrollCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:s,sampling:i}){return op("scroll",qp(ap(qp((i=>{const a=Vp(i);if(!a||mp(a,r,o,s,!0))return;const c=n.getId(a);if(a===t&&t.defaultView){const n=dp(t.defaultView);e({id:c,x:n.left,y:n.top})}else e({id:c,x:a.scrollLeft,y:a.scrollTop})})),i.scroll||100)),t)}const Jp=["INPUT","TEXTAREA","SELECT"],Qp=new WeakMap;function Zp({inputCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:s,ignoreClass:i,ignoreSelector:a,maskInputOptions:c,maskInputFn:l,sampling:u,userTriggeredOnInput:d,maskTextClass:p,unmaskTextClass:h,maskTextSelector:f,unmaskTextSelector:m}){function g(e){let n=Vp(e);const u=e.isTrusted,g=n&&Rd(n.tagName);if("OPTION"===g&&(n=n.parentElement),!n||!g||Jp.indexOf(g)<0||mp(n,r,o,s,!0))return;const _=n;if(_.classList.contains(i)||a&&_.matches(a))return;const v=Od(n);let b=Md(_,g,v),S=!1;const w=xd({maskInputOptions:c,tagName:g,type:v}),k=Zd(n,p,f,h,m,w);"radio"!==v&&"checkbox"!==v||(S=n.checked),b=Id({isMasked:k,element:n,value:b,maskInputFn:l}),y(n,d?{text:b,isChecked:S,userTriggered:u}:{text:b,isChecked:S});const E=n.name;"radio"===v&&E&&S&&t.querySelectorAll(`input[type="radio"][name="${E}"]`).forEach((e=>{if(e!==n){const t=Id({isMasked:k,element:e,value:Md(e,g,v),maskInputFn:l});y(e,d?{text:t,isChecked:!S,userTriggered:!1}:{text:t,isChecked:!S})}}))}function y(t,r){const o=Qp.get(t);if(!o||o.text!==r.text||o.isChecked!==r.isChecked){Qp.set(t,r);const o=n.getId(t);qp(e)({...r,id:o})}}const _=("last"===u.input?["change"]:["input","change"]).map((e=>op(e,qp(g),t))),v=t.defaultView;if(!v)return()=>{_.forEach((e=>e()))};const b=v.Object.getOwnPropertyDescriptor(v.HTMLInputElement.prototype,"value"),S=[[v.HTMLInputElement.prototype,"value"],[v.HTMLInputElement.prototype,"checked"],[v.HTMLSelectElement.prototype,"value"],[v.HTMLTextAreaElement.prototype,"value"],[v.HTMLSelectElement.prototype,"selectedIndex"],[v.HTMLOptionElement.prototype,"selected"]];return b&&b.set&&_.push(...S.map((e=>cp(e[0],e[1],{set(){qp(g)({target:this,isTrusted:!1})}},!1,v)))),qp((()=>{_.forEach((e=>e()))}))}function eh(e){return function(e,t){if(oh("CSSGroupingRule")&&e.parentRule instanceof CSSGroupingRule||oh("CSSMediaRule")&&e.parentRule instanceof CSSMediaRule||oh("CSSSupportsRule")&&e.parentRule instanceof CSSSupportsRule||oh("CSSConditionRule")&&e.parentRule instanceof CSSConditionRule){const n=Array.from(e.parentRule.cssRules).indexOf(e);t.unshift(n)}else if(e.parentStyleSheet){const n=Array.from(e.parentStyleSheet.cssRules).indexOf(e);t.unshift(n)}return t}(e,[])}function th(e,t,n){let r,o;return e?(e.ownerNode?r=t.getId(e.ownerNode):o=n.getId(e),{styleId:o,id:r}):{}}function nh({mirror:e,stylesheetManager:t},n){let r=null;r="#document"===n.nodeName?e.getId(n):e.getId(n.host);const o="#document"===n.nodeName?Wp([n,"access",e=>e.defaultView,"optionalAccess",e=>e.Document]):Wp([n,"access",e=>e.ownerDocument,"optionalAccess",e=>e.defaultView,"optionalAccess",e=>e.ShadowRoot]),s=Wp([o,"optionalAccess",e=>e.prototype])?Object.getOwnPropertyDescriptor(Wp([o,"optionalAccess",e=>e.prototype]),"adoptedStyleSheets"):void 0;return null!==r&&-1!==r&&o&&s?(Object.defineProperty(n,"adoptedStyleSheets",{configurable:s.configurable,enumerable:s.enumerable,get(){return Wp([s,"access",e=>e.get,"optionalAccess",e=>e.call,"call",e=>e(this)])},set(e){const n=Wp([s,"access",e=>e.set,"optionalAccess",e=>e.call,"call",t=>t(this,e)]);if(null!==r&&-1!==r)try{t.adoptStyleSheets(e,r)}catch(e){}return n}}),qp((()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:s.configurable,enumerable:s.enumerable,get:s.get,set:s.set})}))):()=>{}}function rh(e,t={}){const n=e.doc.defaultView;if(!n)return()=>{};const r=Yp(e,e.doc),o=function({mousemoveCb:e,sampling:t,doc:n,mirror:r}){if(!1===t.mousemove)return()=>{};const o="number"==typeof t.mousemove?t.mousemove:50,s="number"==typeof t.mousemoveCallback?t.mousemoveCallback:500;let i,a=[];const c=ap(qp((t=>{const n=Date.now()-i;e(a.map((e=>(e.timeOffset-=n,e))),t),a=[],i=null})),s),l=qp(ap(qp((e=>{const t=Vp(e),{clientX:n,clientY:o}=_p(e)?e.changedTouches[0]:e;i||(i=up()),a.push({x:n,y:o,id:r.getId(t),timeOffset:up()-i}),c("undefined"!=typeof DragEvent&&e instanceof DragEvent?Ap.Drag:e instanceof MouseEvent?Ap.MouseMove:Ap.TouchMove)})),o,{trailing:!1})),u=[op("mousemove",l,n),op("touchmove",l,n),op("drag",l,n)];return qp((()=>{u.forEach((e=>e()))}))}(e),s=Kp(e),i=Xp(e),a=function({viewportResizeCb:e},{win:t}){let n=-1,r=-1;return op("resize",qp(ap(qp((()=>{const t=pp(),o=hp();n===t&&r===o||(e({width:Number(o),height:Number(t)}),n=t,r=o)})),200)),t)}(e,{win:n}),c=Zp(e),l=function({mediaInteractionCb:e,blockClass:t,blockSelector:n,unblockSelector:r,mirror:o,sampling:s,doc:i}){const a=qp((i=>ap(qp((s=>{const a=Vp(s);if(!a||mp(a,t,n,r,!0))return;const{currentTime:c,volume:l,muted:u,playbackRate:d}=a;e({type:i,id:o.getId(a),currentTime:c,volume:l,muted:u,playbackRate:d})})),s.media||500))),c=[op("play",a(0),i),op("pause",a(1),i),op("seeked",a(2),i),op("volumechange",a(3),i),op("ratechange",a(4),i)];return qp((()=>{c.forEach((e=>e()))}))}(e),u=function({styleSheetRuleCb:e,mirror:t,stylesheetManager:n},{win:r}){if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return()=>{};const o=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=new Proxy(o,{apply:qp(((r,o,s)=>{const[i,a]=s,{id:c,styleId:l}=th(o,t,n.styleMirror);return(c&&-1!==c||l&&-1!==l)&&e({id:c,styleId:l,adds:[{rule:i,index:a}]}),r.apply(o,s)}))});const s=r.CSSStyleSheet.prototype.deleteRule;let i,a;r.CSSStyleSheet.prototype.deleteRule=new Proxy(s,{apply:qp(((r,o,s)=>{const[i]=s,{id:a,styleId:c}=th(o,t,n.styleMirror);return(a&&-1!==a||c&&-1!==c)&&e({id:a,styleId:c,removes:[{index:i}]}),r.apply(o,s)}))}),r.CSSStyleSheet.prototype.replace&&(i=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=new Proxy(i,{apply:qp(((r,o,s)=>{const[i]=s,{id:a,styleId:c}=th(o,t,n.styleMirror);return(a&&-1!==a||c&&-1!==c)&&e({id:a,styleId:c,replace:i}),r.apply(o,s)}))})),r.CSSStyleSheet.prototype.replaceSync&&(a=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=new Proxy(a,{apply:qp(((r,o,s)=>{const[i]=s,{id:a,styleId:c}=th(o,t,n.styleMirror);return(a&&-1!==a||c&&-1!==c)&&e({id:a,styleId:c,replaceSync:i}),r.apply(o,s)}))}));const c={};sh("CSSGroupingRule")?c.CSSGroupingRule=r.CSSGroupingRule:(sh("CSSMediaRule")&&(c.CSSMediaRule=r.CSSMediaRule),sh("CSSConditionRule")&&(c.CSSConditionRule=r.CSSConditionRule),sh("CSSSupportsRule")&&(c.CSSSupportsRule=r.CSSSupportsRule));const l={};return Object.entries(c).forEach((([r,o])=>{l[r]={insertRule:o.prototype.insertRule,deleteRule:o.prototype.deleteRule},o.prototype.insertRule=new Proxy(l[r].insertRule,{apply:qp(((r,o,s)=>{const[i,a]=s,{id:c,styleId:l}=th(o.parentStyleSheet,t,n.styleMirror);return(c&&-1!==c||l&&-1!==l)&&e({id:c,styleId:l,adds:[{rule:i,index:[...eh(o),a||0]}]}),r.apply(o,s)}))}),o.prototype.deleteRule=new Proxy(l[r].deleteRule,{apply:qp(((r,o,s)=>{const[i]=s,{id:a,styleId:c}=th(o.parentStyleSheet,t,n.styleMirror);return(a&&-1!==a||c&&-1!==c)&&e({id:a,styleId:c,removes:[{index:[...eh(o),i]}]}),r.apply(o,s)}))})})),qp((()=>{r.CSSStyleSheet.prototype.insertRule=o,r.CSSStyleSheet.prototype.deleteRule=s,i&&(r.CSSStyleSheet.prototype.replace=i),a&&(r.CSSStyleSheet.prototype.replaceSync=a),Object.entries(c).forEach((([e,t])=>{t.prototype.insertRule=l[e].insertRule,t.prototype.deleteRule=l[e].deleteRule}))}))}(e,{win:n}),d=nh(e,e.doc),p=function({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:n,stylesheetManager:r},{win:o}){const s=o.CSSStyleDeclaration.prototype.setProperty;o.CSSStyleDeclaration.prototype.setProperty=new Proxy(s,{apply:qp(((o,i,a)=>{const[c,l,u]=a;if(n.has(c))return s.apply(i,[c,l,u]);const{id:d,styleId:p}=th(Wp([i,"access",e=>e.parentRule,"optionalAccess",e=>e.parentStyleSheet]),t,r.styleMirror);return(d&&-1!==d||p&&-1!==p)&&e({id:d,styleId:p,set:{property:c,value:l,priority:u},index:eh(i.parentRule)}),o.apply(i,a)}))});const i=o.CSSStyleDeclaration.prototype.removeProperty;return o.CSSStyleDeclaration.prototype.removeProperty=new Proxy(i,{apply:qp(((o,s,a)=>{const[c]=a;if(n.has(c))return i.apply(s,[c]);const{id:l,styleId:u}=th(Wp([s,"access",e=>e.parentRule,"optionalAccess",e=>e.parentStyleSheet]),t,r.styleMirror);return(l&&-1!==l||u&&-1!==u)&&e({id:l,styleId:u,remove:{property:c},index:eh(s.parentRule)}),o.apply(s,a)}))}),qp((()=>{o.CSSStyleDeclaration.prototype.setProperty=s,o.CSSStyleDeclaration.prototype.removeProperty=i}))}(e,{win:n}),h=e.collectFonts?function({fontCb:e,doc:t}){const n=t.defaultView;if(!n)return()=>{};const r=[],o=new WeakMap,s=n.FontFace;n.FontFace=function(e,t,n){const r=new s(e,t,n);return o.set(r,{family:e,buffer:"string"!=typeof t,descriptors:n,fontSource:"string"==typeof t?t:JSON.stringify(Array.from(new Uint8Array(t)))}),r};const i=lp(t.fonts,"add",(function(t){return function(n){return Cp(qp((()=>{const t=o.get(n);t&&(e(t),o.delete(n))})),0),t.apply(this,[n])}}));return r.push((()=>{n.FontFace=s})),r.push(i),qp((()=>{r.forEach((e=>e()))}))}(e):()=>{},f=function(e){const{doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:s,selectionCb:i}=e;let a=!0;const c=qp((()=>{const e=t.getSelection();if(!e||a&&Wp([e,"optionalAccess",e=>e.isCollapsed]))return;a=e.isCollapsed||!1;const c=[],l=e.rangeCount||0;for(let t=0;t<l;t++){const i=e.getRangeAt(t),{startContainer:a,startOffset:l,endContainer:u,endOffset:d}=i;mp(a,r,o,s,!0)||mp(u,r,o,s,!0)||c.push({start:n.getId(a),startOffset:l,end:n.getId(u),endOffset:d})}i({ranges:c})}));return c(),op("selectionchange",c)}(e),m=function({doc:e,customElementCb:t}){const n=e.defaultView;return n&&n.customElements?lp(n.customElements,"define",(function(e){return function(n,r,o){try{t({define:{name:n}})}catch(e){}return e.apply(this,[n,r,o])}})):()=>{}}(e),g=[];for(const t of e.plugins)g.push(t.observer(t.callback,n,t.options));return qp((()=>{Gp.forEach((e=>e.reset())),r.disconnect(),o(),s(),i(),a(),c(),l(),u(),d(),p(),h(),f(),m(),g.forEach((e=>e()))}))}function oh(e){return void 0!==window[e]}function sh(e){return Boolean(void 0!==window[e]&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class ih{constructor(e){this.generateIdFn=e,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(e,t,n,r){const o=n||this.getIdToRemoteIdMap(e),s=r||this.getRemoteIdToIdMap(e);let i=o.get(t);return i||(i=this.generateIdFn(),o.set(t,i),s.set(i,t)),i}getIds(e,t){const n=this.getIdToRemoteIdMap(e),r=this.getRemoteIdToIdMap(e);return t.map((t=>this.getId(e,t,n,r)))}getRemoteId(e,t,n){const r=n||this.getRemoteIdToIdMap(e);if("number"!=typeof t)return t;const o=r.get(t);return o||-1}getRemoteIds(e,t){const n=this.getRemoteIdToIdMap(e);return t.map((t=>this.getRemoteId(e,t,n)))}reset(e){if(!e)return this.iframeIdToRemoteIdMap=new WeakMap,void(this.iframeRemoteIdToIdMap=new WeakMap);this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}getIdToRemoteIdMap(e){let t=this.iframeIdToRemoteIdMap.get(e);return t||(t=new Map,this.iframeIdToRemoteIdMap.set(e,t)),t}getRemoteIdToIdMap(e){let t=this.iframeRemoteIdToIdMap.get(e);return t||(t=new Map,this.iframeRemoteIdToIdMap.set(e,t)),t}}function ah(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],s=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=s(n)):"call"!==o&&"optionalCall"!==o||(n=s(((...e)=>n.call(t,...e))),t=void 0)}return n}class ch{constructor(){this.crossOriginIframeMirror=new ih($d),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class lh{constructor(e){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new ih($d),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new ih(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,t){this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),ah([this,"access",e=>e.loadListener,"optionalCall",t=>t(e)]),e.contentDocument&&e.contentDocument.adoptedStyleSheets&&e.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(e.contentDocument.adoptedStyleSheets,this.mirror.getId(e.contentDocument))}handleMessage(e){const t=e;if("rrweb"!==t.data.type||t.origin!==t.data.origin)return;if(!e.source)return;const n=this.crossOriginIframeMap.get(e.source);if(!n)return;const r=this.transformCrossOriginEvent(n,t.data.event);r&&this.wrappedEmit(r,t.data.isCheckout)}transformCrossOriginEvent(e,t){switch(t.type){case Rp.FullSnapshot:{this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(t.data.node,e);const n=t.data.node.id;return this.crossOriginIframeRootIdMap.set(e,n),this.patchRootIdOnNode(t.data.node,n),{timestamp:t.timestamp,type:Rp.IncrementalSnapshot,data:{source:Ap.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:t.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case Rp.Meta:case Rp.Load:case Rp.DomContentLoaded:return!1;case Rp.Plugin:return t;case Rp.Custom:return this.replaceIds(t.data.payload,e,["id","parentId","previousId","nextId"]),t;case Rp.IncrementalSnapshot:switch(t.data.source){case Ap.Mutation:return t.data.adds.forEach((t=>{this.replaceIds(t,e,["parentId","nextId","previousId"]),this.replaceIdOnNode(t.node,e);const n=this.crossOriginIframeRootIdMap.get(e);n&&this.patchRootIdOnNode(t.node,n)})),t.data.removes.forEach((t=>{this.replaceIds(t,e,["parentId","id"])})),t.data.attributes.forEach((t=>{this.replaceIds(t,e,["id"])})),t.data.texts.forEach((t=>{this.replaceIds(t,e,["id"])})),t;case Ap.Drag:case Ap.TouchMove:case Ap.MouseMove:return t.data.positions.forEach((t=>{this.replaceIds(t,e,["id"])})),t;case Ap.ViewportResize:return!1;case Ap.MediaInteraction:case Ap.MouseInteraction:case Ap.Scroll:case Ap.CanvasMutation:case Ap.Input:return this.replaceIds(t.data,e,["id"]),t;case Ap.StyleSheetRule:case Ap.StyleDeclaration:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleId"]),t;case Ap.Font:return t;case Ap.Selection:return t.data.ranges.forEach((t=>{this.replaceIds(t,e,["start","end"])})),t;case Ap.AdoptedStyleSheet:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleIds"]),ah([t,"access",e=>e.data,"access",e=>e.styles,"optionalAccess",e=>e.forEach,"call",t=>t((t=>{this.replaceStyleIds(t,e,["styleId"])}))]),t}}return!1}replace(e,t,n,r){for(const o of r)(Array.isArray(t[o])||"number"==typeof t[o])&&(Array.isArray(t[o])?t[o]=e.getIds(n,t[o]):t[o]=e.getId(n,t[o]));return t}replaceIds(e,t,n){return this.replace(this.crossOriginIframeMirror,e,t,n)}replaceStyleIds(e,t,n){return this.replace(this.crossOriginIframeStyleMirror,e,t,n)}replaceIdOnNode(e,t){this.replaceIds(e,t,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach((e=>{this.replaceIdOnNode(e,t)}))}patchRootIdOnNode(e,t){e.type===bd.Document||e.rootId||(e.rootId=t),"childNodes"in e&&e.childNodes.forEach((e=>{this.patchRootIdOnNode(e,t)}))}}class uh{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class dh{constructor(e){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(e,t){if(!wd(e))return;if(this.shadowDoms.has(e))return;this.shadowDoms.add(e);const n=Yp({...this.bypassOptions,doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},e);this.restoreHandlers.push((()=>n.disconnect())),this.restoreHandlers.push(Xp({...this.bypassOptions,scrollCb:this.scrollCb,doc:e,mirror:this.mirror})),Cp((()=>{e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(e.host)),this.restoreHandlers.push(nh({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e))}),0)}observeAttachShadow(e){e.contentWindow&&e.contentDocument&&this.patchAttachShadow(e.contentWindow.Element,e.contentDocument)}patchAttachShadow(e,t){const n=this;this.restoreHandlers.push(lp(e.prototype,"attachShadow",(function(e){return function(r){const o=e.call(this,r);return this.shadowRoot&&Tp(this)&&n.addShadowRoot(this.shadowRoot,t),o}})))}reset(){this.restoreHandlers.forEach((e=>{try{e()}catch(e){}})),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}class ph{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}}class hh{constructor(e){this.trackedLinkElements=new WeakSet,this.styleMirror=new wp,this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}attachLinkElement(e,t){"_cssText"in t.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:t.attributes}]}),this.trackLinkElement(e)}trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}adoptStyleSheets(e,t){if(0===e.length)return;const n={id:t,styleIds:[]},r=[];for(const t of e){let e;this.styleMirror.has(t)?e=this.styleMirror.getId(t):(e=this.styleMirror.add(t),r.push({styleId:e,rules:Array.from(t.rules||CSSRule,((e,t)=>({rule:Ed(e),index:t})))})),n.styleIds.push(e)}r.length>0&&(n.styles=r),this.adoptedStyleSheetCb(n)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}}class fh{constructor(){this.nodeMap=new WeakMap,this.loop=!0,this.periodicallyClear()}periodicallyClear(){!function(...e){Ip("requestAnimationFrame")(...e)}((()=>{this.clear(),this.loop&&this.periodicallyClear()}))}inOtherBuffer(e,t){const n=this.nodeMap.get(e);return n&&Array.from(n).some((e=>e!==t))}add(e,t){this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(t))}clear(){this.nodeMap=new WeakMap}destroy(){this.loop=!1}}let mh,gh;const yh=new Td;function _h(e={}){const{emit:t,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:o="rr-block",blockSelector:s=null,unblockSelector:i=null,ignoreClass:a="rr-ignore",ignoreSelector:c=null,maskAllText:l=!1,maskTextClass:u="rr-mask",unmaskTextClass:d=null,maskTextSelector:p=null,unmaskTextSelector:h=null,inlineStylesheet:f=!0,maskAllInputs:m,maskInputOptions:g,slimDOMOptions:y,maskAttributeFn:_,maskInputFn:v,maskTextFn:b,maxCanvasSize:S=null,packFn:w,sampling:k={},dataURLOptions:E={},mousemoveWait:T,recordCanvas:x=!1,recordCrossOriginIframes:I=!1,recordAfter:C=("DOMContentLoaded"===e.recordAfter?e.recordAfter:"load"),userTriggeredOnInput:R=!1,collectFonts:A=!1,inlineImages:O=!1,plugins:M,keepIframeSrcFn:N=(()=>!1),ignoreCSSAttributes:L=new Set([]),errorHandler:D,onMutation:$,getCanvasManager:P}=e;zp=D;const F=!I||window.parent===window;let j=!1;if(!F)try{window.parent.document&&(j=!1)}catch(e){j=!0}if(F&&!t)throw new Error("emit function is required");void 0!==T&&void 0===k.mousemove&&(k.mousemove=T),yh.reset();const U=!0===m?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:void 0!==g?g:{},B=!0===y||"all"===y?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===y,headMetaDescKeywords:"all"===y}:y||{};let H;!function(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...e)=>{let t=e[0];if(!(0 in e))throw new TypeError("1 argument is required");do{if(this===t)return!0}while(t=t&&t.parentNode);return!1})}();let z=0;const q=e=>{for(const t of M||[])t.eventProcessor&&(e=t.eventProcessor(e));return w&&!j&&(e=w(e)),e};mh=(e,o)=>{const s=e;if(s.timestamp=up(),!vs([Gp,"access",e=>e[0],"optionalAccess",e=>e.isFrozen,"call",e=>e()])||s.type===Rp.FullSnapshot||s.type===Rp.IncrementalSnapshot&&s.data.source===Ap.Mutation||Gp.forEach((e=>e.unfreeze())),F)vs([t,"optionalCall",e=>e(q(s),o)]);else if(j){const e={type:"rrweb",event:q(s),origin:window.location.origin,isCheckout:o};window.parent.postMessage(e,"*")}if(s.type===Rp.FullSnapshot)H=s,z=0;else if(s.type===Rp.IncrementalSnapshot){if(s.data.source===Ap.Mutation&&s.data.isAttachIframe)return;z++;const e=r&&z>=r,t=n&&H&&s.timestamp-H.timestamp>n;(e||t)&&Z(!0)}};const W=e=>{mh({type:Rp.IncrementalSnapshot,data:{source:Ap.Mutation,...e}})},G=e=>mh({type:Rp.IncrementalSnapshot,data:{source:Ap.Scroll,...e}}),V=e=>mh({type:Rp.IncrementalSnapshot,data:{source:Ap.CanvasMutation,...e}}),Y=new hh({mutationCb:W,adoptedStyleSheetCb:e=>mh({type:Rp.IncrementalSnapshot,data:{source:Ap.AdoptedStyleSheet,...e}})}),K="boolean"==typeof __RRWEB_EXCLUDE_IFRAME__&&__RRWEB_EXCLUDE_IFRAME__?new ch:new lh({mirror:yh,mutationCb:W,stylesheetManager:Y,recordCrossOriginIframes:I,wrappedEmit:mh});for(const e of M||[])e.getMirror&&e.getMirror({nodeMirror:yh,crossOriginIframeMirror:K.crossOriginIframeMirror,crossOriginIframeStyleMirror:K.crossOriginIframeStyleMirror});const X=new fh,J=function(e,t){try{return e?e(t):new ph}catch(e){return console.warn("Unable to initialize CanvasManager"),new ph}}(P,{mirror:yh,win:window,mutationCb:e=>mh({type:Rp.IncrementalSnapshot,data:{source:Ap.CanvasMutation,...e}}),recordCanvas:x,blockClass:o,blockSelector:s,unblockSelector:i,maxCanvasSize:S,sampling:k.canvas,dataURLOptions:E,errorHandler:D}),Q="boolean"==typeof __RRWEB_EXCLUDE_SHADOW_DOM__&&__RRWEB_EXCLUDE_SHADOW_DOM__?new uh:new dh({mutationCb:W,scrollCb:G,bypassOptions:{onMutation:$,blockClass:o,blockSelector:s,unblockSelector:i,maskAllText:l,maskTextClass:u,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:h,inlineStylesheet:f,maskInputOptions:U,dataURLOptions:E,maskAttributeFn:_,maskTextFn:b,maskInputFn:v,recordCanvas:x,inlineImages:O,sampling:k,slimDOMOptions:B,iframeManager:K,stylesheetManager:Y,canvasManager:J,keepIframeSrcFn:N,processedNodeManager:X},mirror:yh}),Z=(e=!1)=>{mh({type:Rp.Meta,data:{href:window.location.href,width:hp(),height:pp()}},e),Y.reset(),Q.init(),Gp.forEach((e=>e.lock()));const t=function(e,t){const{mirror:n=new Td,blockClass:r="rr-block",blockSelector:o=null,unblockSelector:s=null,maskAllText:i=!1,maskTextClass:a="rr-mask",unmaskTextClass:c=null,maskTextSelector:l=null,unmaskTextSelector:u=null,inlineStylesheet:d=!0,inlineImages:p=!1,recordCanvas:h=!1,maskAllInputs:f=!1,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOM:_=!1,dataURLOptions:v,preserveWhiteSpace:b,onSerialize:S,onIframeLoad:w,iframeLoadTimeout:k,onStylesheetLoad:E,stylesheetLoadTimeout:T,keepIframeSrcFn:x=(()=>!1)}=t||{};return np(e,{doc:e,mirror:n,blockClass:r,blockSelector:o,unblockSelector:s,maskAllText:i,maskTextClass:a,unmaskTextClass:c,maskTextSelector:l,unmaskTextSelector:u,skipChild:!1,inlineStylesheet:d,maskInputOptions:!0===f?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:!1===f?{}:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:!0===_||"all"===_?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===_,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===_?{}:_,dataURLOptions:v,inlineImages:p,recordCanvas:h,preserveWhiteSpace:b,onSerialize:S,onIframeLoad:w,iframeLoadTimeout:k,onStylesheetLoad:E,stylesheetLoadTimeout:T,keepIframeSrcFn:x,newlyAddedElement:!1})}(document,{mirror:yh,blockClass:o,blockSelector:s,unblockSelector:i,maskAllText:l,maskTextClass:u,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:h,inlineStylesheet:f,maskAllInputs:U,maskAttributeFn:_,maskInputFn:v,maskTextFn:b,slimDOM:B,dataURLOptions:E,recordCanvas:x,inlineImages:O,onSerialize:e=>{vp(e,yh)&&K.addIframe(e),bp(e,yh)&&Y.trackLinkElement(e),Sp(e)&&Q.addShadowRoot(e.shadowRoot,document)},onIframeLoad:(e,t)=>{K.attachIframe(e,t),Q.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{Y.attachLinkElement(e,t)},keepIframeSrcFn:N});if(!t)return console.warn("Failed to snapshot the document");mh({type:Rp.FullSnapshot,data:{node:t,initialOffset:dp(window)}}),Gp.forEach((e=>e.unlock())),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&Y.adoptStyleSheets(document.adoptedStyleSheets,yh.getId(document))};gh=Z;try{const e=[],t=e=>qp(rh)({onMutation:$,mutationCb:W,mousemoveCb:(e,t)=>mh({type:Rp.IncrementalSnapshot,data:{source:t,positions:e}}),mouseInteractionCb:e=>mh({type:Rp.IncrementalSnapshot,data:{source:Ap.MouseInteraction,...e}}),scrollCb:G,viewportResizeCb:e=>mh({type:Rp.IncrementalSnapshot,data:{source:Ap.ViewportResize,...e}}),inputCb:e=>mh({type:Rp.IncrementalSnapshot,data:{source:Ap.Input,...e}}),mediaInteractionCb:e=>mh({type:Rp.IncrementalSnapshot,data:{source:Ap.MediaInteraction,...e}}),styleSheetRuleCb:e=>mh({type:Rp.IncrementalSnapshot,data:{source:Ap.StyleSheetRule,...e}}),styleDeclarationCb:e=>mh({type:Rp.IncrementalSnapshot,data:{source:Ap.StyleDeclaration,...e}}),canvasMutationCb:V,fontCb:e=>mh({type:Rp.IncrementalSnapshot,data:{source:Ap.Font,...e}}),selectionCb:e=>{mh({type:Rp.IncrementalSnapshot,data:{source:Ap.Selection,...e}})},customElementCb:e=>{mh({type:Rp.IncrementalSnapshot,data:{source:Ap.CustomElement,...e}})},blockClass:o,ignoreClass:a,ignoreSelector:c,maskAllText:l,maskTextClass:u,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:h,maskInputOptions:U,inlineStylesheet:f,sampling:k,recordCanvas:x,inlineImages:O,userTriggeredOnInput:R,collectFonts:A,doc:e,maskAttributeFn:_,maskInputFn:v,maskTextFn:b,keepIframeSrcFn:N,blockSelector:s,unblockSelector:i,slimDOMOptions:B,dataURLOptions:E,mirror:yh,iframeManager:K,stylesheetManager:Y,shadowDomManager:Q,processedNodeManager:X,canvasManager:J,ignoreCSSAttributes:L,plugins:vs([M,"optionalAccess",e=>e.filter,"call",e=>e((e=>e.observer)),"optionalAccess",e=>e.map,"call",e=>e((e=>({observer:e.observer,options:e.options,callback:t=>mh({type:Rp.Plugin,data:{plugin:e.name,payload:t}})})))])||[]},{});K.addLoadListener((n=>{try{e.push(t(n.contentDocument))}catch(e){console.warn(e)}}));const n=()=>{Z(),e.push(t(document))};return"interactive"===document.readyState||"complete"===document.readyState?n():(e.push(op("DOMContentLoaded",(()=>{mh({type:Rp.DomContentLoaded,data:{}}),"DOMContentLoaded"===C&&n()}))),e.push(op("load",(()=>{mh({type:Rp.Load,data:{}}),"load"===C&&n()}),window))),()=>{e.forEach((e=>e())),X.destroy(),gh=void 0,zp=void 0}}catch(e){console.warn(e)}}_h.mirror=yh,_h.takeFullSnapshot=function(e){if(!gh)throw new Error("please take full snapshot after start recording");gh(e)};const vh=3;function bh(e){return e>9999999999?e:1e3*e}function Sh(e){return e>9999999999?e/1e3:e}function wh(e,t){"sentry.transaction"!==t.category&&(["ui.click","ui.input"].includes(t.category)?e.triggerUserActivity():e.checkAndHandleExpiredSession(),e.addUpdate((()=>(e.throttledAddEvent({type:Rp.Custom,timestamp:1e3*(t.timestamp||0),data:{tag:"breadcrumb",payload:bo(t,10,1e3)}}),"console"===t.category))))}const kh="button,a";function Eh(e){return e.closest(kh)||e}function Th(e){const t=xh(e);return t&&t instanceof Element?Eh(t):t}function xh(e){return function(e){return"object"==typeof e&&!!e&&"target"in e}(e)?e.target:e}let Ih;function Ch(e){return Ih||(Ih=[],lr(dd,"open",(function(e){return function(...t){if(Ih)try{Ih.forEach((e=>e()))}catch(e){}return e.apply(dd,t)}}))),Ih.push(e),()=>{const t=Ih?Ih.indexOf(e):-1;t>-1&&Ih.splice(t,1)}}class Rh{constructor(e,t,n=wh){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=t.timeout/1e3,this._threshold=t.threshold/1e3,this._scollTimeout=t.scrollTimeout/1e3,this._replay=e,this._ignoreSelector=t.ignoreSelector,this._addBreadcrumbEvent=n}addListeners(){const e=Ch((()=>{this._lastMutation=Oh()}));this._teardown=()=>{e(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(e,t){if(function(e,t){if(!Ah.includes(e.tagName))return!0;if("INPUT"===e.tagName&&!["submit","button"].includes(e.getAttribute("type")||""))return!0;if("A"===e.tagName&&(e.hasAttribute("download")||e.hasAttribute("target")&&"_self"!==e.getAttribute("target")))return!0;if(t&&e.matches(t))return!0;return!1}(t,this._ignoreSelector)||!function(e){return!(!e.data||"number"!=typeof e.data.nodeId||!e.timestamp)}(e))return;const n={timestamp:Sh(e.timestamp),clickBreadcrumb:e,clickCount:0,node:t};this._clicks.some((e=>e.node===n.node&&Math.abs(e.timestamp-n.timestamp)<1))||(this._clicks.push(n),1===this._clicks.length&&this._scheduleCheckClicks())}registerMutation(e=Date.now()){this._lastMutation=Sh(e)}registerScroll(e=Date.now()){this._lastScroll=Sh(e)}registerClick(e){const t=Eh(e);this._handleMultiClick(t)}_handleMultiClick(e){this._getClicks(e).forEach((e=>{e.clickCount++}))}_getClicks(e){return this._clicks.filter((t=>t.node===e))}_checkClicks(){const e=[],t=Oh();this._clicks.forEach((n=>{!n.mutationAfter&&this._lastMutation&&(n.mutationAfter=n.timestamp<=this._lastMutation?this._lastMutation-n.timestamp:void 0),!n.scrollAfter&&this._lastScroll&&(n.scrollAfter=n.timestamp<=this._lastScroll?this._lastScroll-n.timestamp:void 0),n.timestamp+this._timeout<=t&&e.push(n)}));for(const t of e){const e=this._clicks.indexOf(t);e>-1&&(this._generateBreadcrumbs(t),this._clicks.splice(e,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(e){const t=this._replay,n=e.scrollAfter&&e.scrollAfter<=this._scollTimeout,r=e.mutationAfter&&e.mutationAfter<=this._threshold,o=!n&&!r,{clickCount:s,clickBreadcrumb:i}=e;if(o){const n=1e3*Math.min(e.mutationAfter||this._timeout,this._timeout),r=n<1e3*this._timeout?"mutation":"timeout",o={type:"default",message:i.message,timestamp:i.timestamp,category:"ui.slowClickDetected",data:{...i.data,url:dd.location.href,route:t.getCurrentRoute(),timeAfterClickMs:n,endReason:r,clickCount:s||1}};this._addBreadcrumbEvent(t,o)}else if(s>1){const e={type:"default",message:i.message,timestamp:i.timestamp,category:"ui.multiClick",data:{...i.data,url:dd.location.href,route:t.getCurrentRoute(),clickCount:s,metric:!0}};this._addBreadcrumbEvent(t,e)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=setTimeout((()=>this._checkClicks()),1e3)}}const Ah=["A","BUTTON","INPUT"];function Oh(){return Date.now()/1e3}function Mh(e,t){try{if(!function(e){return e.type===vh}(t))return;const{source:n}=t.data;if(n===Ap.Mutation&&e.registerMutation(t.timestamp),n===Ap.Scroll&&e.registerScroll(t.timestamp),function(e){return e.data.source===Ap.MouseInteraction}(t)){const{type:n,id:r}=t.data,o=_h.mirror.getNode(r);o instanceof HTMLElement&&n===Op.Click&&e.registerClick(o)}}catch(e){}}function Nh(e){return{timestamp:Date.now()/1e3,type:"default",...e}}var Lh;!function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(Lh||(Lh={}));const Dh=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function $h(e){const t={};for(const n in e)if(Dh.has(n)){let r=n;"data-testid"!==n&&"data-test-id"!==n||(r="testId"),t[r]=e[n]}return t}const Ph=e=>t=>{if(!e.isEnabled())return;const n=function(e){const{target:t,message:n}=function(e){const t="click"===e.name;let n,r=null;try{r=t?Th(e.event):xh(e.event),n=Vn(r,{maxStringLength:200})||"<unknown>"}catch(e){n="<unknown>"}return{target:r,message:n}}(e);return Nh({category:`ui.${e.name}`,...Fh(t,n)})}(t);if(!n)return;const r="click"===t.name,o=r?t.event:void 0;var s,i,a;!(r&&e.clickDetector&&o&&o.target)||o.altKey||o.metaKey||o.ctrlKey||o.shiftKey||(s=e.clickDetector,i=n,a=Th(t.event),s.handleClick(i,a)),wh(e,n)};function Fh(e,t){const n=_h.mirror.getId(e),r=n&&_h.mirror.getNode(n),o=r&&_h.mirror.getMeta(r),s=o&&function(e){return e.type===Lh.Element}(o)?o:null;return{message:t,data:s?{nodeId:n,node:{id:n,tagName:s.tagName,textContent:Array.from(s.childNodes).map((e=>e.type===Lh.Text&&e.textContent)).filter(Boolean).map((e=>e.trim())).join(""),attributes:$h(s.attributes)}}:{}}}function jh(e,t){if(!e.isEnabled())return;e.updateUserActivity();const n=function(e){const{metaKey:t,shiftKey:n,ctrlKey:r,altKey:o,key:s,target:i}=e;if(!i||function(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||e.isContentEditable}(i)||!s)return null;const a=t||r||o,c=1===s.length;if(!a&&c)return null;const l=Vn(i,{maxStringLength:200})||"<unknown>",u=Fh(i,l);return Nh({category:"ui.keyDown",message:l,data:{...u.data,metaKey:t,shiftKey:n,ctrlKey:r,altKey:o,key:s}})}(t);n&&wh(e,n)}const Uh={resource:function(e){const{entryType:t,initiatorType:n,name:r,responseEnd:o,startTime:s,decodedBodySize:i,encodedBodySize:a,responseStatus:c,transferSize:l}=e;if(["fetch","xmlhttprequest"].includes(n))return null;return{type:`${t}.${n}`,start:Hh(s),end:Hh(o),name:r,data:{size:l,statusCode:c,decodedBodySize:i,encodedBodySize:a}}},paint:function(e){const{duration:t,entryType:n,name:r,startTime:o}=e,s=Hh(o);return{type:n,name:r,start:s,end:s+t,data:void 0}},navigation:function(e){const{entryType:t,name:n,decodedBodySize:r,duration:o,domComplete:s,encodedBodySize:i,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,domInteractive:l,loadEventStart:u,loadEventEnd:d,redirectCount:p,startTime:h,transferSize:f,type:m}=e;if(0===o)return null;return{type:`${t}.${m}`,start:Hh(h),end:Hh(s),name:n,data:{size:f,decodedBodySize:r,encodedBodySize:i,duration:o,domInteractive:l,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,loadEventStart:u,loadEventEnd:d,domComplete:s,redirectCount:p}}}};function Bh(e){return Uh[e.entryType]?Uh[e.entryType](e):null}function Hh(e){return((Go||dd.performance.timeOrigin)+e)/1e3}function zh(e){function t(t){e.performanceEntries.includes(t)||e.performanceEntries.push(t)}function n({entries:e}){e.forEach(t)}const r=[];return["navigation","paint","resource"].forEach((e=>{r.push(rl(e,n))})),r.push(nl((({metric:t})=>{e.replayPerformanceEntries.push(function(e){const t=e.entries,n=t[t.length-1],r=n?n.element:void 0,o=e.value,s=Hh(o);return{type:"largest-contentful-paint",name:"largest-contentful-paint",start:s,end:s,data:{value:o,size:o,nodeId:r?_h.mirror.getId(r):void 0}}}(t))}))),()=>{r.forEach((e=>e()))}}const qh="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,Wh='var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(t,e){for(var i=new n(31),a=0;a<31;++a)i[a]=e+=1<<t[a-1];var s=new r(i[30]);for(a=1;a<30;++a)for(var o=i[a];o<i[a+1];++o)s[o]=o-i[a]<<5|a;return{b:i,r:s}},o=s(e,2),f=o.b,h=o.r;f[28]=258,h[258]=28;for(var l=s(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,a=0,s=new n(r);a<i;++a)t[a]&&++s[t[a]-1];var o,f=new n(r);for(a=1;a<r;++a)f[a]=f[a-1]+s[a-1]<<1;if(e){o=new n(1<<r);var h=15-r;for(a=0;a<i;++a)if(t[a])for(var l=a<<4|t[a],c=r-t[a],v=f[t[a]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>h]=l}else for(o=new n(i),a=0;a<i;++a)t[a]&&(o[a]=u[f[t[a]-1]++]>>15-t[a]);return o},g=new t(288);for(c=0;c<144;++c)g[c]=8;for(c=144;c<256;++c)g[c]=9;for(c=256;c<280;++c)g[c]=7;for(c=280;c<288;++c)g[c]=8;var w=new t(32);for(c=0;c<32;++c)w[c]=5;var p=d(g,9,0),y=d(w,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==r||r<0)&&(r=0),(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},A=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},_=function(r,e){for(var i=[],a=0;a<r.length;++a)r[a]&&i.push({s:a,f:r[a]});var s=i.length,o=i.slice();if(!s)return{t:F,l:0};if(1==s){var f=new t(i[0].s+1);return f[i[0].s]=1,{t:f,l:1}}i.sort((function(t,n){return t.f-n.f})),i.push({s:-1,f:25001});var h=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:h.f+l.f,l:h,r:l};c!=s-1;)h=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:h.f+l.f,l:h,r:l};var d=o[0].s;for(a=1;a<s;++a)o[a].s>d&&(d=o[a].s);var g=new n(d+1),w=x(i[c-1],g,0);if(w>e){a=0;var p=0,y=w-e,m=1<<y;for(o.sort((function(t,n){return g[n.s]-g[t.s]||t.f-n.f}));a<s;++a){var b=o[a].s;if(!(g[b]>e))break;p+=m-(1<<w-g[b]),g[b]=e}for(p>>=y;p>0;){var M=o[a].s;g[M]<e?p-=1<<e-g[M]++-1:++a}for(;a>=0&&p;--a){var E=o[a].s;g[E]==e&&(--g[E],++p)}w=e}return{t:new t(g),l:w}},x=function(t,n,r){return-1==t.s?Math.max(x(t.l,n,r+1),x(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,a=t[0],s=1,o=function(t){e[i++]=t},f=1;f<=r;++f)if(t[f]==a&&f!=r)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=t[f]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var a=0;a<e;++a)t[i+a+4]=r[a];return 8*(i+4+e)},C=function(t,r,s,o,f,h,l,u,c,v,m){z(r,m++,s),++f[256];for(var b=_(f,15),M=b.t,E=b.l,x=_(h,15),C=x.t,U=x.l,F=D(M),I=F.c,S=F.n,L=D(C),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=_(q,7),H=G.t,J=G.l,K=19;K>4&&!H[a[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(f,g)+T(h,w)+l,X=T(f,M)+T(h,C)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(C,U,0),R=C;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[a[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=p,P=g,Q=y,R=w;for(B=0;B<u;++B){var rt=o[B];if(rt>255){A(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;A(r,m,Q[et]),m+=R[et],et>3&&(A(r,m,rt>>5&8191),m+=i[et])}else A(r,m,N[rt]),m+=P[rt]}return A(r,m,N[256]),m+P[256]},U=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,a=0|r.length,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)i+=e+=r[s];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},L=function(a,s,o,f,u){if(!u&&(u={l:1},s.dictionary)){var c=s.dictionary.subarray(-32768),v=new t(c.length+a.length);v.set(c),v.set(a,c.length),a=v,u.w=c.length}return function(a,s,o,f,u,c){var v=c.z||a.length,d=new t(f+v+5*(1+Math.ceil(v/7e3))+u),g=d.subarray(f,d.length-u),w=c.l,p=7&(c.r||0);if(s){p&&(g[0]=c.r>>3);for(var y=U[s-1],M=y>>13,E=8191&y,z=(1<<o)-1,A=c.p||new n(32768),_=c.h||new n(z+1),x=Math.ceil(o/3),D=2*x,T=function(t){return(a[t]^a[t+1]<<x^a[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=_[H];if(A[J]=K,_[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!w)){p=C(a,g,0,F,I,S,O,q,G,j-G,p),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(a[j+Q]==a[j+Q-W]){for(var $=0;$<Z&&a[j+$]==a[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-A[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=A[J])&32767}if(R){F[q++]=268435456|h[Q]<<18|l[R];var it=31&h[Q],at=31&l[R];O+=e[it]+i[at],++I[257+it],++S[at],B=j+Q,++L}else F[q++]=a[j],++I[a[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=a[j],++I[a[j]];p=C(a,g,w,F,I,S,O,q,G,j-G,p),w||(c.r=7&p|g[p/8|0]<<3,p-=7,c.h=_,c.p=A,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+w;j+=65535){var st=j+65535;st>=v&&(g[p/8|0]=w,st=v),p=k(g,p+1,a.subarray(j,st))}c.i=v}return b(d,0,f+m(p)+u)}(a,null==s.level?6:s.level,null==s.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(a.length)))):12+s.mem,o,f,u)},O=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},j=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(L(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var a=this.b.length-this.s.z;a&&(this.b.set(n.subarray(0,a),this.s.z),this.s.z=this.b.length,this.p(this.b,!1)),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(a),32768),this.s.z=n.length-a+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n}();function q(t,n){n||(n={});var r=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}}(),e=t.length;r.p(t);var i,a=L(t,n,10+((i=n).filename?i.filename.length+1:0),8),s=a.length;return function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&O(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}}(a,n),O(a,s-8,r.d()),O(a,s-4,e),a}var B=function(){function t(t,n){this.c=S(),this.v=1,j.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),j.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=L(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=S();i.p(n.dictionary),O(t,2,i.d())}}(r,this.o),this.v=0),n&&O(r,r.length-4,this.c.d()),this.ondata(r,n)},t}(),G="undefined"!=typeof TextEncoder&&new TextEncoder,H="undefined"!=typeof TextDecoder&&new TextDecoder;try{H.decode(F,{stream:!0})}catch(t){}var J=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(K(t),this.d=n||!1)},t}();function K(n,r){if(r){for(var e=new t(n.length),i=0;i<n.length;++i)e[i]=n.charCodeAt(i);return e}if(G)return G.encode(n);var a=n.length,s=new t(n.length+(n.length>>1)),o=0,f=function(t){s[o++]=t};for(i=0;i<a;++i){if(o+5>s.length){var h=new t(o+8+(a-i<<1));h.set(s),s=h}var l=n.charCodeAt(i);l<128||r?f(l):l<2048?(f(192|l>>6),f(128|63&l)):l>55295&&l<57344?(f(240|(l=65536+(1047552&l)|1023&n.charCodeAt(++i))>>18),f(128|l>>12&63),f(128|l>>6&63),f(128|63&l)):(f(224|l>>12),f(128|l>>6&63),f(128|63&l))}return b(s,0,o)}const N=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(let r=0,e=t.length;r<e;r++)n+=t[r].length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new B,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new J(((t,n)=>{this.deflate.push(t,n)})),this.stream.push("[")}},P={clear:()=>{N.clear()},addEvent:t=>N.addEvent(t),finish:()=>N.finish(),compress:t=>function(t){return q(K(t))}(t)};addEventListener("message",(function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in P&&"function"==typeof P[n])try{const t=P[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}})),postMessage({id:void 0,method:"init",success:!0,response:void 0});';function Gh(e,t){qh&&(nr.info(e),t&&Yh(e))}function Vh(e,t){qh&&(nr.info(e),t&&setTimeout((()=>{Yh(e)}),0))}function Yh(e){Hs({category:"console",data:{logger:"replay"},level:"info",message:e},{level:"info"})}class Kh extends Error{constructor(){super("Event buffer exceeded maximum size of 20000000.")}}class Xh{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(e){const t=JSON.stringify(e).length;if(this._totalSize+=t,this._totalSize>yd)throw new Kh;this.events.push(e)}finish(){return new Promise((e=>{const t=this.events;this.clear(),e(JSON.stringify(t))}))}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const e=this.events.map((e=>e.timestamp)).sort()[0];return e?bh(e):null}}class Jh{constructor(e){this._worker=e,this._id=0}ensureReady(){return this._ensureReadyPromise||(this._ensureReadyPromise=new Promise(((e,t)=>{this._worker.addEventListener("message",(({data:n})=>{n.success?e():t()}),{once:!0}),this._worker.addEventListener("error",(e=>{t(e)}),{once:!0})}))),this._ensureReadyPromise}destroy(){Gh("[Replay] Destroying compression worker"),this._worker.terminate()}postMessage(e,t){const n=this._getAndIncrementId();return new Promise(((r,o)=>{const s=({data:t})=>{const i=t;if(i.method===e&&i.id===n){if(this._worker.removeEventListener("message",s),!i.success)return qh&&nr.error("[Replay]",i.response),void o(new Error("Error in compression worker"));r(i.response)}};this._worker.addEventListener("message",s),this._worker.postMessage({id:n,method:e,arg:t})}))}_getAndIncrementId(){return this._id++}}class Qh{constructor(e){this._worker=new Jh(e),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(e){const t=bh(e.timestamp);(!this._earliestTimestamp||t<this._earliestTimestamp)&&(this._earliestTimestamp=t);const n=JSON.stringify(e);return this._totalSize+=n.length,this._totalSize>yd?Promise.reject(new Kh):this._sendEventToWorker(n)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,(e=>{qh&&nr.warn('[Replay] Sending "clear" message to worker failed',e)}))}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(e){return this._worker.postMessage("addEvent",e)}async _finishRequest(){const e=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,e}}class Zh{constructor(e){this._fallback=new Xh,this._compression=new Qh(e),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(e){this._used.hasCheckout=e}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(e){return this._used.addEvent(e)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(e){return void Gh("[Replay] Failed to load the compression worker, falling back to simple buffer")}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:e,hasCheckout:t}=this._fallback,n=[];for(const t of e)n.push(this._compression.addEvent(t));this._compression.hasCheckout=t,this._used=this._compression;try{await Promise.all(n)}catch(e){qh&&nr.warn("[Replay] Failed to add events when switching buffers.",e)}}}function ef({useCompression:e,workerUrl:t}){if(e&&window.Worker){const e=function(e){try{const t=e||function(){if("undefined"==typeof __SENTRY_EXCLUDE_REPLAY_WORKER__||!__SENTRY_EXCLUDE_REPLAY_WORKER__)return function(){const e=new Blob([Wh]);return URL.createObjectURL(e)}();return""}();if(!t)return;Gh("[Replay] Using compression worker"+(e?` from ${e}`:""));const n=new Worker(t);return new Zh(n)}catch(e){Gh("[Replay] Failed to create compression worker")}}(t);if(e)return e}return Gh("[Replay] Using simple buffer"),new Xh}function tf(){try{return"sessionStorage"in dd&&!!dd.sessionStorage}catch(e){return!1}}function nf(e){!function(){if(!tf())return;try{dd.sessionStorage.removeItem(pd)}catch(e){}}(),e.session=void 0}function rf(e){return void 0!==e&&Math.random()<e}function of(e){const t=Date.now();return{id:e.id||Or(),started:e.started||t,lastActivity:e.lastActivity||t,segmentId:e.segmentId||0,sampled:e.sampled,previousSessionId:e.previousSessionId}}function sf(e){if(tf())try{dd.sessionStorage.setItem(pd,JSON.stringify(e))}catch(e){}}function af({sessionSampleRate:e,allowBuffering:t,stickySession:n=!1},{previousSessionId:r}={}){const o=function(e,t){return rf(e)?"session":!!t&&"buffer"}(e,t),s=of({sampled:o,previousSessionId:r});return n&&sf(s),s}function cf(e,t,n=+new Date){return null===e||void 0===t||t<0||0!==t&&e+t<=n}function lf(e,{maxReplayDuration:t,sessionIdleExpire:n,targetTime:r=Date.now()}){return cf(e.started,t,r)||cf(e.lastActivity,n,r)}function uf(e,{sessionIdleExpire:t,maxReplayDuration:n}){return!!lf(e,{sessionIdleExpire:t,maxReplayDuration:n})&&("buffer"!==e.sampled||0!==e.segmentId)}function df({traceInternals:e,sessionIdleExpire:t,maxReplayDuration:n,previousSessionId:r},o){const s=o.stickySession&&function(e){if(!tf())return null;try{const t=dd.sessionStorage.getItem(pd);if(!t)return null;const n=JSON.parse(t);return Vh("[Replay] Loading existing session",e),of(n)}catch(e){return null}}(e);return s?uf(s,{sessionIdleExpire:t,maxReplayDuration:n})?(Vh("[Replay] Session in sessionStorage is expired, creating new one..."),af(o,{previousSessionId:s.id})):s:(Vh("[Replay] Creating new session",e),af(o,{previousSessionId:r}))}function pf(e,t,n){return!!ff(e,t)&&(hf(e,t,n),!0)}async function hf(e,t,n){if(!e.eventBuffer)return null;try{n&&"buffer"===e.recordingMode&&e.eventBuffer.clear(),n&&(e.eventBuffer.hasCheckout=!0);const r=function(e,t){try{if("function"==typeof t&&function(e){return e.type===Rp.Custom}(e))return t(e)}catch(e){return qh&&nr.error("[Replay] An error occured in the `beforeAddRecordingEvent` callback, skipping the event...",e),null}return e}(t,e.getOptions().beforeAddRecordingEvent);if(!r)return;return await e.eventBuffer.addEvent(r)}catch(t){const n=t&&t instanceof Kh?"addEventSizeExceeded":"addEvent";qh&&nr.error(t),await e.stop({reason:n});const r=Ws();r&&r.recordDroppedEvent("internal_sdk_error","replay")}}function ff(e,t){if(!e.eventBuffer||e.isPaused()||!e.isEnabled())return!1;const n=bh(t.timestamp);return!(n+e.timeouts.sessionIdlePause<Date.now())&&(!(n>e.getContext().initialTimestamp+e.getOptions().maxReplayDuration)||(Gh(`[Replay] Skipping event with timestamp ${n} because it is after maxReplayDuration`,e.getOptions()._experiments.traceInternals),!1))}function mf(e){return!e.type}function gf(e){return"transaction"===e.type}function yf(e){return"feedback"===e.type}function _f(e){const t=function(){const e=Ws();if(!e)return!1;const t=e.getTransport();if(!t)return!1;return t.send.__sentry__baseTransport__||!1}();return(n,r)=>{if(!e.isEnabled()||!mf(n)&&!gf(n))return;const o=r&&r.statusCode;t&&(!o||o<200||o>=300)||(gf(n)?function(e,t){const n=e.getContext();t.contexts&&t.contexts.trace&&t.contexts.trace.trace_id&&n.traceIds.size<100&&n.traceIds.add(t.contexts.trace.trace_id)}(e,n):function(e,t){const n=e.getContext();t.event_id&&n.errorIds.size<100&&n.errorIds.add(t.event_id);if("buffer"!==e.recordingMode||!t.tags||!t.tags.replayId)return;const{beforeErrorSampling:r}=e.getOptions();if("function"==typeof r&&!r(t))return;setTimeout((()=>{e.sendBufferedReplayOrFlush()}))}(e,n))}}function vf(e){return t=>{e.isEnabled()&&mf(t)&&function(e,t){const n=t.exception&&t.exception.values&&t.exception.values[0].value;if("string"!=typeof n)return;if(n.match(/reactjs\.org\/docs\/error-decoder\.html\?invariant=(418|419|422|423|425)/)||n.match(/(does not match server-rendered HTML|Hydration failed because)/i)){wh(e,Nh({category:"replay.hydrate-error"}))}}(e,t)}}function bf(e,t=!1){const n=t?_f(e):void 0;return Object.assign(((t,r)=>{if(!e.isEnabled())return t;if(function(e){return"replay_event"===e.type}(t))return delete t.breadcrumbs,t;if(!mf(t)&&!gf(t)&&!yf(t))return t;if(!e.checkAndHandleExpiredSession())return t;if(yf(t))return e.flush(),t.contexts.feedback.replay_id=e.getSessionId(),function(e,t){e.triggerUserActivity(),e.addUpdate((()=>!t.timestamp||(e.throttledAddEvent({type:Rp.Custom,timestamp:1e3*t.timestamp,data:{tag:"breadcrumb",payload:{timestamp:t.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:t.event_id}}}}),!1)))}(e,t),t;if(function(e,t){return!(e.type||!e.exception||!e.exception.values||!e.exception.values.length||!t.originalException||!t.originalException.__rrweb__)}(t,r)&&!e.getOptions()._experiments.captureExceptions)return qh&&nr.log("[Replay] Ignoring error from rrweb internals",t),null;const o=function(e,t){return"buffer"===e.recordingMode&&t.message!==fd&&!(!t.exception||t.type)&&rf(e.getOptions().errorSampleRate)}(e,t);return(o||"session"===e.recordingMode)&&(t.tags={...t.tags,replayId:e.getSessionId()}),n&&n(t,{statusCode:200}),t}),{id:"Replay"})}function Sf(e,t){return t.map((({type:t,start:n,end:r,name:o,data:s})=>{const i=e.throttledAddEvent({type:Rp.Custom,timestamp:n,data:{tag:"performanceSpan",payload:{op:t,description:o,startTimestamp:n,endTimestamp:r,data:s}}});return"string"==typeof i?Promise.resolve(null):i}))}function wf(e){return t=>{if(!e.isEnabled())return;const n=function(e){const{from:t,to:n}=e,r=Date.now()/1e3;return{type:"navigation.push",start:r,end:r,name:n,data:{previous:t}}}(t);null!==n&&(e.getContext().urls.push(n.name),e.triggerUserActivity(),e.addUpdate((()=>(Sf(e,[n]),!1))))}}function kf(e,t){e.isEnabled()&&null!==t&&(function(e,t){return(!qh||!e.getOptions()._experiments.traceInternals)&&Ma(t,Ws())}(e,t.name)||e.addUpdate((()=>(Sf(e,[t]),!0))))}function Ef(e){return t=>{if(!e.isEnabled())return;const n=function(e){const{startTimestamp:t,endTimestamp:n,xhr:r}=e,o=r[ho];if(!t||!n||!o)return null;const{method:s,url:i,status_code:a}=o;return void 0===i?null:{type:"resource.xhr",name:i,start:t/1e3,end:n/1e3,data:{method:s,statusCode:a}}}(t);kf(e,n)}}function Tf(e,t){if(e)try{if("string"==typeof e)return t.encode(e).length;if(e instanceof URLSearchParams)return t.encode(e.toString()).length;if(e instanceof FormData){const n=Nf(e);return t.encode(n).length}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength}catch(e){}}function xf(e){if(!e)return;const t=parseInt(e,10);return isNaN(t)?void 0:t}function If(e){try{if("string"==typeof e)return[e];if(e instanceof URLSearchParams)return[e.toString()];if(e instanceof FormData)return[Nf(e)];if(!e)return[void 0]}catch(t){return qh&&nr.warn("[Replay] Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return qh&&nr.info("[Replay] Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function Cf(e,t){if(!e)return{headers:{},size:void 0,_meta:{warnings:[t]}};const n={...e._meta},r=n.warnings||[];return n.warnings=[...r,t],e._meta=n,e}function Rf(e,t){if(!t)return null;const{startTimestamp:n,endTimestamp:r,url:o,method:s,statusCode:i,request:a,response:c}=t;return{type:e,start:n/1e3,end:r/1e3,name:o,data:gr({method:s,statusCode:i,request:a,response:c})}}function Af(e){return{headers:{},size:e,_meta:{warnings:["URL_SKIPPED"]}}}function Of(e,t,n){if(!t&&0===Object.keys(e).length)return;if(!t)return{headers:e};if(!n)return{headers:e,size:t};const r={headers:e,size:t},{body:o,warnings:s}=function(e){if(!e||"string"!=typeof e)return{body:e};const t=e.length>md,n=function(e){const t=e[0],n=e[e.length-1];return"["===t&&"]"===n||"{"===t&&"}"===n}(e);if(t){const t=e.slice(0,md);return n?{body:t,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${t}…`,warnings:["TEXT_TRUNCATED"]}}if(n)try{return{body:JSON.parse(e)}}catch(e){}return{body:e}}(n);return r.body=o,s&&s.length>0&&(r._meta={warnings:s}),r}function Mf(e,t){return Object.keys(e).reduce(((n,r)=>{const o=r.toLowerCase();return t.includes(o)&&e[r]&&(n[o]=e[r]),n}),{})}function Nf(e){return new URLSearchParams(e).toString()}function Lf(e,t){const n=function(e,t=dd.document.baseURI){if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith(dd.location.origin))return e;const n=new URL(e,t);if(n.origin!==new URL(t).origin)return e;const r=n.href;if(!e.endsWith("/")&&r.endsWith("/"))return r.slice(0,-1);return r}(e);return $n(n,t)}async function Df(e,t,n){try{const r=await async function(e,t,n){const r=Date.now(),{startTimestamp:o=r,endTimestamp:s=r}=t,{url:i,method:a,status_code:c=0,request_body_size:l,response_body_size:u}=e.data,d=Lf(i,n.networkDetailAllowUrls)&&!Lf(i,n.networkDetailDenyUrls),p=d?function({networkCaptureBodies:e,networkRequestHeaders:t},n,r){const o=n?function(e,t){if(1===e.length&&"string"!=typeof e[0])return Ff(e[0],t);if(2===e.length)return Ff(e[1],t);return{}}(n,t):{};if(!e)return Of(o,r,void 0);const s=$f(n),[i,a]=If(s),c=Of(o,r,i);if(a)return Cf(c,a);return c}(n,t.input,l):Af(l),h=await async function(e,{networkCaptureBodies:t,textEncoder:n,networkResponseHeaders:r},o,s){if(!e&&void 0!==s)return Af(s);const i=o?Pf(o.headers,r):{};if(!o||!t&&void 0!==s)return Of(i,s,void 0);const[a,c]=await async function(e){const t=function(e){try{return e.clone()}catch(e){qh&&nr.warn("[Replay] Failed to clone response body",e)}}(e);if(!t)return[void 0,"BODY_PARSE_ERROR"];try{const e=await function(e){return new Promise(((t,n)=>{const r=setTimeout((()=>n(new Error("Timeout while trying to read response body"))),500);(async function(e){return await e.text()})(e).then((e=>t(e)),(e=>n(e))).finally((()=>clearTimeout(r)))}))}(t);return[e]}catch(e){return qh&&nr.warn("[Replay] Failed to get text body from response",e),[void 0,"BODY_PARSE_ERROR"]}}(o),l=function(e,{networkCaptureBodies:t,textEncoder:n,responseBodySize:r,captureDetails:o,headers:s}){try{const i=e&&e.length&&void 0===r?Tf(e,n):r;return o?Of(s,i,t?e:void 0):Af(i)}catch(e){return qh&&nr.warn("[Replay] Failed to serialize response body",e),Of(s,r,void 0)}}(a,{networkCaptureBodies:t,textEncoder:n,responseBodySize:s,captureDetails:e,headers:i});if(c)return Cf(l,c);return l}(d,n,t.response,u);return{startTimestamp:o,endTimestamp:s,url:i,method:a,statusCode:c,request:p,response:h}}(e,t,n),o=Rf("resource.fetch",r);kf(n.replay,o)}catch(e){qh&&nr.error("[Replay] Failed to capture fetch breadcrumb",e)}}function $f(e=[]){if(2===e.length&&"object"==typeof e[1])return e[1].body}function Pf(e,t){const n={};return t.forEach((t=>{e.get(t)&&(n[t]=e.get(t))})),n}function Ff(e,t){if(!e)return{};const n=e.headers;return n?n instanceof Headers?Pf(n,t):Array.isArray(n)?{}:Mf(n,t):{}}async function jf(e,t,n){try{const r=function(e,t,n){const r=Date.now(),{startTimestamp:o=r,endTimestamp:s=r,input:i,xhr:a}=t,{url:c,method:l,status_code:u=0,request_body_size:d,response_body_size:p}=e.data;if(!c)return null;if(!a||!Lf(c,n.networkDetailAllowUrls)||Lf(c,n.networkDetailDenyUrls)){return{startTimestamp:o,endTimestamp:s,url:c,method:l,statusCode:u,request:Af(d),response:Af(p)}}const h=a[ho],f=h?Mf(h.request_headers,n.networkRequestHeaders):{},m=Mf(function(e){const t=e.getAllResponseHeaders();if(!t)return{};return t.split("\r\n").reduce(((e,t)=>{const[n,r]=t.split(": ");return e[n.toLowerCase()]=r,e}),{})}(a),n.networkResponseHeaders),[g,y]=n.networkCaptureBodies?If(i):[void 0],[_,v]=n.networkCaptureBodies?function(e){const t=[];try{return[e.responseText]}catch(e){t.push(e)}try{return function(e,t){try{if("string"==typeof e)return[e];if(e instanceof Document)return[e.body.outerHTML];if("json"===t&&e&&"object"==typeof e)return[JSON.stringify(e)];if(!e)return[void 0]}catch(t){return qh&&nr.warn("[Replay] Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return qh&&nr.info("[Replay] Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}(e.response,e.responseType)}catch(e){t.push(e)}return qh&&nr.warn("[Replay] Failed to get xhr response body",...t),[void 0]}(a):[void 0],b=Of(f,d,g),S=Of(m,p,_);return{startTimestamp:o,endTimestamp:s,url:c,method:l,statusCode:u,request:y?Cf(b,y):b,response:v?Cf(S,v):S}}(e,t,n),o=Rf("resource.xhr",r);kf(n.replay,o)}catch(e){qh&&nr.error("[Replay] Failed to capture xhr breadcrumb",e)}}function Uf(e,t,n){const{xhr:r,input:o}=t;if(!r)return;const s=Tf(o,n.textEncoder),i=r.getResponseHeader("content-length")?xf(r.getResponseHeader("content-length")):function(e,t,n){try{return Tf("json"===t&&e&&"object"==typeof e?JSON.stringify(e):e,n)}catch(e){return}}(r.response,r.responseType,n.textEncoder);void 0!==s&&(e.data.request_body_size=s),void 0!==i&&(e.data.response_body_size=i)}function Bf(e){const t=Ws();try{const n=new TextEncoder,{networkDetailAllowUrls:r,networkDetailDenyUrls:o,networkCaptureBodies:s,networkRequestHeaders:i,networkResponseHeaders:a}=e.getOptions(),c={replay:e,textEncoder:n,networkDetailAllowUrls:r,networkDetailDenyUrls:o,networkCaptureBodies:s,networkRequestHeaders:i,networkResponseHeaders:a};t&&t.on?t.on("beforeAddBreadcrumb",((e,t)=>function(e,t,n){if(!t.data)return;try{(function(e){return"xhr"===e.category})(t)&&function(e){return e&&e.xhr}(n)&&(Uf(t,n,e),jf(t,n,e)),function(e){return"fetch"===e.category}(t)&&function(e){return e&&e.response}(n)&&(!function(e,t,n){const{input:r,response:o}=t,s=Tf(r?$f(r):void 0,n.textEncoder),i=o?xf(o.headers.get("content-length")):void 0;void 0!==s&&(e.data.request_body_size=s),void 0!==i&&(e.data.response_body_size=i)}(t,n,e),Df(t,n,e))}catch(e){qh&&nr.warn("Error when enriching network breadcrumb")}}(c,e,t))):(Xr(function(e){return t=>{if(!e.isEnabled())return;const n=function(e){const{startTimestamp:t,endTimestamp:n,fetchData:r,response:o}=e;if(!n)return null;const{method:s,url:i}=r;return{type:"resource.fetch",start:t/1e3,end:n/1e3,name:i,data:{method:s,statusCode:o?o.status:void 0}}}(t);kf(e,n)}}(e)),fo(Ef(e)))}catch(e){}}let Hf=null;const zf=e=>t=>{if(!e.isEnabled())return;const n=function(e){const t=e.getLastBreadcrumb&&e.getLastBreadcrumb();if(Hf===t||!t)return null;if(Hf=t,!function(e){return!!e.category}(t)||["fetch","xhr","sentry.event","sentry.transaction"].includes(t.category)||t.category.startsWith("ui."))return null;if("console"===t.category)return function(e){const t=e.data&&e.data.arguments;if(!Array.isArray(t)||0===t.length)return Nh(e);let n=!1;const r=t.map((e=>{if(!e)return e;if("string"==typeof e)return e.length>gd?(n=!0,`${e.slice(0,gd)}…`):e;if("object"==typeof e)try{const t=bo(e,7);return JSON.stringify(t).length>gd?(n=!0,`${JSON.stringify(t,null,2).slice(0,gd)}…`):t}catch(e){}return e}));return Nh({...e,data:{...e.data,arguments:r,...n?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}(t);return Nh(t)}(t);n&&wh(e,n)};function qf(e){return!(!e||!e.on)}function Wf(e){const{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}=e,o=Date.now()/1e3;return{type:"memory",name:"memory",start:o,end:o,data:{memory:{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}}}}function Gf(e){let t=!1;return(n,r)=>{if(!e.checkAndHandleExpiredSession())return void(qh&&nr.warn("[Replay] Received replay event after session expired."));const o=r||!t;t=!0,e.clickDetector&&Mh(e.clickDetector,n),e.addUpdate((()=>{if("buffer"===e.recordingMode&&o&&e.setInitialState(),!pf(e,n,o))return!0;if(!o)return!1;if(function(e,t){if(!t||!e.session||0!==e.session.segmentId)return;pf(e,function(e){const t=e.getOptions();return{type:Rp.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:e.isRecordingCanvas(),sessionSampleRate:t.sessionSampleRate,errorSampleRate:t.errorSampleRate,useCompressionOption:t.useCompression,blockAllMedia:t.blockAllMedia,maskAllText:t.maskAllText,maskAllInputs:t.maskAllInputs,useCompression:!!e.eventBuffer&&"worker"===e.eventBuffer.type,networkDetailHasUrls:t.networkDetailAllowUrls.length>0,networkCaptureBodies:t.networkCaptureBodies,networkRequestHasHeaders:t.networkRequestHeaders.length>0,networkResponseHasHeaders:t.networkResponseHeaders.length>0}}}}(e),!1)}(e,o),e.session&&e.session.previousSessionId)return!0;if("buffer"===e.recordingMode&&e.session&&e.eventBuffer){const t=e.eventBuffer.getEarliestTimestamp();t&&(Gh(`[Replay] Updating session start time to earliest event in buffer to ${new Date(t)}`,e.getOptions()._experiments.traceInternals),e.session.started=t,e.getOptions().stickySession&&sf(e.session))}return"session"===e.recordingMode&&e.flush(),!0}))}}async function Vf({recordingData:e,replayId:t,segmentId:n,eventContext:r,timestamp:o,session:s}){const i=function({recordingData:e,headers:t}){let n;const r=`${JSON.stringify(t)}\n`;if("string"==typeof e)n=`${r}${e}`;else{const t=(new TextEncoder).encode(r);n=new Uint8Array(t.length+e.length),n.set(t),n.set(e,t.length)}return n}({recordingData:e,headers:{segment_id:n}}),{urls:a,errorIds:c,traceIds:l,initialTimestamp:u}=r,d=Ws(),p=Gs(),h=d&&d.getTransport(),f=d&&d.getDsn();if(!(d&&h&&f&&s.sampled))return;const m={type:hd,replay_start_timestamp:u/1e3,timestamp:o/1e3,error_ids:c,trace_ids:l,urls:a,replay_id:t,segment_id:n,replay_type:s.sampled},g=await async function({client:e,scope:t,replayId:n,event:r}){const o={event_id:n,integrations:"object"!=typeof e._integrations||null===e._integrations||Array.isArray(e._integrations)?void 0:Object.keys(e._integrations)};e.emit&&e.emit("preprocessEvent",r,o);const s=await Ds(e.getOptions(),r,o,t,e,hi());if(!s)return null;s.platform=s.platform||"javascript";const i=e.getSdkMetadata&&e.getSdkMetadata(),{name:a,version:c}=i&&i.sdk||{};return s.sdk={...s.sdk,name:a||"sentry.javascript.unknown",version:c||"0.0.0"},s}({scope:p,client:d,replayId:t,event:m});if(!g)return d.recordDroppedEvent("event_processor","replay",m),void Gh("An event processor returned `null`, will not send event.");delete g.sdkProcessingMetadata;const y=function(e,t,n,r){return os(hs(e,ps(e),r,n),[[{type:"replay_event"},e],[{type:"replay_recording",length:"string"==typeof t?(new TextEncoder).encode(t).length:t.length},t]])}(g,i,f,d.getOptions().tunnel);let _;try{_=await h.send(y)}catch(e){const t=new Error(fd);try{t.cause=e}catch(e){}throw t}if(!_)return _;if("number"==typeof _.statusCode&&(_.statusCode<200||_.statusCode>=300))throw new Yf(_.statusCode);const v=ys({},_);if(gs(v,"replay"))throw new Kf(v);return _}class Yf extends Error{constructor(e){super(`Transport returned status code ${e}`)}}class Kf extends Error{constructor(e){super("Rate limit hit"),this.rateLimits=e}}async function Xf(e,t={count:0,interval:5e3}){const{recordingData:n,options:r}=e;if(n.length)try{return await Vf(e),!0}catch(n){if(n instanceof Yf||n instanceof Kf)throw n;if(zs("Replays",{_retryCount:t.count}),qh&&r._experiments&&r._experiments.captureExceptions&&js(n),t.count>=3){const e=new Error(`${fd} - max retries exceeded`);try{e.cause=n}catch(e){}throw e}return t.interval*=++t.count,new Promise(((n,r)=>{setTimeout((async()=>{try{await Xf(e,t),n(!0)}catch(e){r(e)}}),t.interval)}))}}const Jf="__THROTTLED";function Qf(e,t,n){const r=new Map;let o=!1;return(...s)=>{const i=Math.floor(Date.now()/1e3);if((e=>{const t=e-n;r.forEach(((e,n)=>{n<t&&r.delete(n)}))})(i),[...r.values()].reduce(((e,t)=>e+t),0)>=t){const e=o;return o=!0,e?"__SKIPPED":Jf}o=!1;const a=r.get(i)||0;return r.set(i,a+1),e(...s)}}class Zf{constructor({options:e,recordingOptions:t}){Zf.prototype.__init.call(this),Zf.prototype.__init2.call(this),Zf.prototype.__init3.call(this),Zf.prototype.__init4.call(this),Zf.prototype.__init5.call(this),Zf.prototype.__init6.call(this),this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:3e5,sessionIdleExpire:9e5},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=t,this._options=e,this._debouncedFlush=function(e,t,n){let r,o,s;const i=n&&n.maxWait?Math.max(n.maxWait,t):0;function a(){return c(),r=e(),r}function c(){void 0!==o&&clearTimeout(o),void 0!==s&&clearTimeout(s),o=s=void 0}function l(){return o&&clearTimeout(o),o=setTimeout(a,t),i&&void 0===s&&(s=setTimeout(a,i)),r}return l.cancel=c,l.flush=function(){return void 0!==o||void 0!==s?a():r},l}((()=>this._flush()),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=Qf(((e,t)=>function(e,t,n){return ff(e,t)?hf(e,t,n):Promise.resolve(null)}(this,e,t)),300,5);const{slowClickTimeout:n,slowClickIgnoreSelectors:r}=this.getOptions(),o=n?{threshold:Math.min(3e3,n),timeout:n,scrollTimeout:300,ignoreSelector:r?r.join(","):""}:void 0;o&&(this.clickDetector=new Rh(this,o))}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return Boolean(this._canvas)}getOptions(){return this._options}initializeSampling(e){const{errorSampleRate:t,sessionSampleRate:n}=this._options;t<=0&&n<=0||(this._initializeSessionForSampling(e),this.session?!1!==this.session.sampled&&(this.recordingMode="buffer"===this.session.sampled&&0===this.session.segmentId?"buffer":"session",Vh(`[Replay] Starting replay in ${this.recordingMode} mode`,this._options._experiments.traceInternals),this._initializeRecording()):this._handleException(new Error("Unable to initialize and create session")))}start(){if(this._isEnabled&&"session"===this.recordingMode)throw new Error("Replay recording is already in progress");if(this._isEnabled&&"buffer"===this.recordingMode)throw new Error("Replay buffering is in progress, call `flush()` to save the replay");Vh("[Replay] Starting replay in session mode",this._options._experiments.traceInternals),this._updateUserActivity();const e=df({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=e,this._initializeRecording()}startBuffering(){if(this._isEnabled)throw new Error("Replay recording is already in progress");Vh("[Replay] Starting replay in buffer mode",this._options._experiments.traceInternals);const e=df({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=e,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const e=this._canvas;this._stopRecording=_h({...this._recordingOptions,..."buffer"===this.recordingMode&&{checkoutEveryNms:6e4},emit:Gf(this),onMutation:this._onMutationHandler,...e?{recordCanvas:e.recordCanvas,getCanvasManager:e.getCanvasManager,sampling:e.sampling,dataURLOptions:e.dataURLOptions}:{}})}catch(e){this._handleException(e)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(e){return this._handleException(e),!1}}async stop({forceFlush:e=!1,reason:t}={}){if(this._isEnabled){this._isEnabled=!1;try{Gh("[Replay] Stopping Replay"+(t?` triggered by ${t}`:""),this._options._experiments.traceInternals),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),e&&await this._flush({force:!0}),this.eventBuffer&&this.eventBuffer.destroy(),this.eventBuffer=null,nf(this)}catch(e){this._handleException(e)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),Gh("[Replay] Pausing replay",this._options._experiments.traceInternals))}resume(){this._isPaused&&this._checkSession()&&(this._isPaused=!1,this.startRecording(),Gh("[Replay] Resuming replay",this._options._experiments.traceInternals))}async sendBufferedReplayOrFlush({continueRecording:e=!0}={}){if("session"===this.recordingMode)return this.flushImmediate();const t=Date.now();Gh("[Replay] Converting buffer to session",this._options._experiments.traceInternals),await this.flushImmediate();const n=this.stopRecording();e&&n&&"session"!==this.recordingMode&&(this.recordingMode="session",this.session&&(this._updateUserActivity(t),this._updateSessionActivity(t),this._maybeSaveSession()),this.startRecording())}addUpdate(e){const t=e();"buffer"!==this.recordingMode&&!0!==t&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),this._stopRecording)this.checkAndHandleExpiredSession(),this._updateSessionActivity();else{if(!this._checkSession())return;this.resume()}}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return"buffer"===this.recordingMode?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(){return this.session&&this.session.id}checkAndHandleExpiredSession(){if(!(this._lastActivity&&cf(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&"session"===this.session.sampled))return!!this._checkSession();this.pause()}setInitialState(){const e=`${dd.location.pathname}${dd.location.hash}${dd.location.search}`,t=`${dd.location.origin}${e}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=t,this._context.initialTimestamp=Date.now(),this._context.urls.push(t)}throttledAddEvent(e,t){const n=this._throttledAddEvent(e,t);if(n===Jf){const e=Nh({category:"replay.throttled"});this.addUpdate((()=>!pf(this,{type:5,timestamp:e.timestamp||0,data:{tag:"breadcrumb",payload:e,metric:!0}})))}return n}getCurrentRoute(){const e=this.lastTransaction||Gs().getTransaction(),t=(e&&Ns(e).data||{})[Pi];if(e&&t&&["route","custom"].includes(t))return Ns(e).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=ef({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_handleException(e){qh&&nr.error("[Replay]",e),qh&&this._options._experiments&&this._options._experiments.captureExceptions&&js(e)}_initializeSessionForSampling(e){const t=this._options.errorSampleRate>0,n=df({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals,previousSessionId:e},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:t});this.session=n}_checkSession(){if(!this.session)return!1;const e=this.session;return!uf(e,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})||(this._refreshSession(e),!1)}async _refreshSession(e){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(e.id))}_addListeners(){try{dd.document.addEventListener("visibilitychange",this._handleVisibilityChange),dd.addEventListener("blur",this._handleWindowBlur),dd.addEventListener("focus",this._handleWindowFocus),dd.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(!function(e){const t=Gs(),n=Ws();t.addScopeListener(zf(e)),zr(Ph(e)),lo(wf(e)),Bf(e);const r=bf(e,!qf(n));n&&n.addEventProcessor?n.addEventProcessor(r):va(r),qf(n)&&(n.on("beforeSendEvent",vf(e)),n.on("afterSendEvent",_f(e)),n.on("createDsc",(t=>{const n=e.getSessionId();n&&e.isEnabled()&&"session"===e.recordingMode&&e.checkAndHandleExpiredSession()&&(t.replay_id=n)})),n.on("startTransaction",(t=>{e.lastTransaction=t})),n.on("finishTransaction",(t=>{e.lastTransaction=t})),n.on("beforeSendFeedback",((t,n)=>{const r=e.getSessionId();n&&n.includeReplay&&e.isEnabled()&&r&&t.contexts&&t.contexts.feedback&&(t.contexts.feedback.replay_id=r)})))}(this),this._hasInitializedCoreListeners=!0)}catch(e){this._handleException(e)}this._performanceCleanupCallback=zh(this)}_removeListeners(){try{dd.document.removeEventListener("visibilitychange",this._handleVisibilityChange),dd.removeEventListener("blur",this._handleWindowBlur),dd.removeEventListener("focus",this._handleWindowFocus),dd.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(e){this._handleException(e)}}__init(){this._handleVisibilityChange=()=>{"visible"===dd.document.visibilityState?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()}}__init2(){this._handleWindowBlur=()=>{const e=Nh({category:"ui.blur"});this._doChangeToBackgroundTasks(e)}}__init3(){this._handleWindowFocus=()=>{const e=Nh({category:"ui.focus"});this._doChangeToForegroundTasks(e)}}__init4(){this._handleKeyboardEvent=e=>{jh(this,e)}}_doChangeToBackgroundTasks(e){if(!this.session)return;lf(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(e&&this._createCustomBreadcrumb(e),this.conditionalFlush())}_doChangeToForegroundTasks(e){if(!this.session)return;this.checkAndHandleExpiredSession()?e&&this._createCustomBreadcrumb(e):Gh("[Replay] Document has become active, but session has expired")}_updateUserActivity(e=Date.now()){this._lastActivity=e}_updateSessionActivity(e=Date.now()){this.session&&(this.session.lastActivity=e,this._maybeSaveSession())}_createCustomBreadcrumb(e){this.addUpdate((()=>{this.throttledAddEvent({type:Rp.Custom,timestamp:e.timestamp||0,data:{tag:"breadcrumb",payload:e}})}))}_addPerformanceEntries(){const e=(t=this.performanceEntries,t.map(Bh).filter(Boolean)).concat(this.replayPerformanceEntries);var t;return this.performanceEntries=[],this.replayPerformanceEntries=[],Promise.all(Sf(this,e))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:e,eventBuffer:t}=this;if(!e||!t)return;if(e.segmentId)return;const n=t.getEarliestTimestamp();n&&n<this._context.initialTimestamp&&(this._context.initialTimestamp=n)}_popEventContext(){const e={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),e}async _runFlush(){const e=this.getSessionId();if(this.session&&this.eventBuffer&&e){if(await this._addPerformanceEntries(),this.eventBuffer&&this.eventBuffer.hasEvents&&(await async function(e){try{return Promise.all(Sf(e,[Wf(dd.performance.memory)]))}catch(e){return[]}}(this),this.eventBuffer&&e===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const t=Date.now();if(t-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const n=this._popEventContext(),r=this.session.segmentId++;this._maybeSaveSession();const o=await this.eventBuffer.finish();await Xf({replayId:e,recordingData:o,segmentId:r,eventContext:n,session:this.session,options:this.getOptions(),timestamp:t})}catch(e){this._handleException(e),this.stop({reason:"sendReplay"});const t=Ws();t&&t.recordDroppedEvent("send_error","replay")}}else qh&&nr.error("[Replay] No session or eventBuffer found to flush.")}__init5(){this._flush=async({force:e=!1}={})=>{if(!this._isEnabled&&!e)return;if(!this.checkAndHandleExpiredSession())return void(qh&&nr.error("[Replay] Attempting to finish replay event after session expired."));if(!this.session)return;const t=this.session.started,n=Date.now()-t;this._debouncedFlush.cancel();const r=n<this._options.minReplayDuration,o=n>this._options.maxReplayDuration+5e3;if(r||o)return Gh(`[Replay] Session duration (${Math.floor(n/1e3)}s) is too ${r?"short":"long"}, not sending replay.`,this._options._experiments.traceInternals),void(r&&this._debouncedFlush());const s=this.eventBuffer;if(s&&0===this.session.segmentId&&!s.hasCheckout&&Gh("[Replay] Flushing initial segment without checkout.",this._options._experiments.traceInternals),!this._flushLock)return this._flushLock=this._runFlush(),await this._flushLock,void(this._flushLock=void 0);try{await this._flushLock}catch(e){qh&&nr.error(e)}finally{this._debouncedFlush()}}}_maybeSaveSession(){this.session&&this._options.stickySession&&sf(this.session)}__init6(){this._onMutationHandler=e=>{const t=e.length,n=this._options.mutationLimit,r=n&&t>n;if(t>this._options.mutationBreadcrumbLimit||r){const e=Nh({category:"replay.mutations",data:{count:t,limit:r}});this._createCustomBreadcrumb(e)}return!r||(this.stop({reason:"mutationLimit",forceFlush:"session"===this.recordingMode}),!1)}}}function em(e,t,n,r){const o=[...e,..."string"==typeof r?r.split(","):[],...t];return void 0!==n&&("string"==typeof n&&o.push(`.${n}`),tr((()=>{console.warn("[Replay] You are using a deprecated configuration item for privacy. Read the documentation on how to use the new privacy configuration.")}))),o.join(",")}const tm='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',nm=["content-length","content-type","accept"];let rm=!1;class om{static __initStatic(){this.id="Replay"}constructor({flushMinDelay:e=5e3,flushMaxDelay:t=5500,minReplayDuration:n=4999,maxReplayDuration:r=36e5,stickySession:o=!0,useCompression:s=!0,workerUrl:i,_experiments:a={},sessionSampleRate:c,errorSampleRate:l,maskAllText:u=!0,maskAllInputs:d=!0,blockAllMedia:p=!0,mutationBreadcrumbLimit:h=750,mutationLimit:f=1e4,slowClickTimeout:m=7e3,slowClickIgnoreSelectors:g=[],networkDetailAllowUrls:y=[],networkDetailDenyUrls:_=[],networkCaptureBodies:v=!0,networkRequestHeaders:b=[],networkResponseHeaders:S=[],mask:w=[],maskAttributes:k=["title","placeholder"],unmask:E=[],block:T=[],unblock:x=[],ignore:I=[],maskFn:C,beforeAddRecordingEvent:R,beforeErrorSampling:A,blockClass:O,blockSelector:M,maskInputOptions:N,maskTextClass:L,maskTextSelector:D,ignoreClass:$}={}){this.name=om.id;const P=function({mask:e,unmask:t,block:n,unblock:r,ignore:o,blockClass:s,blockSelector:i,maskTextClass:a,maskTextSelector:c,ignoreClass:l}){const u={maskTextSelector:em(e,[".sentry-mask","[data-sentry-mask]"],a,c),unmaskTextSelector:em(t,[".sentry-unmask","[data-sentry-unmask]"]),blockSelector:em(n,[".sentry-block","[data-sentry-block]",'base[href="/"]'],s,i),unblockSelector:em(r,[".sentry-unblock","[data-sentry-unblock]"]),ignoreSelector:em(o,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'],l)};return s instanceof RegExp&&(u.blockClass=s),a instanceof RegExp&&(u.maskTextClass=a),u}({mask:w,unmask:E,block:T,unblock:x,ignore:I,blockClass:O,blockSelector:M,maskTextClass:L,maskTextSelector:D,ignoreClass:$});if(this._recordingOptions={maskAllInputs:d,maskAllText:u,maskInputOptions:{...N||{},password:!0},maskTextFn:C,maskInputFn:C,maskAttributeFn:(e,t,n)=>function({el:e,key:t,maskAttributes:n,maskAllText:r,privacyOptions:o,value:s}){return r?o.unmaskTextSelector&&e.matches(o.unmaskTextSelector)?s:n.includes(t)||"value"===t&&"INPUT"===e.tagName&&["submit","button"].includes(e.getAttribute("type")||"")?s.replace(/[\S]/g,"*"):s:s}({maskAttributes:k,maskAllText:u,privacyOptions:P,key:e,value:t,el:n}),...P,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:e=>{try{e.__rrweb__=!0}catch(e){}}},this._initialOptions={flushMinDelay:e,flushMaxDelay:t,minReplayDuration:Math.min(n,15e3),maxReplayDuration:Math.min(r,_d),stickySession:o,sessionSampleRate:c,errorSampleRate:l,useCompression:s,workerUrl:i,blockAllMedia:p,maskAllInputs:d,maskAllText:u,mutationBreadcrumbLimit:h,mutationLimit:f,slowClickTimeout:m,slowClickIgnoreSelectors:g,networkDetailAllowUrls:y,networkDetailDenyUrls:_,networkCaptureBodies:v,networkRequestHeaders:sm(b),networkResponseHeaders:sm(S),beforeAddRecordingEvent:R,beforeErrorSampling:A,_experiments:a},"number"==typeof c&&(console.warn(`[Replay] You are passing \`sessionSampleRate\` to the Replay integration.\nThis option is deprecated and will be removed soon.\nInstead, configure \`replaysSessionSampleRate\` directly in the SDK init options, e.g.:\nSentry.init({ replaysSessionSampleRate: ${c} })`),this._initialOptions.sessionSampleRate=c),"number"==typeof l&&(console.warn(`[Replay] You are passing \`errorSampleRate\` to the Replay integration.\nThis option is deprecated and will be removed soon.\nInstead, configure \`replaysOnErrorSampleRate\` directly in the SDK init options, e.g.:\nSentry.init({ replaysOnErrorSampleRate: ${l} })`),this._initialOptions.errorSampleRate=l),this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${tm}`:tm),this._isInitialized&&vo())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return rm}set _isInitialized(e){rm=e}setupOnce(){vo()&&(this._setup(),setTimeout((()=>this._initialize())))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:"session"===this._replay.recordingMode}):Promise.resolve()}flush(e){return this._replay&&this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(e):Promise.resolve()}getReplayId(){if(this._replay&&this._replay.isEnabled())return this._replay.getSessionId()}_initialize(){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(),this._replay.initializeSampling())}_setup(){const e=function(e){const t=Ws(),n=t&&t.getOptions(),r={sessionSampleRate:0,errorSampleRate:0,...gr(e)};if(!n)return tr((()=>{console.warn("SDK client is not available.")})),r;null==e.sessionSampleRate&&null==e.errorSampleRate&&null==n.replaysSessionSampleRate&&null==n.replaysOnErrorSampleRate&&tr((()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}));"number"==typeof n.replaysSessionSampleRate&&(r.sessionSampleRate=n.replaysSessionSampleRate);"number"==typeof n.replaysOnErrorSampleRate&&(r.errorSampleRate=n.replaysOnErrorSampleRate);return r}(this._initialOptions);this._replay=new Zf({options:e,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(){try{const e=Ws().getIntegrationByName("ReplayCanvas");if(!e)return;this._replay._canvas=e.getOptions()}catch(e){}}}function sm(e){return[...nm,...e.map((e=>e.toLowerCase()))]}var im;function am(e,t,n=1/0,r=0){return e?e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:am(e.parentNode,t,n,r+1):-1}function cm(e,t){return n=>{const r=n;if(null===r)return!1;try{if(e)if("string"==typeof e){if(r.matches(`.${e}`))return!0}else if(function(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}(r,e))return!0;return!(!t||!r.matches(t))}catch(e){return!1}}}om.__initStatic(),function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(im||(im={}));const lm="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let um={map:{},getId:()=>(console.error(lm),-1),getNode:()=>(console.error(lm),null),removeNodeFromMap(){console.error(lm)},has:()=>(console.error(lm),!1),reset(){console.error(lm)}};function dm(e,t,n,r,o=window){const s=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,r?n:{set(e){ym((()=>{n.set.call(this,e)}),0),s&&s.set&&s.set.call(this,e)}}),()=>dm(e,t,s||{},!0)}function pm(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],o=n(r);return"function"==typeof o&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=o,()=>{e[t]=r}}catch(e){return()=>{}}}function hm(e,t,n,r,o){if(!e)return!1;const s=function(e){return e?e.nodeType===e.ELEMENT_NODE?e:e.parentElement:null}(e);if(!s)return!1;const i=cm(t,n);if(!o){const e=r&&s.matches(r);return i(s)&&!e}const a=am(s,i);let c=-1;return!(a<0)&&(r&&(c=am(s,cm(null,r))),a>-1&&c<0||a<c)}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(um=new Proxy(um,{get:(e,t,n)=>("map"===t&&console.error(lm),Reflect.get(e,t,n))})),/[1-9][0-9]{12}/.test(Date.now().toString());const fm={};function mm(e){const t=fm[e];if(t)return t;const n=window.document;let r=window[e];if(n&&"function"==typeof n.createElement)try{const t=n.createElement("iframe");t.hidden=!0,n.head.appendChild(t);const o=t.contentWindow;o&&o[e]&&(r=o[e]),n.head.removeChild(t)}catch(e){}return fm[e]=r.bind(window)}function gm(...e){return mm("requestAnimationFrame")(...e)}function ym(...e){return mm("setTimeout")(...e)}var _m=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(_m||{});let vm;function bm(e){vm=e}const Sm=e=>{if(!vm)return e;return(...t)=>{try{return e(...t)}catch(e){if(vm&&!0===vm(e))return()=>{};throw e}}};for(var wm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",km="undefined"==typeof Uint8Array?[]:new Uint8Array(256),Em=0;Em<64;Em++)km[wm.charCodeAt(Em)]=Em;const Tm=new Map;const xm=(e,t,n)=>{if(!e||!Rm(e,t)&&"object"!=typeof e)return;const r=function(e,t){let n=Tm.get(e);return n||(n=new Map,Tm.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}(n,e.constructor.name);let o=r.indexOf(e);return-1===o&&(o=r.length,r.push(e)),o};function Im(e,t,n){if(e instanceof Array)return e.map((e=>Im(e,t,n)));if(null===e)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray){return{rr_type:e.constructor.name,args:[Object.values(e)]}}if(e instanceof ArrayBuffer){const t=e.constructor.name,n=function(e){var t,n=new Uint8Array(e),r=n.length,o="";for(t=0;t<r;t+=3)o+=wm[n[t]>>2],o+=wm[(3&n[t])<<4|n[t+1]>>4],o+=wm[(15&n[t+1])<<2|n[t+2]>>6],o+=wm[63&n[t+2]];return r%3==2?o=o.substring(0,o.length-1)+"=":r%3==1&&(o=o.substring(0,o.length-2)+"=="),o}(e);return{rr_type:t,base64:n}}if(e instanceof DataView){return{rr_type:e.constructor.name,args:[Im(e.buffer,t,n),e.byteOffset,e.byteLength]}}if(e instanceof HTMLImageElement){const t=e.constructor.name,{src:n}=e;return{rr_type:t,src:n}}if(e instanceof HTMLCanvasElement){return{rr_type:"HTMLImageElement",src:e.toDataURL()}}if(e instanceof ImageData){return{rr_type:e.constructor.name,args:[Im(e.data,t,n),e.width,e.height]}}if(Rm(e,t)||"object"==typeof e){return{rr_type:e.constructor.name,index:xm(e,t,n)}}return e}const Cm=(e,t,n)=>e.map((e=>Im(e,t,n))),Rm=(e,t)=>{const n=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter((e=>"function"==typeof t[e]));return Boolean(n.find((n=>e instanceof t[n])))};function Am(e,t,n,r,o){const s=[];try{const i=pm(e.HTMLCanvasElement.prototype,"getContext",(function(e){return function(s,...i){if(!hm(this,t,n,r,!0)){const e=function(e){return"experimental-webgl"===e?"webgl":e}(s);if("__context"in this||(this.__context=e),o&&["webgl","webgl2"].includes(e))if(i[0]&&"object"==typeof i[0]){const e=i[0];e.preserveDrawingBuffer||(e.preserveDrawingBuffer=!0)}else i.splice(0,1,{preserveDrawingBuffer:!0})}return e.apply(this,[s,...i])}}));s.push(i)}catch(e){console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{s.forEach((e=>e()))}}function Om(e,t,n,r,o,s,i,a){const c=[],l=Object.getOwnPropertyNames(e);for(const i of l)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(i))try{if("function"!=typeof e[i])continue;const l=pm(e,i,(function(e){return function(...c){const l=e.apply(this,c);if(xm(l,a,this),"tagName"in this.canvas&&!hm(this.canvas,r,o,s,!0)){const e=Cm(c,a,this),r={type:t,property:i,args:e};n(this.canvas,r)}return l}}));c.push(l)}catch(r){const o=dm(e,i,{set(e){n(this.canvas,{type:t,property:i,args:[e],setter:!0})}});c.push(o)}return c}class Mm{reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}constructor(e){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=(e,t)=>{!(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId)&&this.rafStamps.invokeId||(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(e)||this.pendingCanvasMutations.set(e,[]),this.pendingCanvasMutations.get(e).push(t)};const{sampling:t="all",win:n,blockClass:r,blockSelector:o,unblockSelector:s,maxCanvasSize:i,recordCanvas:a,dataURLOptions:c,errorHandler:l}=e;this.mutationCb=e.mutationCb,this.mirror=e.mirror,this.options=e,l&&bm(l),e.enableManualSnapshot||Sm((()=>{a&&"all"===t&&this.initCanvasMutationObserver(n,r,o,s),a&&"number"==typeof t&&this.initCanvasFPSObserver(t,n,r,o,s,i,{dataURLOptions:c})}))()}initCanvasFPSObserver(e,t,n,r,o,s,i){const a=Am(t,n,r,o,!0),c=this.takeSnapshot(!1,e,t,n,r,o,s,i.dataURLOptions);this.resetObservers=()=>{a(),cancelAnimationFrame(c)}}initCanvasMutationObserver(e,t,n,r){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();const o=Am(e,t,n,r,!1),s=function(e,t,n,r,o){const s=[],i=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(const a of i)try{if("function"!=typeof t.CanvasRenderingContext2D.prototype[a])continue;const i=pm(t.CanvasRenderingContext2D.prototype,a,(function(s){return function(...i){return hm(this.canvas,n,r,o,!0)||ym((()=>{const n=Cm(i,t,this);e(this.canvas,{type:_m["2D"],property:a,args:n})}),0),s.apply(this,i)}}));s.push(i)}catch(n){const r=dm(t.CanvasRenderingContext2D.prototype,a,{set(t){e(this.canvas,{type:_m["2D"],property:a,args:[t],setter:!0})}});s.push(r)}return()=>{s.forEach((e=>e()))}}(this.processMutation.bind(this),e,t,n,r),i=function(e,t,n,r,o,s){const i=[];return i.push(...Om(t.WebGLRenderingContext.prototype,_m.WebGL,e,n,r,o,0,t)),void 0!==t.WebGL2RenderingContext&&i.push(...Om(t.WebGL2RenderingContext.prototype,_m.WebGL2,e,n,r,o,0,t)),()=>{i.forEach((e=>e()))}}(this.processMutation.bind(this),e,t,n,r,this.mirror);this.resetObservers=()=>{o(),s(),i()}}snapshot(e){const{options:t}=this,n=this.takeSnapshot(!0,"all"===t.sampling?2:t.sampling||2,t.win,t.blockClass,t.blockSelector,t.unblockSelector,t.maxCanvasSize,t.dataURLOptions,e);this.resetObservers=()=>{cancelAnimationFrame(n)}}takeSnapshot(e,t,n,r,o,s,i,a,c){const l=new Map,u=new Worker(function(){const e=new Blob(['for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t="undefined"==typeof Uint8Array?[]:new Uint8Array(256),a=0;a<64;a++)t[e.charCodeAt(a)]=a;var n=function(t){var a,n=new Uint8Array(t),r=n.length,s="";for(a=0;a<r;a+=3)s+=e[n[a]>>2],s+=e[(3&n[a])<<4|n[a+1]>>4],s+=e[(15&n[a+1])<<2|n[a+2]>>6],s+=e[63&n[a+2]];return r%3==2?s=s.substring(0,s.length-1)+"=":r%3==1&&(s=s.substring(0,s.length-2)+"=="),s};const r=new Map,s=new Map;const i=self;i.onmessage=async function(e){if(!("OffscreenCanvas"in globalThis))return i.postMessage({id:e.data.id});{const{id:t,bitmap:a,width:o,height:f,maxCanvasSize:c,dataURLOptions:g}=e.data,u=async function(e,t,a){const r=e+"-"+t;if("OffscreenCanvas"in globalThis){if(s.has(r))return s.get(r);const i=new OffscreenCanvas(e,t);i.getContext("2d");const o=await i.convertToBlob(a),f=await o.arrayBuffer(),c=n(f);return s.set(r,c),c}return""}(o,f,g),[h,d]=function(e,t,a){if(!a)return[e,t];const[n,r]=a;if(e<=n&&t<=r)return[e,t];let s=e,i=t;return s>n&&(i=Math.floor(n*t/e),s=n),i>r&&(s=Math.floor(r*e/t),i=r),[s,i]}(o,f,c),l=new OffscreenCanvas(h,d),w=l.getContext("bitmaprenderer"),p=h===o&&d===f?a:await createImageBitmap(a,{resizeWidth:h,resizeHeight:d,resizeQuality:"low"});w.transferFromImageBitmap(p),a.close();const y=await l.convertToBlob(g),v=y.type,b=await y.arrayBuffer(),m=n(b);if(p.close(),!r.has(t)&&await u===m)return r.set(t,m),i.postMessage({id:t});if(r.get(t)===m)return i.postMessage({id:t});i.postMessage({id:t,type:v,base64:m,width:o,height:f}),r.set(t,m)}};']);return URL.createObjectURL(e)}());u.onmessage=e=>{const t=e.data,{id:n}=t;if(l.set(n,!1),!("base64"in t))return;const{base64:r,type:o,width:s,height:i}=t;this.mutationCb({id:n,type:_m["2D"],commands:[{property:"clearRect",args:[0,0,s,i]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:r}],type:o}]},0,0,s,i]}]})};const d=1e3/t;let p,h=0;const f=t=>{h&&t-h<d||(h=t,(e=>{if(e)return[e];const t=[];return n.document.querySelectorAll("canvas").forEach((e=>{hm(e,r,o,s,!0)||t.push(e)})),t})(c).forEach((t=>{const n=this.mirror.getId(t);if(!l.get(n)&&t.width&&t.height){if(l.set(n,!0),!e&&["webgl","webgl2"].includes(t.__context)){const e=t.getContext(t.__context);!1===vs([e,"optionalAccess",e=>e.getContextAttributes,"call",e=>e(),"optionalAccess",e=>e.preserveDrawingBuffer])&&e.clear(e.COLOR_BUFFER_BIT)}createImageBitmap(t).then((e=>{u.postMessage({id:n,bitmap:e,width:t.width,height:t.height,dataURLOptions:a,maxCanvasSize:i},[e])})).catch((e=>{Sm((()=>{throw e}))()}))}}))),p=gm(f)};return p=gm(f),p}startPendingCanvasMutationFlusher(){gm((()=>this.flushPendingCanvasMutations()))}startRAFTimestamping(){const e=t=>{this.rafStamps.latestId=t,gm(e)};gm(e)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach(((e,t)=>{const n=this.mirror.getId(t);this.flushPendingCanvasMutationFor(t,n)})),gm((()=>this.flushPendingCanvasMutations()))}flushPendingCanvasMutationFor(e,t){if(this.frozen||this.locked)return;const n=this.pendingCanvasMutations.get(e);if(!n||-1===t)return;const r=n.map((e=>{const{type:t,...n}=e;return n})),{type:o}=n[0];this.mutationCb({id:t,type:o,commands:r}),this.pendingCanvasMutations.delete(e)}}const Nm={low:{sampling:{canvas:1},dataURLOptions:{type:"image/webp",quality:.25}},medium:{sampling:{canvas:2},dataURLOptions:{type:"image/webp",quality:.4}},high:{sampling:{canvas:4},dataURLOptions:{type:"image/webp",quality:.5}}},Lm="ReplayCanvas",Dm=1280,$m=(e={})=>{const[t,n]=e.maxCanvasSize||[],r={quality:e.quality||"medium",enableManualSnapshot:e.enableManualSnapshot,maxCanvasSize:[t?Math.min(t,Dm):Dm,n?Math.min(n,Dm):Dm]};let o;const s=new Promise((e=>o=e));return{name:Lm,setupOnce(){},getOptions(){const{quality:e,enableManualSnapshot:t,maxCanvasSize:n}=r;return{enableManualSnapshot:t,recordCanvas:!0,getCanvasManager:e=>{const r=new Mm({...e,enableManualSnapshot:t,maxCanvasSize:n,errorHandler:e=>{try{"object"==typeof e&&(e.__rrweb__=!0)}catch(e){}}});return o(r),r},...Nm[e||"medium"]||Nm.medium}},async snapshot(e){(await s).snapshot(e)}}},Pm=ua(Lm,$m),Fm=Hn,jm="#ffffff",Um="inherit",Bm="rgba(108, 95, 199, 1)",Hm={fontFamily:"system-ui, 'Helvetica Neue', Arial, sans-serif",fontSize:"14px",background:jm,backgroundHover:"#f6f6f7",foreground:"#2b2233",border:"1.5px solid rgba(41, 35, 47, 0.13)",borderRadius:"25px",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",success:"#268d75",error:"#df3338",submitBackground:"rgba(88, 74, 192, 1)",submitBackgroundHover:Bm,submitBorder:Bm,submitOutlineFocus:"#29232f",submitForeground:jm,submitForegroundHover:jm,cancelBackground:"transparent",cancelBackgroundHover:"var(--background-hover)",cancelBorder:"var(--border)",cancelOutlineFocus:"var(--input-outline-focus)",cancelForeground:"var(--foreground)",cancelForegroundHover:"var(--foreground)",inputBackground:Um,inputForeground:Um,inputBorder:"var(--border)",inputOutlineFocus:Bm,formBorderRadius:"20px",formContentBorderRadius:"6px"},zm=Hm,qm={...Hm,background:"#29232f",backgroundHover:"#352f3b",foreground:"#ebe6ef",border:"1.5px solid rgba(235, 230, 239, 0.15)",success:"#2da98c",error:"#f55459"},Wm="widget",Gm="api";async function Vm({feedback:{message:e,email:t,name:n,source:r,url:o}},{includeReplay:s=!0}={}){const i=Ws(),a=i&&i.getTransport(),c=i&&i.getDsn();if(!i||!a||!c)return;const l={contexts:{feedback:{contact_email:t,name:n,message:e,url:o,source:r}},type:"feedback"};return qs((async e=>{e.clearBreadcrumbs(),[Gm,Wm].includes(String(r))&&e.setLevel("info");const t=await async function({client:e,scope:t,event:n}){const r={};e.emit&&e.emit("preprocessEvent",n,r);const o=await Ds(e.getOptions(),n,r,t,e,hi());return null===o?(e.recordDroppedEvent("event_processor","feedback",n),null):(o.platform=o.platform||"javascript",o)}({scope:e,client:i,event:l});if(!t)return;i.emit&&i.emit("beforeSendFeedback",t,{includeReplay:Boolean(s)});const n=ta(t,c,i.getOptions()._metadata,i.getOptions().tunnel);let o;try{o=await a.send(n)}catch(e){const t=new Error("Unable to send Feedback");try{t.cause=e}catch(e){}throw t}if(o){if("number"==typeof o.statusCode&&(o.statusCode<200||o.statusCode>=300))throw new Error("Unable to send Feedback");return o}}))}function Ym({name:e,email:t,message:n,source:r=Gm,url:o=Kn()},s={}){if(!n)throw new Error("Unable to submit feedback with empty message");return Vm({feedback:{name:e,email:t,message:n,url:o,source:r}},s)}const Km="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function Xm(e,t){return{...e,...t,themeDark:{...e.themeDark,...t.themeDark},themeLight:{...e.themeLight,...t.themeLight}}}function Jm(e){return`\n  --background: ${e.background};\n  --background-hover: ${e.backgroundHover};\n  --foreground: ${e.foreground};\n  --error: ${e.error};\n  --success: ${e.success};\n  --border: ${e.border};\n  --border-radius: ${e.borderRadius};\n  --box-shadow: ${e.boxShadow};\n\n  --submit-background: ${e.submitBackground};\n  --submit-background-hover: ${e.submitBackgroundHover};\n  --submit-border: ${e.submitBorder};\n  --submit-outline-focus: ${e.submitOutlineFocus};\n  --submit-foreground: ${e.submitForeground};\n  --submit-foreground-hover: ${e.submitForegroundHover};\n\n  --cancel-background: ${e.cancelBackground};\n  --cancel-background-hover: ${e.cancelBackgroundHover};\n  --cancel-border: ${e.cancelBorder};\n  --cancel-outline-focus: ${e.cancelOutlineFocus};\n  --cancel-foreground: ${e.cancelForeground};\n  --cancel-foreground-hover: ${e.cancelForegroundHover};\n\n  --input-background: ${e.inputBackground};\n  --input-foreground: ${e.inputForeground};\n  --input-border: ${e.inputBorder};\n  --input-outline-focus: ${e.inputOutlineFocus};\n\n  --form-border-radius: ${e.formBorderRadius};\n  --form-content-border-radius: ${e.formContentBorderRadius};\n  `}function Qm({id:e,colorScheme:t,themeDark:n,themeLight:r}){try{const o=Fm.document,s=o.createElement("div");s.id=e;const i=s.attachShadow({mode:"open"});return i.appendChild(function(e,t,n){const r=e.createElement("style");return r.textContent=`\n:host {\n  --bottom: 1rem;\n  --right: 1rem;\n  --top: auto;\n  --left: auto;\n  --z-index: 100000;\n  --font-family: ${n.light.fontFamily};\n  --font-size: ${n.light.fontSize};\n\n  position: fixed;\n  left: var(--left);\n  right: var(--right);\n  bottom: var(--bottom);\n  top: var(--top);\n  z-index: var(--z-index);\n\n  font-family: var(--font-family);\n  font-size: var(--font-size);\n\n  ${Jm("dark"===t?n.dark:n.light)}\n}\n\n${"system"===t?`\n@media (prefers-color-scheme: dark) {\n  :host {\n    ${Jm(n.dark)}\n  }\n}`:""}\n}`,r}(o,t,{dark:n,light:r})),i.appendChild(function(e){const t=e.createElement("style");return t.textContent="\n.dialog {\n  line-height: 25px;\n  background-color: rgba(0, 0, 0, 0.05);\n  border: none;\n  position: fixed;\n  inset: 0;\n  z-index: 10000;\n  width: 100vw;\n  height: 100vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  opacity: 1;\n  transition: opacity 0.2s ease-in-out;\n}\n\n.dialog:not([open]) {\n  opacity: 0;\n  pointer-events: none;\n  visibility: hidden;\n}\n.dialog:not([open]) .dialog__content {\n  transform: translate(0, -16px) scale(0.98);\n}\n\n.dialog__content {\n  position: fixed;\n  left: var(--left);\n  right: var(--right);\n  bottom: var(--bottom);\n  top: var(--top);\n\n  border: var(--border);\n  border-radius: var(--form-border-radius);\n  background-color: var(--background);\n  color: var(--foreground);\n\n  width: 320px;\n  max-width: 100%;\n  max-height: calc(100% - 2rem);\n  display: flex;\n  flex-direction: column;\n  box-shadow: var(--box-shadow);\n  transition: transform 0.2s ease-in-out;\n  transform: translate(0, 0) scale(1);\n}\n\n.dialog__header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  font-size: 20px;\n  font-weight: 600;\n  padding: 24px 24px 0 24px;\n  margin: 0;\n  margin-bottom: 16px;\n}\n\n.brand-link {\n  display: inline-flex;\n}\n\n.error {\n  color: var(--error);\n  margin-bottom: 16px;\n}\n\n.form {\n  display: grid;\n  overflow: auto;\n  flex-direction: column;\n  gap: 16px;\n  padding: 0 24px 24px;\n}\n\n.form__error-container {\n  color: var(--error);\n}\n\n.form__error-container--hidden {\n  display: none;\n}\n\n.form__label {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n  margin: 0px;\n}\n\n.form__label__text {\n  display: grid;\n  gap: 4px;\n  align-items: center;\n  grid-auto-flow: column;\n  grid-auto-columns: max-content;\n}\n\n.form__label__text--required {\n  font-size: 0.85em;\n}\n\n.form__input {\n  line-height: inherit;\n  background-color: var(--input-background);\n  box-sizing: border-box;\n  border: var(--input-border);\n  border-radius: var(--form-content-border-radius);\n  color: var(--input-foreground);\n  font-family: inherit;\n  font-size: var(--font-size);\n  font-weight: 500;\n  padding: 6px 12px;\n}\n\n.form__input::placeholder {\n  color: var(--input-foreground);\n  opacity: 0.65;\n}\n\n.form__input:focus-visible {\n  outline: 1px auto var(--input-outline-focus);\n}\n\n.form__input--textarea {\n  font-family: inherit;\n  resize: vertical;\n}\n\n.btn-group {\n  display: grid;\n  gap: 8px;\n  margin-top: 8px;\n}\n\n.btn {\n  line-height: inherit;\n  border: var(--cancel-border);\n  border-radius: var(--form-content-border-radius);\n  cursor: pointer;\n  font-family: inherit;\n  font-size: var(--font-size);\n  font-weight: 600;\n  padding: 6px 16px;\n}\n.btn[disabled] {\n  opacity: 0.6;\n  pointer-events: none;\n}\n\n.btn--primary {\n  background-color: var(--submit-background);\n  border-color: var(--submit-border);\n  color: var(--submit-foreground);\n}\n.btn--primary:hover {\n  background-color: var(--submit-background-hover);\n  color: var(--submit-foreground-hover);\n}\n.btn--primary:focus-visible {\n  outline: 1px auto var(--submit-outline-focus);\n}\n\n.btn--default {\n  background-color: var(--cancel-background);\n  color: var(--cancel-foreground);\n  font-weight: 500;\n}\n.btn--default:hover {\n  background-color: var(--cancel-background-hover);\n  color: var(--cancel-foreground-hover);\n}\n.btn--default:focus-visible {\n  outline: 1px auto var(--cancel-outline-focus);\n}\n\n.success-message {\n  background-color: var(--background);\n  border: var(--border);\n  border-radius: var(--border-radius);\n  box-shadow: var(--box-shadow);\n  font-weight: 600;\n  color: var(--success);\n  padding: 12px 24px;\n  line-height: 25px;\n  display: grid;\n  align-items: center;\n  grid-auto-flow: column;\n  gap: 6px;\n  cursor: default;\n}\n\n.success-icon path {\n  fill: var(--success);\n}\n",t}(o)),{shadow:i,host:s}}catch(e){throw nr.warn("[Feedback] Browser does not support shadow DOM API"),new Error("Browser does not support shadow DOM API.")}}async function Zm(e,t,n){if(!e)return;e.hideError();try{return await Ym({...t,source:Wm},n)}catch(t){Km&&nr.error(t),e&&e.showError("There was a problem submitting feedback, please wait and try again.")}}function eg(e,t){return Object.entries(t).forEach((([t,n])=>{e.setAttributeNS(null,t,n)})),e}const tg=20,ng="http://www.w3.org/2000/svg";function rg(e,t,...n){const r=Fm.document.createElement(e);t&&Object.entries(t).forEach((([e,t])=>{"className"===e&&"string"==typeof t?r.setAttribute("class",t):"boolean"==typeof t&&t?r.setAttribute(e,""):"string"==typeof t?r.setAttribute(e,t):e.startsWith("on")&&"function"==typeof t&&r.addEventListener(e.substring(2).toLowerCase(),t)}));for(const e of n)og(r,e);return r}function og(e,t){const n=Fm.document;if(null!=t)if(Array.isArray(t))for(const n of t)og(e,n);else!1===t||("string"==typeof t?e.appendChild(n.createTextNode(t)):t instanceof Node?e.appendChild(t):e.appendChild(n.createTextNode(String(t))))}function sg({buttonLabel:e,onClick:t}){const n=rg("button",{type:"button",className:"widget__actor","aria-label":e,"aria-hidden":"false"},function(){const e=e=>Fm.document.createElementNS(ng,e),t=eg(e("svg"),{class:"feedback-icon",width:`${tg}`,height:`${tg}`,viewBox:`0 0 ${tg} ${tg}`,fill:"none"}),n=eg(e("g"),{clipPath:"url(#clip0_57_80)"}),r=eg(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.6622 15H12.3997C12.2129 14.9959 12.031 14.9396 11.8747 14.8375L8.04965 12.2H7.49956V19.1C7.4875 19.3348 7.3888 19.5568 7.22256 19.723C7.05632 19.8892 6.83435 19.9879 6.59956 20H2.04956C1.80193 19.9968 1.56535 19.8969 1.39023 19.7218C1.21511 19.5467 1.1153 19.3101 1.11206 19.0625V12.2H0.949652C0.824431 12.2017 0.700142 12.1783 0.584123 12.1311C0.468104 12.084 0.362708 12.014 0.274155 11.9255C0.185602 11.8369 0.115689 11.7315 0.0685419 11.6155C0.0213952 11.4995 -0.00202913 11.3752 -0.00034808 11.25V3.75C-0.00900498 3.62067 0.0092504 3.49095 0.0532651 3.36904C0.0972798 3.24712 0.166097 3.13566 0.255372 3.04168C0.344646 2.94771 0.452437 2.87327 0.571937 2.82307C0.691437 2.77286 0.82005 2.74798 0.949652 2.75H8.04965L11.8747 0.1625C12.031 0.0603649 12.2129 0.00407221 12.3997 0H15.6622C15.9098 0.00323746 16.1464 0.103049 16.3215 0.278167C16.4966 0.453286 16.5964 0.689866 16.5997 0.9375V3.25269C17.3969 3.42959 18.1345 3.83026 18.7211 4.41679C19.5322 5.22788 19.9878 6.32796 19.9878 7.47502C19.9878 8.62209 19.5322 9.72217 18.7211 10.5333C18.1345 11.1198 17.3969 11.5205 16.5997 11.6974V14.0125C16.6047 14.1393 16.5842 14.2659 16.5395 14.3847C16.4948 14.5035 16.4268 14.6121 16.3394 14.7042C16.252 14.7962 16.147 14.8698 16.0307 14.9206C15.9144 14.9714 15.7891 14.9984 15.6622 15ZM1.89695 10.325H1.88715V4.625H8.33715C8.52423 4.62301 8.70666 4.56654 8.86215 4.4625L12.6872 1.875H14.7247V13.125H12.6872L8.86215 10.4875C8.70666 10.3835 8.52423 10.327 8.33715 10.325H2.20217C2.15205 10.3167 2.10102 10.3125 2.04956 10.3125C1.9981 10.3125 1.94708 10.3167 1.89695 10.325ZM2.98706 12.2V18.1625H5.66206V12.2H2.98706ZM16.5997 9.93612V5.01393C16.6536 5.02355 16.7072 5.03495 16.7605 5.04814C17.1202 5.13709 17.4556 5.30487 17.7425 5.53934C18.0293 5.77381 18.2605 6.06912 18.4192 6.40389C18.578 6.73866 18.6603 7.10452 18.6603 7.47502C18.6603 7.84552 18.578 8.21139 18.4192 8.54616C18.2605 8.88093 18.0293 9.17624 17.7425 9.41071C17.4556 9.64518 17.1202 9.81296 16.7605 9.90191C16.7072 9.91509 16.6536 9.9265 16.5997 9.93612Z"});t.appendChild(n).appendChild(r);const o=e("defs"),s=eg(e("clipPath"),{id:"clip0_57_80"}),i=eg(e("rect"),{width:`${tg}`,height:`${tg}`,fill:"white"});return s.appendChild(i),o.appendChild(s),t.appendChild(o).appendChild(s).appendChild(i),{get el(){return t}}}().el,e?rg("span",{className:"widget__actor__text"},e):null);return n.addEventListener("click",(function(e){t&&t(e)})),{get el(){return n},show:()=>{n.classList.remove("widget__actor--hidden"),n.setAttribute("aria-hidden","false")},hide:()=>{n.classList.add("widget__actor--hidden"),n.setAttribute("aria-hidden","true")}}}function ig(e,t){const n=e.get(t);return"string"==typeof n?n.trim():""}function ag({nameLabel:e,namePlaceholder:t,emailLabel:n,emailPlaceholder:r,messageLabel:o,messagePlaceholder:s,isRequiredLabel:i,cancelButtonLabel:a,submitButtonLabel:c,showName:l,showEmail:u,isNameRequired:d,isEmailRequired:p,defaultName:h,defaultEmail:f,onCancel:m,onSubmit:g}){const{el:y}=function({label:e}){return{el:rg("button",{type:"submit",className:"btn btn--primary","aria-label":e},e)}}({label:c});const _=rg("div",{className:"form__error-container form__error-container--hidden","aria-hidden":"true"});const v=rg("input",{id:"name",type:l?"text":"hidden","aria-hidden":l?"false":"true",name:"name",required:d,className:"form__input",placeholder:t,value:h}),b=rg("input",{id:"email",type:u?"text":"hidden","aria-hidden":u?"false":"true",name:"email",required:p,className:"form__input",placeholder:r,value:f}),S=rg("textarea",{id:"message",autoFocus:"true",rows:"5",name:"message",required:!0,className:"form__input form__input--textarea",placeholder:s}),w=rg("button",{type:"button",className:"btn btn--default","aria-label":a,onClick:e=>{m&&m(e)}},a),k=rg("form",{className:"form",onSubmit:function(e){if(e.preventDefault(),e.target instanceof HTMLFormElement)try{if(g){const t=new FormData(e.target),n={name:ig(t,"name"),email:ig(t,"email"),message:ig(t,"message")};g(n)}}catch(e){}}},[_,l&&rg("label",{htmlFor:"name",className:"form__label"},[rg("span",{className:"form__label__text"},e,d&&rg("span",{className:"form__label__text--required"},` ${i}`)),v]),!l&&v,u&&rg("label",{htmlFor:"email",className:"form__label"},[rg("span",{className:"form__label__text"},n,p&&rg("span",{className:"form__label__text--required"},` ${i}`)),b]),!u&&b,rg("label",{htmlFor:"message",className:"form__label"},[rg("span",{className:"form__label__text"},o,rg("span",{className:"form__label__text--required"},` ${i}`)),S]),rg("div",{className:"btn-group"},[y,w])]);return{get el(){return k},showError:function(e){_.textContent=e,_.classList.remove("form__error-container--hidden"),_.setAttribute("aria-hidden","false")},hideError:function(){_.textContent="",_.classList.add("form__error-container--hidden"),_.setAttribute("aria-hidden","true")}}}const cg="http://www.w3.org/2000/svg";function lg({formTitle:e,showBranding:t,showName:n,showEmail:r,isNameRequired:o,isEmailRequired:s,colorScheme:i,defaultName:a,defaultEmail:c,onClosed:l,onCancel:u,onSubmit:d,...p}){let h=null;function f(){h&&(h.open=!1)}const{el:m,showError:g,hideError:y}=ag({showEmail:r,showName:n,isEmailRequired:s,isNameRequired:o,defaultName:a,defaultEmail:c,onSubmit:d,onCancel:u,...p});return h=rg("dialog",{className:"dialog",open:!0,onClick:function(){f(),l&&l()}},rg("div",{className:"dialog__content",onClick:e=>{e.stopPropagation()}},rg("h2",{className:"dialog__header"},e,t&&rg("a",{className:"brand-link",target:"_blank",href:"https://sentry.io/welcome/",title:"Powered by Sentry",rel:"noopener noreferrer"},function({colorScheme:e}){const t=e=>Fm.document.createElementNS(cg,e),n=eg(t("svg"),{class:"sentry-logo",width:"32",height:"30",viewBox:"0 0 72 66",fill:"none"}),r=eg(t("path"),{transform:"translate(11, 11)",d:"M29,2.26a4.67,4.67,0,0,0-8,0L14.42,13.53A32.21,32.21,0,0,1,32.17,40.19H27.55A27.68,27.68,0,0,0,12.09,17.47L6,28a15.92,15.92,0,0,1,9.23,12.17H4.62A.76.76,0,0,1,4,39.06l2.94-5a10.74,10.74,0,0,0-3.36-1.9l-2.91,5a4.54,4.54,0,0,0,1.69,6.24A4.66,4.66,0,0,0,4.62,44H19.15a19.4,19.4,0,0,0-8-17.31l2.31-4A23.87,23.87,0,0,1,23.76,44H36.07a35.88,35.88,0,0,0-16.41-31.8l4.67-8a.77.77,0,0,1,1.05-.27c.53.29,20.29,34.77,20.66,35.17a.76.76,0,0,1-.68,1.13H40.6q.09,1.91,0,3.81h4.78A4.59,4.59,0,0,0,50,39.43a4.49,4.49,0,0,0-.62-2.28Z"});n.append(r);const o=t("defs"),s=t("style");return s.textContent=`\n    path {\n      fill: ${"dark"===e?"#fff":"#362d59"};\n    }`,"system"===e&&(s.textContent+="\n    @media (prefers-color-scheme: dark) {\n      path: {\n        fill: '#fff';\n      }\n    }\n    "),o.append(s),n.append(o),{get el(){return n}}}({colorScheme:i}).el)),m)),{get el(){return h},showError:g,hideError:y,open:function(){h&&(h.open=!0)},close:f,checkIsOpen:function(){return h&&!0===h.open||!1}}}const ug=16,dg=17,pg="http://www.w3.org/2000/svg";function hg({message:e,onRemove:t}){function n(){r&&(r.remove(),t&&t())}const r=rg("div",{className:"success-message",onClick:n},function(){const e=e=>Fm.document.createElementNS(pg,e),t=eg(e("svg"),{class:"success-icon",width:`${ug}`,height:`${dg}`,viewBox:`0 0 ${ug} ${dg}`,fill:"none"}),n=eg(e("g"),{clipPath:"url(#clip0_57_156)"}),r=eg(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.55544 15.1518C4.87103 16.0308 6.41775 16.5 8 16.5C10.1217 16.5 12.1566 15.6571 13.6569 14.1569C15.1571 12.6566 16 10.6217 16 8.5C16 6.91775 15.5308 5.37103 14.6518 4.05544C13.7727 2.73985 12.5233 1.71447 11.0615 1.10897C9.59966 0.503466 7.99113 0.34504 6.43928 0.653721C4.88743 0.962403 3.46197 1.72433 2.34315 2.84315C1.22433 3.96197 0.462403 5.38743 0.153721 6.93928C-0.15496 8.49113 0.00346625 10.0997 0.608967 11.5615C1.21447 13.0233 2.23985 14.2727 3.55544 15.1518ZM4.40546 3.1204C5.46945 2.40946 6.72036 2.03 8 2.03C9.71595 2.03 11.3616 2.71166 12.575 3.92502C13.7883 5.13838 14.47 6.78405 14.47 8.5C14.47 9.77965 14.0905 11.0306 13.3796 12.0945C12.6687 13.1585 11.6582 13.9878 10.476 14.4775C9.29373 14.9672 7.99283 15.0953 6.73777 14.8457C5.48271 14.596 4.32987 13.9798 3.42502 13.075C2.52018 12.1701 1.90397 11.0173 1.65432 9.76224C1.40468 8.50718 1.5328 7.20628 2.0225 6.02404C2.5122 4.8418 3.34148 3.83133 4.40546 3.1204Z"}),o=eg(e("path"),{d:"M6.68775 12.4297C6.78586 12.4745 6.89218 12.4984 7 12.5C7.11275 12.4955 7.22315 12.4664 7.32337 12.4145C7.4236 12.3627 7.51121 12.2894 7.58 12.2L12 5.63999C12.0848 5.47724 12.1071 5.28902 12.0625 5.11098C12.0178 4.93294 11.9095 4.77744 11.7579 4.67392C11.6064 4.57041 11.4221 4.52608 11.24 4.54931C11.0579 4.57254 10.8907 4.66173 10.77 4.79999L6.88 10.57L5.13 8.56999C5.06508 8.49566 4.98613 8.43488 4.89768 8.39111C4.80922 8.34735 4.713 8.32148 4.61453 8.31498C4.51605 8.30847 4.41727 8.32147 4.32382 8.35322C4.23038 8.38497 4.14413 8.43484 4.07 8.49999C3.92511 8.63217 3.83692 8.81523 3.82387 9.01092C3.81083 9.2066 3.87393 9.39976 4 9.54999L6.43 12.24C6.50187 12.3204 6.58964 12.385 6.68775 12.4297Z"});t.appendChild(n).append(o,r);const s=e("defs"),i=eg(e("clipPath"),{id:"clip0_57_156"}),a=eg(e("rect"),{width:`${ug}`,height:`${ug}`,fill:"white",transform:"translate(0 0.5)"});return i.appendChild(a),s.appendChild(i),t.appendChild(s).appendChild(i).appendChild(a),{get el(){return t}}}().el,e);return{el:r,remove:n}}function fg({shadow:e,options:{shouldCreateActor:t=!0,...n},attachTo:r}){let o,s,i=!1;async function a(t){if(!s)return;const r=[];if(n.isNameRequired&&!t.name&&r.push(n.nameLabel),n.isEmailRequired&&!t.email&&r.push(n.emailLabel),t.message||r.push(n.messageLabel),r.length>0)return void s.showError(`Please enter in the following required fields: ${r.join(", ")}`);await Zm(s,t)?(h(),function(){if(e)try{const t=hg({message:n.successMessageText,onRemove:()=>{r&&clearTimeout(r),l()}});if(!t.el)throw new Error("Unable to show success message");e.appendChild(t.el);const r=setTimeout((()=>{t&&t.remove()}),5e3)}catch(e){nr.error(e)}}(),n.onSubmitSuccess&&n.onSubmitSuccess()):n.onSubmitError&&n.onSubmitError()}function c(){const e=Ws(),t=e&&e.getIntegrationByName&&e.getIntegrationByName("Replay");t&&t.flush().catch((e=>{Km&&nr.error(e)}))}function l(){o&&o.show()}function u(){o&&o.hide()}function d(){try{if(s)return s.open(),i=!0,n.onFormOpen&&n.onFormOpen(),void c();const t=n.useSentryUser,r=Gs(),o=r&&r.getUser();if(s=lg({colorScheme:n.colorScheme,showBranding:n.showBranding,showName:n.showName||n.isNameRequired,showEmail:n.showEmail||n.isEmailRequired,isNameRequired:n.isNameRequired,isEmailRequired:n.isEmailRequired,formTitle:n.formTitle,cancelButtonLabel:n.cancelButtonLabel,submitButtonLabel:n.submitButtonLabel,emailLabel:n.emailLabel,emailPlaceholder:n.emailPlaceholder,messageLabel:n.messageLabel,messagePlaceholder:n.messagePlaceholder,nameLabel:n.nameLabel,namePlaceholder:n.namePlaceholder,isRequiredLabel:n.isRequiredLabel,defaultName:t&&o&&o[t.name]||"",defaultEmail:t&&o&&o[t.email]||"",onClosed:()=>{l(),i=!1,n.onFormClose&&n.onFormClose()},onCancel:()=>{p(),l()},onSubmit:a}),!s.el)throw new Error("Unable to open Feedback dialog");e.appendChild(s.el),u(),n.onFormOpen&&n.onFormOpen(),c()}catch(e){nr.error(e)}}function p(){s&&(s.close(),i=!1,n.onFormClose&&n.onFormClose())}function h(){if(s){p();const e=s.el;e&&e.remove(),s=void 0}}function f(){i||d(),u()}return r?r.addEventListener("click",f):t&&(o=sg({buttonLabel:n.buttonLabel,onClick:f}),o.el&&e.appendChild(o.el)),{get actor(){return o},get dialog(){return s},showActor:l,hideActor:u,removeActor:function(){o&&o.el&&o.el.remove()},openDialog:d,closeDialog:p,removeDialog:h}}const mg=Fm.document;class gg{static __initStatic(){this.id="Feedback"}constructor({autoInject:e=!0,id:t="sentry-feedback",isEmailRequired:n=!1,isNameRequired:r=!1,showBranding:o=!0,showEmail:s=!0,showName:i=!0,useSentryUser:a={email:"email",name:"username"},themeDark:c,themeLight:l,colorScheme:u="system",buttonLabel:d="Report a Bug",cancelButtonLabel:p="Cancel",submitButtonLabel:h="Send Bug Report",formTitle:f="Report a Bug",emailPlaceholder:m="your.email@example.org",emailLabel:g="Email",messagePlaceholder:y="What's the bug? What did you expect?",messageLabel:_="Description",namePlaceholder:v="Your Name",nameLabel:b="Name",isRequiredLabel:S="(required)",successMessageText:w="Thank you for your report!",onFormClose:k,onFormOpen:E,onSubmitError:T,onSubmitSuccess:x}={}){this.name=gg.id,this._host=null,this._shadow=null,this._widget=null,this._widgets=new Set,this._hasInsertedActorStyles=!1,this.options={autoInject:e,showBranding:o,id:t,isEmailRequired:n,isNameRequired:r,showEmail:s,showName:i,useSentryUser:a,colorScheme:u,themeDark:{...qm,...c},themeLight:{...zm,...l},buttonLabel:d,cancelButtonLabel:p,submitButtonLabel:h,formTitle:f,emailLabel:g,emailPlaceholder:m,messageLabel:_,messagePlaceholder:y,nameLabel:b,namePlaceholder:v,isRequiredLabel:S,successMessageText:w,onFormClose:k,onFormOpen:E,onSubmitError:T,onSubmitSuccess:x}}setupOnce(){if(vo())try{this._cleanupWidgetIfExists();const{autoInject:e}=this.options;if(!e)return;this._createWidget(this.options)}catch(e){Km&&nr.error(e)}}openDialog(){this._widget||this._createWidget({...this.options,shouldCreateActor:!1}),this._widget&&this._widget.openDialog()}closeDialog(){this._widget&&this._widget.closeDialog()}attachTo(e,t){try{const n=Xm(this.options,t||{});return this._ensureShadowHost(n,(({shadow:t})=>{const r="string"==typeof e?mg.querySelector(e):"function"==typeof e.addEventListener?e:null;if(!r)return Km&&nr.error("[Feedback] Unable to attach to target element"),null;const o=fg({shadow:t,options:n,attachTo:r});return this._widgets.add(o),this._widget||(this._widget=o),o}))}catch(e){return Km&&nr.error(e),null}}createWidget(e){try{return this._createWidget(Xm(this.options,e||{}))}catch(e){return Km&&nr.error(e),null}}removeWidget(e){if(!e)return!1;try{if(this._widgets.has(e))return e.removeActor(),e.removeDialog(),this._widgets.delete(e),this._widget===e&&(this._widget=null),!0}catch(e){Km&&nr.error(e)}return!1}getWidget(){return this._widget}remove(){this._host&&this._host.remove(),this._initialize()}_initialize(){this._host=null,this._shadow=null,this._widget=null,this._widgets=new Set,this._hasInsertedActorStyles=!1}_cleanupWidgetIfExists(){this._host&&this.remove();const e=mg.querySelector(`#${this.options.id}`);e&&e.remove()}_createWidget(e){return this._ensureShadowHost(e,(({shadow:t})=>{const n=fg({shadow:t,options:e});return!this._hasInsertedActorStyles&&n.actor&&(t.appendChild(function(e){const t=e.createElement("style");return t.textContent="\n.widget__actor {\n  position: fixed;\n  left: var(--left);\n  right: var(--right);\n  bottom: var(--bottom);\n  top: var(--top);\n  z-index: var(--z-index);\n\n  line-height: 16px;\n\n  display: flex;\n  align-items: center;\n  gap: 8px;\n\n  border-radius: var(--border-radius);\n  cursor: pointer;\n  font-family: inherit;\n  font-size: var(--font-size);\n  font-weight: 600;\n  padding: 16px;\n  text-decoration: none;\n  z-index: 9000;\n\n  color: var(--foreground);\n  background-color: var(--background);\n  border: var(--border);\n  box-shadow: var(--box-shadow);\n  opacity: 1;\n  transition: opacity 0.1s ease-in-out;\n}\n\n.widget__actor:hover {\n  background-color: var(--background-hover);\n}\n\n.widget__actor svg {\n  width: 16px;\n  height: 16px;\n}\n\n.widget__actor--hidden {\n  opacity: 0;\n  pointer-events: none;\n  visibility: hidden;\n}\n\n.widget__actor__text {\n}\n\n@media (max-width: 600px) {\n  .widget__actor__text {\n    display: none;\n  }\n}\n\n.feedback-icon path {\n  fill: var(--foreground);\n}\n",t}(mg)),this._hasInsertedActorStyles=!0),this._widgets.add(n),this._widget||(this._widget=n),n}))}_ensureShadowHost(e,t){let n=!1;if(!this._shadow||!this._host){const{id:t,colorScheme:r,themeLight:o,themeDark:s}=e,{shadow:i,host:a}=Qm({id:t,colorScheme:r,themeLight:o,themeDark:s});this._shadow=i,this._host=a,n=!0}this._host.dataset.sentryFeedbackColorscheme=e.colorScheme;const r=t({shadow:this._shadow,host:this._host});return n&&mg.body.appendChild(this._host),r}}gg.__initStatic();const yg="CaptureConsole",_g=(e={})=>{const t=e.levels||Zn;return{name:yg,setupOnce(){},setup(e){"console"in Hn&&Rr((({args:n,level:r})=>{Ws()===e&&t.includes(r)&&function(e,t){const n={level:Ho(t),extra:{arguments:e}};qs((r=>{if(r.addEventProcessor((e=>(e.logger="console",Dr(e,{handled:!1,type:"console"}),e))),"assert"===t&&!1===e[0]){const t=`Assertion failed: ${Dn(e.slice(1)," ")||"console.assert"}`;return r.setExtra("arguments",e.slice(1)),void Us(t,n)}const o=e.find((e=>e instanceof Error));if("error"===t&&o)return void js(o,n);Us(Dn(e," "),n)}))}(n,r)}))}}};ua(yg,_g);const vg="Debug",bg=(e={})=>{const t={debugger:!1,stringify:!1,...e};return{name:vg,setupOnce(){},setup(e){e.on&&e.on("beforeSendEvent",((e,n)=>{t.debugger,tr((()=>{t.stringify?(console.log(JSON.stringify(e,null,2)),n&&Object.keys(n).length&&console.log(JSON.stringify(n,null,2))):(console.log(e),n&&Object.keys(n).length&&console.log(n))}))}))}}};ua(vg,bg);const Sg="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,wg="Dedupe",kg=()=>{let e;return{name:wg,setupOnce(){},processEvent(t){if(t.type)return t;try{if(function(e,t){if(!t)return!1;if(function(e,t){const n=e.message,r=t.message;if(!n&&!r)return!1;if(n&&!r||!n&&r)return!1;if(n!==r)return!1;if(!Tg(e,t))return!1;if(!Eg(e,t))return!1;return!0}(e,t))return!0;if(function(e,t){const n=xg(t),r=xg(e);if(!n||!r)return!1;if(n.type!==r.type||n.value!==r.value)return!1;if(!Tg(e,t))return!1;if(!Eg(e,t))return!1;return!0}(e,t))return!0;return!1}(t,e))return Sg&&nr.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(e){}return e=t}}};function Eg(e,t){let n=Ig(e),r=Ig(t);if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;if(r.length!==n.length)return!1;for(let e=0;e<r.length;e++){const t=r[e],o=n[e];if(t.filename!==o.filename||t.lineno!==o.lineno||t.colno!==o.colno||t.function!==o.function)return!1}return!0}function Tg(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;try{return!(n.join("")!==r.join(""))}catch(e){return!1}}function xg(e){return e.exception&&e.exception.values&&e.exception.values[0]}function Ig(e){const t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch(e){return}}ua(wg,kg);const Cg="ExtraErrorData",Rg=(e={})=>{const t=e.depth||3,n=e.captureErrorCause||!1;return{name:Cg,setupOnce(){},processEvent:(e,r)=>function(e,t={},n,r){if(!t.originalException||!vn(t.originalException))return e;const o=t.originalException.name||t.originalException.constructor.name,s=function(e,t){try{const n=["name","message","stack","line","column","fileName","lineNumber","columnNumber","toJSON"],r={};for(const t of Object.keys(e)){if(-1!==n.indexOf(t))continue;const o=e[t];r[t]=vn(o)?o.toString():o}if(t&&void 0!==e.cause&&(r.cause=vn(e.cause)?e.cause.toString():e.cause),"function"==typeof e.toJSON){const t=e.toJSON();for(const e of Object.keys(t)){const n=t[e];r[e]=vn(n)?n.toString():n}}return r}catch(e){Sg&&nr.error("Unable to extract extra data from the Error object:",e)}return null}(t.originalException,r);if(s){const t={...e.contexts},r=bo(s,n);return xn(r)&&(ur(r,"__sentry_skip_normalization__",!0),t[o]=r),{...e,contexts:t}}return e}(e,r,t,n)}};function Ag(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}ua(Cg,Rg);var Og={exports:{}};
/*!
	    localForage -- Offline Storage, Improved
	    Version 1.10.0
	    https://localforage.github.io/localForage
	    (c) 2013-2017 Mozilla, Apache License 2.0
	*/!function(e,t){e.exports=function e(t,n,r){function o(i,a){if(!n[i]){if(!t[i]){if(!a&&Ag)return Ag(i);if(s)return s(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[i]={exports:{}};t[i][0].call(l.exports,(function(e){var n=t[i][1][e];return o(n||e)}),l,l.exports,e,t,n,r)}return n[i].exports}for(var s=Ag,i=0;i<r.length;i++)o(r[i]);return o}({1:[function(e,t,n){(function(e){var n,r,o=e.MutationObserver||e.WebKitMutationObserver;if(o){var s=0,i=new o(u),a=e.document.createTextNode("");i.observe(a,{characterData:!0}),n=function(){a.data=s=++s%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){u(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(u,0)};else{var c=new e.MessageChannel;c.port1.onmessage=u,n=function(){c.port2.postMessage(0)}}var l=[];function u(){var e,t;r=!0;for(var n=l.length;n;){for(t=l,l=[],e=-1;++e<n;)t[e]();n=l.length}r=!1}function d(e){1!==l.push(e)||r||n()}t.exports=d}).call(this,void 0!==Nt?Nt:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){var r=e(1);function o(){}var s={},i=["REJECTED"],a=["FULFILLED"],c=["PENDING"];function l(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,e!==o&&h(this,e)}function u(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function d(e,t,n){r((function(){var r;try{r=t(n)}catch(t){return s.reject(e,t)}r===e?s.reject(e,new TypeError("Cannot resolve promise with itself")):s.resolve(e,r)}))}function p(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function h(e,t){var n=!1;function r(t){n||(n=!0,s.reject(e,t))}function o(t){n||(n=!0,s.resolve(e,t))}function i(){t(o,r)}var a=f(i);"error"===a.status&&r(a.value)}function f(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}function m(e){return e instanceof this?e:s.resolve(new this(o),e)}function g(e){var t=new this(o);return s.reject(t,e)}function y(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var i=new Array(n),a=0,c=-1,l=new this(o);++c<n;)u(e[c],c);return l;function u(e,o){function c(e){i[o]=e,++a!==n||r||(r=!0,s.resolve(l,i))}t.resolve(e).then(c,(function(e){r||(r=!0,s.reject(l,e))}))}}function _(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var i=-1,a=new this(o);++i<n;)c(e[i]);return a;function c(e){t.resolve(e).then((function(e){r||(r=!0,s.resolve(a,e))}),(function(e){r||(r=!0,s.reject(a,e))}))}}t.exports=l,l.prototype.catch=function(e){return this.then(null,e)},l.prototype.then=function(e,t){if("function"!=typeof e&&this.state===a||"function"!=typeof t&&this.state===i)return this;var n=new this.constructor(o);return this.state!==c?d(n,this.state===a?e:t,this.outcome):this.queue.push(new u(n,e,t)),n},u.prototype.callFulfilled=function(e){s.resolve(this.promise,e)},u.prototype.otherCallFulfilled=function(e){d(this.promise,this.onFulfilled,e)},u.prototype.callRejected=function(e){s.reject(this.promise,e)},u.prototype.otherCallRejected=function(e){d(this.promise,this.onRejected,e)},s.resolve=function(e,t){var n=f(p,t);if("error"===n.status)return s.reject(e,n.value);var r=n.value;if(r)h(e,r);else{e.state=a,e.outcome=t;for(var o=-1,i=e.queue.length;++o<i;)e.queue[o].callFulfilled(t)}return e},s.reject=function(e,t){e.state=i,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},l.resolve=m,l.reject=g,l.all=y,l.race=_},{1:1}],3:[function(e,t,n){(function(t){"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==Nt?Nt:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,n){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}var i=s();function a(){try{if(!i||!i.open)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}function c(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(o){if("TypeError"!==o.name)throw o;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<e.length;r+=1)n.append(e[r]);return n.getBlob(t.type)}}"undefined"==typeof Promise&&e(3);var l=Promise;function u(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function d(e,t,n){"function"==typeof t&&e.then(t),"function"==typeof n&&e.catch(n)}function p(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function h(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var f="local-forage-detect-blob-support",m=void 0,g={},y=Object.prototype.toString,_="readonly",v="readwrite";function b(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),o=0;o<t;o++)r[o]=e.charCodeAt(o);return n}function S(e){return new l((function(t){var n=e.transaction(f,v),r=c([""]);n.objectStore(f).put(r,"key"),n.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},n.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);t(n||!e||parseInt(e[1],10)>=43)}})).catch((function(){return!1}))}function w(e){return"boolean"==typeof m?l.resolve(m):S(e).then((function(e){return m=e}))}function k(e){var t=g[e.name],n={};n.promise=new l((function(e,t){n.resolve=e,n.reject=t})),t.deferredOperations.push(n),t.dbReady?t.dbReady=t.dbReady.then((function(){return n.promise})):t.dbReady=n.promise}function E(e){var t=g[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function T(e,t){var n=g[e.name].deferredOperations.pop();if(n)return n.reject(t),n.promise}function x(e,t){return new l((function(n,r){if(g[e.name]=g[e.name]||$(),e.db){if(!t)return n(e.db);k(e),e.db.close()}var o=[e.name];t&&o.push(e.version);var s=i.open.apply(i,o);t&&(s.onupgradeneeded=function(t){var n=s.result;try{n.createObjectStore(e.storeName),t.oldVersion<=1&&n.createObjectStore(f)}catch(n){if("ConstraintError"!==n.name)throw n;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),s.onerror=function(e){e.preventDefault(),r(s.error)},s.onsuccess=function(){var t=s.result;t.onversionchange=function(e){e.target.close()},n(t),E(e)}}))}function I(e){return x(e,!1)}function C(e){return x(e,!0)}function R(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),r=e.version<e.db.version,o=e.version>e.db.version;if(r&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),o||n){if(n){var s=e.db.version+1;s>e.version&&(e.version=s)}return!0}return!1}function A(e){return new l((function(t,n){var r=new FileReader;r.onerror=n,r.onloadend=function(n){var r=btoa(n.target.result||"");t({__local_forage_encoded_blob:!0,data:r,type:e.type})},r.readAsBinaryString(e)}))}function O(e){return c([b(atob(e.data))],{type:e.type})}function M(e){return e&&e.__local_forage_encoded_blob}function N(e){var t=this,n=t._initReady().then((function(){var e=g[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return d(n,e,e),n}function L(e){k(e);for(var t=g[e.name],n=t.forages,r=0;r<n.length;r++){var o=n[r];o._dbInfo.db&&(o._dbInfo.db.close(),o._dbInfo.db=null)}return e.db=null,I(e).then((function(t){return e.db=t,R(e)?C(e):t})).then((function(r){e.db=t.db=r;for(var o=0;o<n.length;o++)n[o]._dbInfo.db=r})).catch((function(t){throw T(e,t),t}))}function D(e,t,n,r){void 0===r&&(r=1);try{var o=e.db.transaction(e.storeName,t);n(null,o)}catch(o){if(r>0&&(!e.db||"InvalidStateError"===o.name||"NotFoundError"===o.name))return l.resolve().then((function(){if(!e.db||"NotFoundError"===o.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),C(e)})).then((function(){return L(e).then((function(){D(e,t,n,r-1)}))})).catch(n);n(o)}}function $(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function P(e){var t=this,n={db:null};if(e)for(var r in e)n[r]=e[r];var o=g[n.name];o||(o=$(),g[n.name]=o),o.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=N);var s=[];function i(){return l.resolve()}for(var a=0;a<o.forages.length;a++){var c=o.forages[a];c!==t&&s.push(c._initReady().catch(i))}var u=o.forages.slice(0);return l.all(s).then((function(){return n.db=o.db,I(n)})).then((function(e){return n.db=e,R(n,t._defaultConfig.version)?C(n):e})).then((function(e){n.db=o.db=e,t._dbInfo=n;for(var r=0;r<u.length;r++){var s=u[r];s!==t&&(s._dbInfo.db=n.db,s._dbInfo.version=n.version)}}))}function F(e,t){var n=this;e=p(e);var r=new l((function(t,r){n.ready().then((function(){D(n._dbInfo,_,(function(o,s){if(o)return r(o);try{var i=s.objectStore(n._dbInfo.storeName).get(e);i.onsuccess=function(){var e=i.result;void 0===e&&(e=null),M(e)&&(e=O(e)),t(e)},i.onerror=function(){r(i.error)}}catch(e){r(e)}}))})).catch(r)}));return u(r,t),r}function j(e,t){var n=this,r=new l((function(t,r){n.ready().then((function(){D(n._dbInfo,_,(function(o,s){if(o)return r(o);try{var i=s.objectStore(n._dbInfo.storeName).openCursor(),a=1;i.onsuccess=function(){var n=i.result;if(n){var r=n.value;M(r)&&(r=O(r));var o=e(r,n.key,a++);void 0!==o?t(o):n.continue()}else t()},i.onerror=function(){r(i.error)}}catch(e){r(e)}}))})).catch(r)}));return u(r,t),r}function U(e,t,n){var r=this;e=p(e);var o=new l((function(n,o){var s;r.ready().then((function(){return s=r._dbInfo,"[object Blob]"===y.call(t)?w(s.db).then((function(e){return e?t:A(t)})):t})).then((function(t){D(r._dbInfo,v,(function(s,i){if(s)return o(s);try{var a=i.objectStore(r._dbInfo.storeName);null===t&&(t=void 0);var c=a.put(t,e);i.oncomplete=function(){void 0===t&&(t=null),n(t)},i.onabort=i.onerror=function(){var e=c.error?c.error:c.transaction.error;o(e)}}catch(e){o(e)}}))})).catch(o)}));return u(o,n),o}function B(e,t){var n=this;e=p(e);var r=new l((function(t,r){n.ready().then((function(){D(n._dbInfo,v,(function(o,s){if(o)return r(o);try{var i=s.objectStore(n._dbInfo.storeName).delete(e);s.oncomplete=function(){t()},s.onerror=function(){r(i.error)},s.onabort=function(){var e=i.error?i.error:i.transaction.error;r(e)}}catch(e){r(e)}}))})).catch(r)}));return u(r,t),r}function H(e){var t=this,n=new l((function(e,n){t.ready().then((function(){D(t._dbInfo,v,(function(r,o){if(r)return n(r);try{var s=o.objectStore(t._dbInfo.storeName).clear();o.oncomplete=function(){e()},o.onabort=o.onerror=function(){var e=s.error?s.error:s.transaction.error;n(e)}}catch(e){n(e)}}))})).catch(n)}));return u(n,e),n}function z(e){var t=this,n=new l((function(e,n){t.ready().then((function(){D(t._dbInfo,_,(function(r,o){if(r)return n(r);try{var s=o.objectStore(t._dbInfo.storeName).count();s.onsuccess=function(){e(s.result)},s.onerror=function(){n(s.error)}}catch(e){n(e)}}))})).catch(n)}));return u(n,e),n}function q(e,t){var n=this,r=new l((function(t,r){e<0?t(null):n.ready().then((function(){D(n._dbInfo,_,(function(o,s){if(o)return r(o);try{var i=s.objectStore(n._dbInfo.storeName),a=!1,c=i.openKeyCursor();c.onsuccess=function(){var n=c.result;n?0===e||a?t(n.key):(a=!0,n.advance(e)):t(null)},c.onerror=function(){r(c.error)}}catch(e){r(e)}}))})).catch(r)}));return u(r,t),r}function W(e){var t=this,n=new l((function(e,n){t.ready().then((function(){D(t._dbInfo,_,(function(r,o){if(r)return n(r);try{var s=o.objectStore(t._dbInfo.storeName).openKeyCursor(),i=[];s.onsuccess=function(){var t=s.result;t?(i.push(t.key),t.continue()):e(i)},s.onerror=function(){n(s.error)}}catch(e){n(e)}}))})).catch(n)}));return u(n,e),n}function G(e,t){t=h.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,o=this;if(e.name){var s=e.name===n.name&&o._dbInfo.db?l.resolve(o._dbInfo.db):I(e).then((function(t){var n=g[e.name],r=n.forages;n.db=t;for(var o=0;o<r.length;o++)r[o]._dbInfo.db=t;return t}));r=e.storeName?s.then((function(t){if(t.objectStoreNames.contains(e.storeName)){var n=t.version+1;k(e);var r=g[e.name],o=r.forages;t.close();for(var s=0;s<o.length;s++){var a=o[s];a._dbInfo.db=null,a._dbInfo.version=n}var c=new l((function(t,r){var o=i.open(e.name,n);o.onerror=function(e){o.result.close(),r(e)},o.onupgradeneeded=function(){o.result.deleteObjectStore(e.storeName)},o.onsuccess=function(){var e=o.result;e.close(),t(e)}}));return c.then((function(e){r.db=e;for(var t=0;t<o.length;t++){var n=o[t];n._dbInfo.db=e,E(n._dbInfo)}})).catch((function(t){throw(T(e,t)||l.resolve()).catch((function(){})),t}))}})):s.then((function(t){k(e);var n=g[e.name],r=n.forages;t.close();for(var o=0;o<r.length;o++)r[o]._dbInfo.db=null;var s=new l((function(t,n){var r=i.deleteDatabase(e.name);r.onerror=function(){var e=r.result;e&&e.close(),n(r.error)},r.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},r.onsuccess=function(){var e=r.result;e&&e.close(),t(e)}}));return s.then((function(e){n.db=e;for(var t=0;t<r.length;t++)E(r[t]._dbInfo)})).catch((function(t){throw(T(e,t)||l.resolve()).catch((function(){})),t}))}))}else r=l.reject("Invalid arguments");return u(r,t),r}var V={_driver:"asyncStorage",_initStorage:P,_support:a(),iterate:j,getItem:F,setItem:U,removeItem:B,clear:H,length:z,key:q,keys:W,dropInstance:G};function Y(){return"function"==typeof openDatabase}var K="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",X="~~local_forage_type~",J=/^~~local_forage_type~([^~]+)~/,Q="__lfsc__:",Z=Q.length,ee="arbf",te="blob",ne="si08",re="ui08",oe="uic8",se="si16",ie="si32",ae="ur16",ce="ui32",le="fl32",ue="fl64",de=Z+ee.length,pe=Object.prototype.toString;function he(e){var t,n,r,o,s,i=.75*e.length,a=e.length,c=0;"="===e[e.length-1]&&(i--,"="===e[e.length-2]&&i--);var l=new ArrayBuffer(i),u=new Uint8Array(l);for(t=0;t<a;t+=4)n=K.indexOf(e[t]),r=K.indexOf(e[t+1]),o=K.indexOf(e[t+2]),s=K.indexOf(e[t+3]),u[c++]=n<<2|r>>4,u[c++]=(15&r)<<4|o>>2,u[c++]=(3&o)<<6|63&s;return l}function fe(e){var t,n=new Uint8Array(e),r="";for(t=0;t<n.length;t+=3)r+=K[n[t]>>2],r+=K[(3&n[t])<<4|n[t+1]>>4],r+=K[(15&n[t+1])<<2|n[t+2]>>6],r+=K[63&n[t+2]];return n.length%3==2?r=r.substring(0,r.length-1)+"=":n.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}function me(e,t){var n="";if(e&&(n=pe.call(e)),e&&("[object ArrayBuffer]"===n||e.buffer&&"[object ArrayBuffer]"===pe.call(e.buffer))){var r,o=Q;e instanceof ArrayBuffer?(r=e,o+=ee):(r=e.buffer,"[object Int8Array]"===n?o+=ne:"[object Uint8Array]"===n?o+=re:"[object Uint8ClampedArray]"===n?o+=oe:"[object Int16Array]"===n?o+=se:"[object Uint16Array]"===n?o+=ae:"[object Int32Array]"===n?o+=ie:"[object Uint32Array]"===n?o+=ce:"[object Float32Array]"===n?o+=le:"[object Float64Array]"===n?o+=ue:t(new Error("Failed to get type for BinaryArray"))),t(o+fe(r))}else if("[object Blob]"===n){var s=new FileReader;s.onload=function(){var n=X+e.type+"~"+fe(this.result);t(Q+te+n)},s.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(n){console.error("Couldn't convert value into a JSON string: ",e),t(null,n)}}function ge(e){if(e.substring(0,Z)!==Q)return JSON.parse(e);var t,n=e.substring(de),r=e.substring(Z,de);if(r===te&&J.test(n)){var o=n.match(J);t=o[1],n=n.substring(o[0].length)}var s=he(n);switch(r){case ee:return s;case te:return c([s],{type:t});case ne:return new Int8Array(s);case re:return new Uint8Array(s);case oe:return new Uint8ClampedArray(s);case se:return new Int16Array(s);case ae:return new Uint16Array(s);case ie:return new Int32Array(s);case ce:return new Uint32Array(s);case le:return new Float32Array(s);case ue:return new Float64Array(s);default:throw new Error("Unkown type: "+r)}}var ye={serialize:me,deserialize:ge,stringToBuffer:he,bufferToString:fe};function _e(e,t,n,r){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,r)}function ve(e){var t=this,n={db:null};if(e)for(var r in e)n[r]="string"!=typeof e[r]?e[r].toString():e[r];var o=new l((function(e,r){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(e){return r(e)}n.db.transaction((function(o){_e(o,n,(function(){t._dbInfo=n,e()}),(function(e,t){r(t)}))}),r)}));return n.serializer=ye,o}function be(e,t,n,r,o,s){e.executeSql(n,r,o,(function(e,i){i.code===i.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],(function(e,a){a.rows.length?s(e,i):_e(e,t,(function(){e.executeSql(n,r,o,s)}),s)}),s):s(e,i)}),s)}function Se(e,t){var n=this;e=p(e);var r=new l((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){be(n,o,"SELECT * FROM "+o.storeName+" WHERE key = ? LIMIT 1",[e],(function(e,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=o.serializer.deserialize(r)),t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return u(r,t),r}function we(e,t){var n=this,r=new l((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){be(n,o,"SELECT * FROM "+o.storeName,[],(function(n,r){for(var s=r.rows,i=s.length,a=0;a<i;a++){var c=s.item(a),l=c.value;if(l&&(l=o.serializer.deserialize(l)),void 0!==(l=e(l,c.key,a+1)))return void t(l)}t()}),(function(e,t){r(t)}))}))})).catch(r)}));return u(r,t),r}function ke(e,t,n,r){var o=this;e=p(e);var s=new l((function(s,i){o.ready().then((function(){void 0===t&&(t=null);var a=t,c=o._dbInfo;c.serializer.serialize(t,(function(t,l){l?i(l):c.db.transaction((function(n){be(n,c,"INSERT OR REPLACE INTO "+c.storeName+" (key, value) VALUES (?, ?)",[e,t],(function(){s(a)}),(function(e,t){i(t)}))}),(function(t){if(t.code===t.QUOTA_ERR){if(r>0)return void s(ke.apply(o,[e,a,n,r-1]));i(t)}}))}))})).catch(i)}));return u(s,n),s}function Ee(e,t,n){return ke.apply(this,[e,t,n,1])}function Te(e,t){var n=this;e=p(e);var r=new l((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){be(n,o,"DELETE FROM "+o.storeName+" WHERE key = ?",[e],(function(){t()}),(function(e,t){r(t)}))}))})).catch(r)}));return u(r,t),r}function xe(e){var t=this,n=new l((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){be(t,r,"DELETE FROM "+r.storeName,[],(function(){e()}),(function(e,t){n(t)}))}))})).catch(n)}));return u(n,e),n}function Ie(e){var t=this,n=new l((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){be(t,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],(function(t,n){var r=n.rows.item(0).c;e(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return u(n,e),n}function Ce(e,t){var n=this,r=new l((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){be(n,o,"SELECT key FROM "+o.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(e,n){var r=n.rows.length?n.rows.item(0).key:null;t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return u(r,t),r}function Re(e){var t=this,n=new l((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){be(t,r,"SELECT key FROM "+r.storeName,[],(function(t,n){for(var r=[],o=0;o<n.rows.length;o++)r.push(n.rows.item(o).key);e(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return u(n,e),n}function Ae(e){return new l((function(t,n){e.transaction((function(r){r.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(n,r){for(var o=[],s=0;s<r.rows.length;s++)o.push(r.rows.item(s).name);t({db:e,storeNames:o})}),(function(e,t){n(t)}))}),(function(e){n(e)}))}))}function Oe(e,t){t=h.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,o=this;return r=e.name?new l((function(t){var r;r=e.name===n.name?o._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?t({db:r,storeNames:[e.storeName]}):t(Ae(r))})).then((function(e){return new l((function(t,n){e.db.transaction((function(r){function o(e){return new l((function(t,n){r.executeSql("DROP TABLE IF EXISTS "+e,[],(function(){t()}),(function(e,t){n(t)}))}))}for(var s=[],i=0,a=e.storeNames.length;i<a;i++)s.push(o(e.storeNames[i]));l.all(s).then((function(){t()})).catch((function(e){n(e)}))}),(function(e){n(e)}))}))})):l.reject("Invalid arguments"),u(r,t),r}var Me={_driver:"webSQLStorage",_initStorage:ve,_support:Y(),iterate:we,getItem:Se,setItem:Ee,removeItem:Te,clear:xe,length:Ie,key:Ce,keys:Re,dropInstance:Oe};function Ne(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}function Le(e,t){var n=e.name+"/";return e.storeName!==t.storeName&&(n+=e.storeName+"/"),n}function De(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch(e){return!0}}function $e(){return!De()||localStorage.length>0}function Pe(e){var t=this,n={};if(e)for(var r in e)n[r]=e[r];return n.keyPrefix=Le(e,t._defaultConfig),$e()?(t._dbInfo=n,n.serializer=ye,l.resolve()):l.reject()}function Fe(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var r=localStorage.key(n);0===r.indexOf(e)&&localStorage.removeItem(r)}}));return u(n,e),n}function je(e,t){var n=this;e=p(e);var r=n.ready().then((function(){var t=n._dbInfo,r=localStorage.getItem(t.keyPrefix+e);return r&&(r=t.serializer.deserialize(r)),r}));return u(r,t),r}function Ue(e,t){var n=this,r=n.ready().then((function(){for(var t=n._dbInfo,r=t.keyPrefix,o=r.length,s=localStorage.length,i=1,a=0;a<s;a++){var c=localStorage.key(a);if(0===c.indexOf(r)){var l=localStorage.getItem(c);if(l&&(l=t.serializer.deserialize(l)),void 0!==(l=e(l,c.substring(o),i++)))return l}}}));return u(r,t),r}function Be(e,t){var n=this,r=n.ready().then((function(){var t,r=n._dbInfo;try{t=localStorage.key(e)}catch(e){t=null}return t&&(t=t.substring(r.keyPrefix.length)),t}));return u(r,t),r}function He(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo,n=localStorage.length,r=[],o=0;o<n;o++){var s=localStorage.key(o);0===s.indexOf(e.keyPrefix)&&r.push(s.substring(e.keyPrefix.length))}return r}));return u(n,e),n}function ze(e){var t=this.keys().then((function(e){return e.length}));return u(t,e),t}function qe(e,t){var n=this;e=p(e);var r=n.ready().then((function(){var t=n._dbInfo;localStorage.removeItem(t.keyPrefix+e)}));return u(r,t),r}function We(e,t,n){var r=this;e=p(e);var o=r.ready().then((function(){void 0===t&&(t=null);var n=t;return new l((function(o,s){var i=r._dbInfo;i.serializer.serialize(t,(function(t,r){if(r)s(r);else try{localStorage.setItem(i.keyPrefix+e,t),o(n)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||s(e),s(e)}}))}))}));return u(o,n),o}function Ge(e,t){if(t=h.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var n=this.config();e.name=e.name||n.name,e.storeName=e.storeName||n.storeName}var r,o=this;return r=e.name?new l((function(t){e.storeName?t(Le(e,o._defaultConfig)):t(e.name+"/")})).then((function(e){for(var t=localStorage.length-1;t>=0;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}})):l.reject("Invalid arguments"),u(r,t),r}var Ve={_driver:"localStorageWrapper",_initStorage:Pe,_support:Ne(),iterate:Ue,getItem:je,setItem:We,removeItem:qe,clear:Fe,length:ze,key:Be,keys:He,dropInstance:Ge},Ye=function(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)},Ke=function(e,t){for(var n=e.length,r=0;r<n;){if(Ye(e[r],t))return!0;r++}return!1},Xe=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},Je={},Qe={},Ze={INDEXEDDB:V,WEBSQL:Me,LOCALSTORAGE:Ve},et=[Ze.INDEXEDDB._driver,Ze.WEBSQL._driver,Ze.LOCALSTORAGE._driver],tt=["dropInstance"],nt=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(tt),rt={description:"",driver:et.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function ot(e,t){e[t]=function(){var n=arguments;return e.ready().then((function(){return e[t].apply(e,n)}))}}function st(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(Xe(t[n])?arguments[0][n]=t[n].slice():arguments[0][n]=t[n])}return arguments[0]}var it=function(){function e(t){for(var n in o(this,e),Ze)if(Ze.hasOwnProperty(n)){var r=Ze[n],s=r._driver;this[n]=s,Je[s]||this.defineDriver(r)}this._defaultConfig=st({},rt),this._config=st({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":r(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,n){var r=new l((function(t,n){try{var r=e._driver,o=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void n(o);for(var s=nt.concat("_initStorage"),i=0,a=s.length;i<a;i++){var c=s[i];if((!Ke(tt,c)||e[c])&&"function"!=typeof e[c])return void n(o)}var d=function(){for(var t=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver"),n=l.reject(t);return u(n,arguments[arguments.length-1]),n}},n=0,r=tt.length;n<r;n++){var o=tt[n];e[o]||(e[o]=t(o))}};d();var p=function(n){Je[r]&&console.info("Redefining LocalForage driver: "+r),Je[r]=e,Qe[r]=n,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(p,n):p(!!e._support):p(!0)}catch(e){n(e)}}));return d(r,t,n),r},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,n){var r=Je[e]?l.resolve(Je[e]):l.reject(new Error("Driver not found."));return d(r,t,n),r},e.prototype.getSerializer=function(e){var t=l.resolve(ye);return d(t,e),t},e.prototype.ready=function(e){var t=this,n=t._driverSet.then((function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready}));return d(n,e,e),n},e.prototype.setDriver=function(e,t,n){var r=this;Xe(e)||(e=[e]);var o=this._getSupportedDrivers(e);function s(){r._config.driver=r.driver()}function i(e){return r._extend(e),s(),r._ready=r._initStorage(r._config),r._ready}function a(e){return function(){var t=0;function n(){for(;t<e.length;){var o=e[t];return t++,r._dbInfo=null,r._ready=null,r.getDriver(o).then(i).catch(n)}s();var a=new Error("No available storage method found.");return r._driverSet=l.reject(a),r._driverSet}return n()}}var c=null!==this._driverSet?this._driverSet.catch((function(){return l.resolve()})):l.resolve();return this._driverSet=c.then((function(){var e=o[0];return r._dbInfo=null,r._ready=null,r.getDriver(e).then((function(e){r._driver=e._driver,s(),r._wrapLibraryMethodsWithReady(),r._initDriver=a(o)}))})).catch((function(){s();var e=new Error("No available storage method found.");return r._driverSet=l.reject(e),r._driverSet})),d(this._driverSet,t,n),this._driverSet},e.prototype.supports=function(e){return!!Qe[e]},e.prototype._extend=function(e){st(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var o=e[n];this.supports(o)&&t.push(o)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=nt.length;e<t;e++)ot(this,nt[e])},e.prototype.createInstance=function(t){return new e(t)},e}(),at=new it;t.exports=at},{3:3}]},{},[4])(4)}(Og);const Mg=Hn;class Ng{static __initStatic(){this.id="Offline"}constructor(e={}){this.name=Ng.id,this.maxStoredEvents=e.maxStoredEvents||30,this.offlineEventStore=Og.exports.createInstance({name:"sentry/offlineEventStore"})}setupOnce(e,t){this.hub=t(),"addEventListener"in Mg&&Mg.addEventListener("online",(()=>{this._sendEvents().catch((()=>{Sg&&nr.warn("could not send cached events")}))}));const n=e=>this.hub&&this.hub.getIntegration(Ng)&&"navigator"in Mg&&"onLine"in Mg.navigator&&!Mg.navigator.onLine?(Sg&&nr.log("Event dropped due to being a offline - caching instead"),this._cacheEvent(e).then((e=>this._enforceMaxEvents())).catch((e=>{Sg&&nr.warn("could not cache event while offline")})),null):e;n.id=this.name,e(n),"navigator"in Mg&&"onLine"in Mg.navigator&&Mg.navigator.onLine&&this._sendEvents().catch((()=>{Sg&&nr.warn("could not send cached events")}))}async _cacheEvent(e){return this.offlineEventStore.setItem(Or(),bo(e))}async _enforceMaxEvents(){const e=[];return this.offlineEventStore.iterate(((t,n,r)=>{e.push({cacheKey:n,event:t})})).then((()=>this._purgeEvents(e.sort(((e,t)=>(t.event.timestamp||0)-(e.event.timestamp||0))).slice(this.maxStoredEvents<e.length?this.maxStoredEvents:e.length).map((e=>e.cacheKey))))).catch((e=>{Sg&&nr.warn("could not enforce max events")}))}async _purgeEvent(e){return this.offlineEventStore.removeItem(e)}async _purgeEvents(e){return Promise.all(e.map((e=>this._purgeEvent(e)))).then()}async _sendEvents(){return this.offlineEventStore.iterate(((e,t,n)=>{this.hub?(this.hub.captureEvent(e),this._purgeEvent(t).catch((e=>{Sg&&nr.warn("could not purge event from cache")}))):Sg&&nr.warn("no hub found - could not send cached event")}))}}Ng.__initStatic();const Lg=Hn,Dg="ReportingObserver",$g=new WeakMap,Pg=(e={})=>{const t=e.types||["crash","deprecation","intervention"];function n(e){if($g.has(Ws()))for(const t of e)qs((e=>{e.setExtra("url",t.url);const n=`ReportingObserver [${t.type}]`;let r="No details available";if(t.body){const n={};for(const e in t.body)n[e]=t.body[e];if(e.setExtra("body",n),"crash"===t.type){const e=t.body;r=[e.crashId||"",e.reason||""].join(" ").trim()||r}else{r=t.body.message||r}}Us(`${n}: ${r}`)}))}return{name:Dg,setupOnce(){if(!("ReportingObserver"in Gr))return;new Lg.ReportingObserver(n,{buffered:!0,types:t}).observe()},setup(e){$g.set(e,!0)}}};ua(Dg,Pg);const Fg="RewriteFrames",jg=(e={})=>{const t=e.root,n=e.prefix||"app:///",r=e.iteratee||(e=>{if(!e.filename)return e;const r=/^[a-zA-Z]:\\/.test(e.filename)||e.filename.includes("\\")&&!e.filename.includes("/"),o=/^\//.test(e.filename);if(r||o){const o=r?e.filename.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"):e.filename,s=t?function(e,t){e=Eo(e).slice(1),t=Eo(t).slice(1);const n=To(e.split("/")),r=To(t.split("/")),o=Math.min(n.length,r.length);let s=o;for(let e=0;e<o;e++)if(n[e]!==r[e]){s=e;break}let i=[];for(let e=s;e<n.length;e++)i.push("..");return i=i.concat(r.slice(s)),i.join("/")}(t,o):xo(o);e.filename=`${n}${s}`}return e});return{name:Fg,setupOnce(){},processEvent(e){let t=e;return e.exception&&Array.isArray(e.exception.values)&&(t=function(e){try{return{...e,exception:{...e.exception,values:e.exception.values.map((e=>{return{...e,...e.stacktrace&&{stacktrace:(t=e.stacktrace,{...t,frames:t&&t.frames&&t.frames.map((e=>r(e)))})}};var t}))}}}catch(t){return e}}(t)),t}}};ua(Fg,jg);const Ug="SessionTiming",Bg=()=>{const e=Date.now();return{name:Ug,setupOnce(){},processEvent(t){const n=Date.now();return{...t,extra:{...t.extra,"session:start":e,"session:duration":n-e,"session:end":n}}}}};ua(Ug,Bg);const Hg="Transaction";function zg(e){return e.module||e.function?`${e.module||"?"}/${e.function||"?"}`:"<unknown>"}ua(Hg,(()=>({name:Hg,setupOnce(){},processEvent(e){const t=function(e){const t=e.exception&&e.exception.values&&e.exception.values[0];return t&&t.stacktrace&&t.stacktrace.frames||[]}(e);for(let n=t.length-1;n>=0;n--){const r=t[n];if(!0===r.in_app){e.transaction=zg(r);break}}return e}})));const qg="HttpClient",Wg=(e={})=>{const t={failedRequestStatusCodes:[[500,599]],failedRequestTargets:[/.*/],...e};return{name:qg,setupOnce(){},setup(e){!function(e,t){if(!Kr())return;Xr((n=>{if(Ws()!==e)return;const{response:r,args:o}=n,[s,i]=o;r&&function(e,t,n,r){if(Yg(e,n.status,n.url)){const e=function(e,t){if(!t&&e instanceof Request)return e;if(e instanceof Request&&e.bodyUsed)return e;return new Request(e,t)}(t,r);let o,s,i,a;Xg()&&([{headers:o,cookies:i},{headers:s,cookies:a}]=[{cookieHeader:"Cookie",obj:e},{cookieHeader:"Set-Cookie",obj:n}].map((({cookieHeader:e,obj:t})=>{const n=function(e){const t={};return e.forEach(((e,n)=>{t[n]=e})),t}(t.headers);let r;try{const t=n[e]||n[e.toLowerCase()]||void 0;t&&(r=Vg(t))}catch(t){Sg&&nr.log(`Could not extract cookies from header ${e}`)}return{headers:n,cookies:r}})));Bs(Kg({url:e.url,method:e.method,status:n.status,requestHeaders:o,responseHeaders:s,requestCookies:i,responseCookies:a}))}}(t,s,r,i)}))}(e,t),function(e,t){if(!("XMLHttpRequest"in Hn))return;fo((n=>{if(Ws()!==e)return;const r=n.xhr,o=r[ho];if(!o)return;const{method:s,request_headers:i}=o;try{!function(e,t,n,r){if(Yg(e,t.status,t.responseURL)){let e,o,s;if(Xg()){try{const e=t.getResponseHeader("Set-Cookie")||t.getResponseHeader("set-cookie")||void 0;e&&(o=Vg(e))}catch(e){Sg&&nr.log("Could not extract cookies from response headers")}try{s=function(e){const t=e.getAllResponseHeaders();if(!t)return{};return t.split("\r\n").reduce(((e,t)=>{const[n,r]=t.split(": ");return e[n]=r,e}),{})}(t)}catch(e){Sg&&nr.log("Could not extract headers from response")}e=r}Bs(Kg({url:t.responseURL,method:n,status:t.status,requestHeaders:e,responseHeaders:s,responseCookies:o}))}}(t,r,s,i)}catch(e){Sg&&nr.warn("Error while extracting response event form XHR response",e)}}))}(e,t)}}};function Gg(e){if(e){const t=e["Content-Length"]||e["content-length"];if(t)return parseInt(t,10)}}function Vg(e){return e.split("; ").reduce(((e,t)=>{const[n,r]=t.split("=");return e[n]=r,e}),{})}function Yg(e,t,n){return function(e,t){return e.some((e=>"number"==typeof e?e===t:t>=e[0]&&t<=e[1]))}(e.failedRequestStatusCodes,t)&&(r=e.failedRequestTargets,o=n,r.some((e=>"string"==typeof e?o.includes(e):e.test(o))))&&!Ma(n,Ws());var r,o}function Kg(e){const t=`HTTP Client Error with status code: ${e.status}`,n={message:t,exception:{values:[{type:"Error",value:t}]},request:{url:e.url,method:e.method,headers:e.requestHeaders,cookies:e.requestCookies},contexts:{response:{status_code:e.status,headers:e.responseHeaders,cookies:e.responseCookies,body_size:Gg(e.responseHeaders)}}};return Dr(n,{type:"http.client",handled:!1}),n}function Xg(){const e=Ws();return!!e&&Boolean(e.getOptions().sendDefaultPii)}ua(qg,Wg);const Jg=Hn,Qg="ContextLines",Zg=(e={})=>{const t=null!=e.frameContextLines?e.frameContextLines:7;return{name:Qg,setupOnce(){},processEvent:e=>function(e,t){const n=Jg.document,r=Jg.location&&No(Jg.location.href);if(!n||!r)return e;const o=e.exception&&e.exception.values;if(!o||!o.length)return e;const s=n.documentElement.innerHTML;if(!s)return e;const i=["<!DOCTYPE html>","<html>",...s.split("\n"),"</html>"];return o.forEach((e=>{const n=e.stacktrace;n&&n.frames&&(n.frames=n.frames.map((e=>function(e,t,n,r){if(e.filename!==n||!e.lineno||!t.length)return e;return function(e,t,n=5){if(void 0===t.lineno)return;const r=e.length,o=Math.max(Math.min(r-1,t.lineno-1),0);t.pre_context=e.slice(Math.max(0,o-n),o).map((e=>Ln(e,0))),t.context_line=Ln(e[Math.min(r-1,o)],t.colno||0),t.post_context=e.slice(Math.min(o+1,r),o+1+n).map((e=>Ln(e,0)))}(t,e,r),e}(e,i,r,t))))})),e}(e,t)}};function ey(e){return new Promise(((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)}))}function ty(e){return ey(e.getAllKeys())}function ny(e){let t;function n(){return null==t&&(t=function(e,t){const n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);const r=ey(n);return e=>r.then((n=>e(n.transaction(t,"readwrite").objectStore(t))))}(e.dbName||"sentry-offline",e.storeName||"queue")),t}return{insert:async t=>{try{const r=await cs(t,e.textEncoder);await function(e,t,n){return e((e=>ty(e).then((r=>{if(!(r.length>=n))return e.put(t,Math.max(...r,0)+1),ey(e.transaction)}))))}(n(),r,e.maxQueueSize||30)}catch(e){}},pop:async()=>{try{const t=await function(e){return e((e=>ty(e).then((t=>{if(0!==t.length)return ey(e.get(t[0])).then((n=>(e.delete(t[0]),ey(e.transaction).then((()=>n)))))}))))}(n());if(t)return function(e,t,n){let r="string"==typeof e?t.encode(e):e;function o(e){const t=r.subarray(0,e);return r=r.subarray(e+1),t}function s(){let e=r.indexOf(10);return e<0&&(e=r.length),JSON.parse(n.decode(o(e)))}const i=s(),a=[];for(;r.length;){const e=s(),t="number"==typeof e.length?e.length:void 0;a.push([e,t?o(t):s()])}return[i,a]}(t,e.textEncoder||new TextEncoder,e.textDecoder||new TextDecoder)}catch(e){}}}}ua(Qg,Zg);const ry=1e6,oy=String(0),sy="main";let iy="",ay="",cy="",ly=Gl.navigator&&Gl.navigator.userAgent||"",uy="";const dy=Gl.navigator&&Gl.navigator.language||Gl.navigator&&Gl.navigator.languages&&Gl.navigator.languages[0]||"";const py=Gl.navigator&&Gl.navigator.userAgentData;var hy;function fy(e){return function(e){return!("thread_metadata"in e)}(e)?function(e){let t,n=0;const r={samples:[],stacks:[],frames:[],thread_metadata:{[oy]:{name:sy}}};if(!e.samples.length)return r;const o=e.samples[0].timestamp,s="number"==typeof performance.timeOrigin?performance.timeOrigin:Go||0,i=s-(Go||s);for(let s=0;s<e.samples.length;s++){const a=e.samples[s];if(void 0===a.stackId){void 0===t&&(t=n,r.stacks[t]=[],n++),r.samples[s]={elapsed_since_start_ns:((a.timestamp+i-o)*ry).toFixed(0),stack_id:t,thread_id:oy};continue}let c=e.stacks[a.stackId];const l=[];for(;c;){l.push(c.frameId);const t=e.frames[c.frameId];void 0===r.frames[c.frameId]&&(r.frames[c.frameId]={function:t.name,abs_path:"number"==typeof t.resourceId?e.resources[t.resourceId]:void 0,lineno:t.line,colno:t.column}),c=void 0===c.parentId?void 0:e.stacks[c.parentId]}const u={elapsed_since_start_ns:((a.timestamp+i-o)*ry).toFixed(0),stack_id:n,thread_id:oy};r.stacks[n]=l,r.samples[s]=u,n++}return r}(e):e}function my(e,t,n,r){if("transaction"!==r.type)throw new TypeError("Profiling events may only be attached to transactions, this should never occur.");if(null==n)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${n} instead.`);const o=function(e){const t=e&&e.contexts&&e.contexts.trace&&e.contexts.trace.trace_id;return"string"==typeof t&&32!==t.length&&Xl&&nr.log(`[Profiling] Invalid traceId: ${t} on profiled event`),"string"!=typeof t?"":t}(r),s=fy(n),i=t||("number"==typeof r.start_timestamp?1e3*r.start_timestamp:Date.now()),a="number"==typeof r.timestamp?1e3*r.timestamp:Date.now();return{event_id:e,timestamp:new Date(i).toISOString(),platform:"javascript",version:"1",release:r.release||"",environment:r.environment||Ss,runtime:{name:"javascript",version:Gl.navigator.userAgent},os:{name:iy,version:ay,build_number:ly},device:{locale:dy,model:uy,manufacturer:ly,architecture:cy,is_emulator:!1},debug_meta:{images:_y(n.resources)},profile:s,transactions:[{name:r.transaction||"",id:r.event_id||Or(),trace_id:o,active_thread_id:oy,relative_start_ns:"0",relative_end_ns:(1e6*(a-i)).toFixed(0)}]}}function gy(e){return"pageload"===e.op}"object"==typeof(hy=py)&&null!==hy&&"getHighEntropyValues"in hy&&py.getHighEntropyValues(["architecture","model","platform","platformVersion","fullVersionList"]).then((e=>{if(iy=e.platform||"",cy=e.architecture||"",uy=e.model||"",ay=e.platformVersion||"",e.fullVersionList&&e.fullVersionList.length>0){const t=e.fullVersionList[e.fullVersionList.length-1];ly=`${t.brand} ${t.version}`}})).catch((e=>{}));const yy=new WeakMap;function _y(e){const t=Hn._sentryDebugIds;if(!t)return[];const n=Ws(),r=n&&n.getOptions(),o=r&&r.stackParser;if(!o)return[];let s;const i=yy.get(o);i?s=i:(s=new Map,yy.set(o,s));const a=Object.keys(t).reduce(((e,n)=>{let r;const i=s.get(n);i?r=i:(r=o(n),s.set(n,r));for(let o=r.length-1;o>=0;o--){const s=r[o],i=s&&s.filename;if(s&&i){e[i]=t[n];break}}return e}),{}),c=[];for(const t of e)t&&a[t]&&c.push({type:"sourcemap",code_file:t,debug_id:a[t]});return c}let vy=!1;const by=3e4;function Sy(e){if(vy)return Xl&&nr.log("[Profiling] Profiling has been disabled for the duration of the current user session."),!1;if(!e.isRecording())return Xl&&nr.log("[Profiling] Discarding profile because transaction was not sampled."),!1;const t=Ws(),n=t&&t.getOptions();if(!n)return Xl&&nr.log("[Profiling] Profiling disabled, no options found."),!1;const r=n.profilesSampleRate;if(!("number"!=typeof(o=r)&&"boolean"!=typeof o||"number"==typeof o&&isNaN(o)?(Xl&&nr.warn(`[Profiling] Invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(o)} of type ${JSON.stringify(typeof o)}.`),0):!0===o||!1===o||!(o<0||o>1)||(Xl&&nr.warn(`[Profiling] Invalid sample rate. Sample rate must be between 0 and 1. Got ${o}.`),0)))return Xl&&nr.warn("[Profiling] Discarding profile because of invalid sample rate."),!1;var o;if(!r)return Xl&&nr.log("[Profiling] Discarding profile because a negative sampling decision was inherited or profileSampleRate is set to 0"),!1;return!!(!0===r||Math.random()<r)||(Xl&&nr.log(`[Profiling] Discarding profile because it's not included in the random sample (sampling rate = ${Number(r)})`),!1)}function wy(e,t,n,r){return function(e){return e.samples.length<2?(Xl&&nr.log("[Profiling] Discarding profile because it contains less than 2 samples"),!1):!!e.frames.length||(Xl&&nr.log("[Profiling] Discarding profile because it contains no frames"),!1)}(n)?my(e,t,n,r):null}const ky=new Map;function Ey(e){const t=ky.get(e);return t&&ky.delete(e),t}function Ty(e){let t;gy(e)&&(t=1e3*Wo());const n=function(){const e=Gl.Profiler;if("function"!=typeof e)return void(Xl&&nr.log("[Profiling] Profiling is not supported by this browser, Profiler interface missing on window object."));const t=Math.floor(by/10);try{return new e({sampleInterval:10,maxBufferSize:t})}catch(e){Xl&&(nr.log("[Profiling] Failed to initialize the Profiling constructor, this is likely due to a missing 'Document-Policy': 'js-profiling' header."),nr.log("[Profiling] Disabling profiling for current user session.")),vy=!0}}();if(!n)return e;Xl&&nr.log(`[Profiling] started profiling transaction: ${Ns(e).description}`);const r=Or();async function o(){return e&&n?n.stop().then((t=>(s&&(Gl.clearTimeout(s),s=void 0),Xl&&nr.log(`[Profiling] stopped profiling of transaction: ${Ns(e).description}`),t?(function(e,t){if(ky.set(e,t),ky.size>30){const e=ky.keys().next().value;ky.delete(e)}}(r,t),null):(Xl&&nr.log(`[Profiling] profiler returned null profile for: ${Ns(e).description}`,"this may indicate an overlapping transaction or a call to stopProfiling with a profile title that was never started"),null)))).catch((e=>(Xl&&nr.log("[Profiling] error while stopping profiler:",e),null))):null}let s=Gl.setTimeout((()=>{Xl&&nr.log("[Profiling] max profile duration elapsed, stopping profiling for:",Ns(e).description),o()}),by);const i=e.end.bind(e);return e.end=function(){return e?(o().then((()=>{e.setContext("profile",{profile_id:r,start_timestamp:t}),i()}),(()=>{i()})),e):i()},e}const xy="BrowserProfiling",Iy=()=>({name:xy,setupOnce(){},setup(e){const t=Gs().getTransaction();t&&gy(t)&&Sy(t)&&Ty(t),"function"==typeof e.on?(e.on("startTransaction",(e=>{Sy(e)&&Ty(e)})),e.on("beforeEnvelope",(e=>{if(!ky.size)return;const t=function(e){const t=[];return is(e,((e,n)=>{if("transaction"===n)for(let n=1;n<e.length;n++){const r=e[n];r&&r.contexts&&r.contexts.profile&&r.contexts.profile.profile_id&&t.push(e[n])}})),t}(e);if(!t.length)return;const n=[];for(const e of t){const t=e&&e.contexts,r=t&&t.profile&&t.profile.profile_id,o=t&&t.profile&&t.profile.start_timestamp;if("string"!=typeof r){Xl&&nr.log("[Profiling] cannot find profile for a transaction without a profile context");continue}if(!r){Xl&&nr.log("[Profiling] cannot find profile for a transaction without a profile context");continue}t&&t.profile&&delete t.profile;const s=Ey(r);if(!s){Xl&&nr.log(`[Profiling] Could not retrieve profile for transaction: ${r}`);continue}const i=wy(r,o,s,e);i&&n.push(i)}!function(e,t){if(!t.length)return e;for(const n of t)e[1].push([{type:"profile"},n])}(e,n)}))):nr.warn("[Profiling] Client does not support hooks, profiling will be disabled")}}),Cy=ua(xy,Iy);let Ry={};Gl.Sentry&&Gl.Sentry.Integrations&&(Ry=Gl.Sentry.Integrations);const Ay={...Ry,...ac,...ud};var Oy=Object.freeze({__proto__:null,Integrations:Ay,FunctionToString:Qa,Hub:li,InboundFilters:Ga,ModuleMetadata:ja,SDK_VERSION:ii,SEMANTIC_ATTRIBUTE_SENTRY_OP:ji,SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN:Ui,SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE:Fi,SEMANTIC_ATTRIBUTE_SENTRY_SOURCE:Pi,Scope:oi,addBreadcrumb:Hs,addEventProcessor:va,addGlobalEventProcessor:ks,addIntegration:function(e){const t=Ws();t&&t.addIntegration?t.addIntegration(e):bs&&nr.warn(`Cannot add integration "${e.name}" because no SDK Client is available.`)},addTracingExtensions:Zi,captureEvent:Bs,captureException:js,captureMessage:Us,captureSession:Xs,close:async function(e){const t=Ws();return t?t.close(e):(bs&&nr.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))},configureScope:function(e){pi().configureScope(e)},continueTrace:({sentryTrace:e,baggage:t},n)=>{const r=Gs(),{traceparentData:o,dynamicSamplingContext:s,propagationContext:i}=function(e,t){const n=ts(e),r=Jo(t),{traceId:o,parentSpanId:s,parentSampled:i}=n||{};return n?{traceparentData:n,dynamicSamplingContext:r||{},propagationContext:{traceId:o||Or(),parentSpanId:s||Or().substring(16),spanId:Or().substring(16),sampled:i,dsc:r||{}}}:{traceparentData:n,dynamicSamplingContext:void 0,propagationContext:{traceId:o||Or(),spanId:Or().substring(16)}}}(e,t);r.setPropagationContext(i),bs&&o&&nr.log(`[Tracing] Continuing trace ${o.traceId}.`);const a={...o,metadata:gr({dynamicSamplingContext:s})};return n?fi((()=>n(a))):a},createTransport:ka,endSession:Ys,extractTraceparentData:_i,flush:async function(e){const t=Ws();return t?t.flush(e):(bs&&nr.warn("Cannot flush events. No client defined."),Promise.resolve(!1))},functionToStringIntegration:Ja,getActiveSpan:Ri,getActiveTransaction:yi,getClient:Ws,getCurrentHub:pi,getCurrentScope:Gs,getHubFromCarrier:mi,getSpanStatusFromHttpCode:wi,inboundFiltersIntegration:Wa,isInitialized:function(){return!!Ws()},lastEventId:function(){return pi().lastEventId()},makeMain:di,makeMultiplexedTransport:function(e,t){return n=>{const r=e(n),o=new Map;function s(t,r){const s=r?`${t}:${r}`:t;let i=o.get(s);if(!i){const a=sr(t);if(!a)return;const c=sa(a,n.tunnel);i=r?function(e,t){return n=>{const r=e(n);return{...r,send:async e=>{const n=Aa(e,["event","transaction","profile","replay_event"]);return n&&(n.release=t),r.send(e)}}}}(e,r)({...n,url:c}):e({...n,url:c}),o.set(s,i)}return[t,i]}return{send:async function(e){const n=t({envelope:e,getEvent:function(t){const n=t&&t.length?t:["event"];return Aa(e,n)}}).map((e=>"string"==typeof e?s(e,void 0):s(e.dsn,e.release))).filter((e=>!!e));0===n.length&&n.push(["",r]);return(await Promise.all(n.map((([t,n])=>n.send(function(e,t){return os(t?{...e[0],dsn:t}:e[0],e[1])}(e,t))))))[0]},flush:async function(e){const t=[await r.flush(e)];for(const[,n]of o)t.push(await n.flush(e));return t.every((e=>e))}}}},metrics:ic,moduleMetadataIntegration:Fa,parameterize:function(e,...t){const n=new String(String.raw(e,...t));return n.__sentry_template_string__=e.join("\0").replace(/%/g,"%%").replace(/\0/g,"%s"),n.__sentry_template_values__=t,n},setContext:zs,setCurrentClient:Sa,setExtra:function(e,t){pi().setExtra(e,t)},setExtras:function(e){pi().setExtras(e)},setHttpStatus:Ei,setMeasurement:ea,setTag:function(e,t){pi().setTag(e,t)},setTags:function(e){pi().setTags(e)},setUser:function(e){pi().setUser(e)},spanStatusfromHttpCode:ki,startInactiveSpan:Ci,startSession:Vs,startSpan:Ii,startSpanManual:function(e,t){const n=Oi(e);return fi((()=>qs(e.scope,(r=>{const o=pi(),s=r.getSpan(),i=e.onlyIfParent&&!s?void 0:Ai(o,{parentSpan:s,spanContext:n,forceTransaction:e.forceTransaction,scope:r});function a(){i&&i.end()}return Ti((()=>t(i,a)),(()=>{if(i&&i.isRecording()){const{status:e}=Ns(i);e&&"ok"!==e||i.setStatus("internal_error")}}))}))))},startTransaction:function(e,t){return pi().startTransaction({...e},t)},trace:function(e,t,n=(()=>{}),r=(()=>{})){const o=pi(),s=Gs(),i=s.getSpan(),a=Oi(e),c=Ai(o,{parentSpan:i,spanContext:a,forceTransaction:!1,scope:s});return s.setSpan(c),Ti((()=>t(c)),(e=>{c&&c.setStatus("internal_error"),n(e,c)}),(()=>{c&&c.end(),s.setSpan(i),r()}))},withActiveSpan:function(e,t){return qs((n=>(n.setSpan(e),t(n))))},withIsolationScope:function(e){return fi((()=>e(hi())))},withScope:qs,WINDOW:Gl,BrowserClient:cu,makeFetchTransport:uu,makeXHRTransport:pu,chromeStackLineParser:yu,defaultStackLineParsers:Iu,defaultStackParser:Cu,geckoStackLineParser:bu,opera10StackLineParser:Eu,opera11StackLineParser:xu,winjsStackLineParser:wu,eventFromException:nu,eventFromMessage:ru,exceptionFromError:Jl,createUserFeedbackEnvelope:au,captureUserFeedback:function(e){const t=Ws();t&&t.captureUserFeedback(e)},defaultIntegrations:ad,forceLoad:function(){},getDefaultIntegrations:cd,init:ld,onLoad:function(e){e()},showReportDialog:(e={},t=pi())=>{if(!Gl.document)return void(Xl&&nr.error("Global document not defined in showReportDialog call"));const{client:n,scope:r}=t.getStackTop(),o=e.dsn||n&&n.getDsn();if(!o)return void(Xl&&nr.error("DSN not configured for showReportDialog call"));r&&(e.user={...r.getUser(),...e.user}),e.eventId||(e.eventId=t.lastEventId());const s=Gl.document.createElement("script");s.async=!0,s.crossOrigin="anonymous",s.src=function(e,t){const n=ar(e);if(!n)return"";const r=`${ra(n)}embed/error-page/`;let o=`dsn=${or(n)}`;for(const e in t)if("dsn"!==e&&"onClose"!==e)if("user"===e){const e=t.user;if(!e)continue;e.name&&(o+=`&name=${encodeURIComponent(e.name)}`),e.email&&(o+=`&email=${encodeURIComponent(e.email)}`)}else o+=`&${encodeURIComponent(e)}=${encodeURIComponent(t[e])}`;return`${r}?${o}`}(o,e),e.onLoad&&(s.onload=e.onLoad);const{onClose:i}=e;if(i){const e=t=>{if("__sentry_reportdialog_closed__"===t.data)try{i()}finally{Gl.removeEventListener("message",e)}};Gl.addEventListener("message",e)}const a=Gl.document.head||Gl.document.body;a?a.appendChild(s):Xl&&nr.error("Not injecting report dialog. No injection point found in HTML")},wrap:function(e){return Kl(e)()},Breadcrumbs:Nu,breadcrumbsIntegration:Mu,Dedupe:$u,GlobalHandlers:zu,globalHandlersIntegration:Hu,HttpContext:Ku,httpContextIntegration:Yu,LinkedErrors:Qu,linkedErrorsIntegration:Ju,TryCatch:nd,browserApiErrorsIntegration:td,Replay:om,getReplay:function(){const e=Ws();return e&&e.getIntegrationByName&&e.getIntegrationByName("Replay")},replayIntegration:e=>new om(e),ReplayCanvas:Pm,replayCanvasIntegration:$m,Feedback:gg,feedbackIntegration:e=>new gg(e),sendFeedback:Ym,captureConsoleIntegration:_g,contextLinesIntegration:Zg,debugIntegration:bg,dedupeIntegration:kg,extraErrorDataIntegration:Rg,httpClientIntegration:Wg,reportingObserverIntegration:Pg,rewriteFramesIntegration:jg,sessionTimingIntegration:Bg,BrowserTracing:class{constructor(e){this.name="BrowserTracing",this._hasSetTracePropagationTargets=!1,Zi(),cc&&(this._hasSetTracePropagationTargets=!(!e||!e.tracePropagationTargets&&!e.tracingOrigins)),this.options={...Pl,...e},void 0!==this.options._experiments.enableLongTask&&(this.options.enableLongTask=this.options._experiments.enableLongTask),e&&!e.tracePropagationTargets&&e.tracingOrigins&&(this.options.tracePropagationTargets=e.tracingOrigins),this._collectWebVitals=wl(),this._interactionIdToRouteNameMapping={},this.options.enableInp&&Tl(this._interactionIdToRouteNameMapping,this.options.interactionsSampleRate),this.options.enableLongTask&&kl(),this.options._experiments.enableInteractions&&El(),this._latestRoute={name:void 0,context:void 0}}setupOnce(e,t){this._getCurrentHub=t;const n=t().getClient(),r=n&&n.getOptions(),{routingInstrumentation:o,startTransactionOnLocationChange:s,startTransactionOnPageLoad:i,markBackgroundTransactions:a,traceFetch:c,traceXHR:l,shouldCreateSpanForRequest:u,enableHTTPTimings:d,_experiments:p}=this.options,h=r&&r.tracePropagationTargets,f=h||this.options.tracePropagationTargets;cc&&this._hasSetTracePropagationTargets&&h&&nr.warn("[Tracing] The `tracePropagationTargets` option was set in the BrowserTracing integration and top level `Sentry.init`. The top level `Sentry.init` value is being used."),o((e=>{const n=this._createRouteTransaction(e);return this.options._experiments.onStartRouteTransaction&&this.options._experiments.onStartRouteTransaction(n,e,t),n}),i,s),a&&kc(),p.enableInteractions&&this._registerInteractionListener(),this.options.enableInp&&this._registerInpInteractionListener(),Nl({traceFetch:c,traceXHR:l,tracePropagationTargets:f,shouldCreateSpanForRequest:u,enableHTTPTimings:d})}_createRouteTransaction(e){if(!this._getCurrentHub)return void(cc&&nr.warn(`[Tracing] Did not create ${e.op} transaction because _getCurrentHub is invalid.`));const t=this._getCurrentHub(),{beforeNavigate:n,idleTimeout:r,finalTimeout:o,heartbeatInterval:s}=this.options,i="pageload"===e.op;let a;if(i){const t=i?Fl("sentry-trace"):"",n=i?Fl("baggage"):void 0,{traceId:r,dsc:o,parentSpanId:s,sampled:c}=ns(t,n);a={traceId:r,parentSpanId:s,parentSampled:c,...e,metadata:{...e.metadata,dynamicSamplingContext:o},trimEnd:!0}}else a={trimEnd:!0,...e};const c="function"==typeof n?n(a):a,l=void 0===c?{...a,sampled:!1}:c;l.metadata=l.name!==a.name?{...l.metadata,source:"custom"}:l.metadata,this._latestRoute.name=l.name,this._latestRoute.context=l,!1===l.sampled&&cc&&nr.log(`[Tracing] Will not send ${l.op} transaction because of beforeNavigate.`),cc&&nr.log(`[Tracing] Starting ${l.op} transaction on scope`);const{location:u}=wc,d=Qi(t,l,r,o,!0,{location:u},s,i);return i&&wc.document&&(wc.document.addEventListener("readystatechange",(()=>{["interactive","complete"].includes(wc.document.readyState)&&d.sendAutoFinishSignal()})),["interactive","complete"].includes(wc.document.readyState)&&d.sendAutoFinishSignal()),d.registerBeforeFinishCallback((e=>{this._collectWebVitals(),Il(e)})),d}_registerInteractionListener(){let e;const t=()=>{const{idleTimeout:t,finalTimeout:n,heartbeatInterval:r}=this.options,o="ui.action.click",s=yi();if(s&&s.op&&["navigation","pageload"].includes(s.op))return void(cc&&nr.warn(`[Tracing] Did not create ${o} transaction because a pageload or navigation transaction is in progress.`));if(e&&(e.setFinishReason("interactionInterrupted"),e.end(),e=void 0),!this._getCurrentHub)return void(cc&&nr.warn(`[Tracing] Did not create ${o} transaction because _getCurrentHub is invalid.`));if(!this._latestRoute.name)return void(cc&&nr.warn(`[Tracing] Did not create ${o} transaction because _latestRouteName is missing.`));const i=this._getCurrentHub(),{location:a}=wc,c={name:this._latestRoute.name,op:o,trimEnd:!0,data:{[Pi]:this._latestRoute.context?jl(this._latestRoute.context):"url"}};e=Qi(i,c,t,n,!0,{location:a},r)};["click"].forEach((e=>{wc.document&&addEventListener(e,t,{once:!1,capture:!0})}))}_registerInpInteractionListener(){const e=({entries:e})=>{const t=Ws(),n=void 0!==t&&void 0!==t.getIntegrationByName?t.getIntegrationByName("Replay"):void 0,r=void 0!==n?n.getReplayId():void 0,o=yi(),s=Gs(),i=void 0!==s?s.getUser():void 0;e.forEach((e=>{if(function(e){return"duration"in e}(e)){const t=e.interactionId;if(void 0===t)return;const n=this._interactionIdToRouteNameMapping[t],s=e.duration,a=e.startTime,c=Object.keys(this._interactionIdToRouteNameMapping),l=c.length>0?c.reduce(((e,t)=>this._interactionIdToRouteNameMapping[e].duration<this._interactionIdToRouteNameMapping[t].duration?e:t)):void 0;if("first-input"===e.entryType){if(c.map((e=>this._interactionIdToRouteNameMapping[e])).some((e=>e.duration===s&&e.startTime===a)))return}if(!t)return;if(n)n.duration=Math.max(n.duration,s);else if(c.length<10||void 0===l||s>this._interactionIdToRouteNameMapping[l].duration){const e=this._latestRoute.name,n=this._latestRoute.context;e&&n&&(l&&Object.keys(this._interactionIdToRouteNameMapping).length>=10&&delete this._interactionIdToRouteNameMapping[l],this._interactionIdToRouteNameMapping[t]={routeName:e,duration:s,parentContext:n,user:i,activeTransaction:o,replayId:r,startTime:a})}}}))};rl("event",e),rl("first-input",e)}},browserTracingIntegration:(e={})=>{const t=!!cc&&!(!e.tracePropagationTargets&&!e.tracingOrigins);Zi(),!e.tracePropagationTargets&&e.tracingOrigins&&(e.tracePropagationTargets=e.tracingOrigins);const n={...Ul,...e},r=wl(),o={};n.enableInp&&Tl(o,n.interactionsSampleRate),n.enableLongTask&&kl(),n._experiments.enableInteractions&&El();const s={name:void 0,context:void 0};function i(e){const t=pi(),{beforeStartSpan:o,idleTimeout:i,finalTimeout:a,heartbeatInterval:c}=n,l="pageload"===e.op;let u;if(l){const t=l?zl("sentry-trace"):"",n=l?zl("baggage"):void 0,{traceId:r,dsc:o,parentSpanId:s,sampled:i}=ns(t,n);u={traceId:r,parentSpanId:s,parentSampled:i,...e,metadata:{...e.metadata,dynamicSamplingContext:o},trimEnd:!0}}else u={trimEnd:!0,...e};const d=o?o(u):u;d.metadata=d.name!==u.name?{...d.metadata,source:"custom"}:d.metadata,s.name=d.name,s.context=d,!1===d.sampled&&cc&&nr.log(`[Tracing] Will not send ${d.op} transaction because of beforeNavigate.`),cc&&nr.log(`[Tracing] Starting ${d.op} transaction on scope`);const{location:p}=wc,h=Qi(t,d,i,a,!0,{location:p},c,l);return l&&wc.document&&(wc.document.addEventListener("readystatechange",(()=>{["interactive","complete"].includes(wc.document.readyState)&&h.sendAutoFinishSignal()})),["interactive","complete"].includes(wc.document.readyState)&&h.sendAutoFinishSignal()),h.registerBeforeFinishCallback((e=>{r(),Il(e)})),h}return{name:"BrowserTracing",setupOnce:()=>{},afterAllSetup(e){const r=e.getOptions(),{markBackgroundSpan:a,traceFetch:c,traceXHR:l,shouldCreateSpanForRequest:u,enableHTTPTimings:d,_experiments:p}=n,h=r&&r.tracePropagationTargets,f=h||n.tracePropagationTargets;let m;cc&&t&&h&&nr.warn("[Tracing] The `tracePropagationTargets` option was set in the BrowserTracing integration and top level `Sentry.init`. The top level `Sentry.init` value is being used.");let g=wc.location&&wc.location.href;if(e.on&&(e.on("startNavigationSpan",(e=>{m&&(cc&&nr.log(`[Tracing] Finishing current transaction with op: ${Ns(m).op}`),m.end()),m=i({op:"navigation",...e})})),e.on("startPageLoadSpan",(e=>{m&&(cc&&nr.log(`[Tracing] Finishing current transaction with op: ${Ns(m).op}`),m.end()),m=i({op:"pageload",...e})}))),n.instrumentPageLoad&&e.emit&&wc.location){const t={name:wc.location.pathname,startTimestamp:Go?Go/1e3:void 0,origin:"auto.pageload.browser",attributes:{[Pi]:"url"}};Bl(e,t)}n.instrumentNavigation&&e.emit&&wc.location&&lo((({to:t,from:n})=>{if(void 0===n&&g&&-1!==g.indexOf(t))g=void 0;else if(n!==t){g=void 0;const t={name:wc.location.pathname,origin:"auto.navigation.browser",attributes:{[Pi]:"url"}};Hl(e,t)}})),a&&kc(),p.enableInteractions&&function(e,t){let n;const r=()=>{const{idleTimeout:r,finalTimeout:o,heartbeatInterval:s}=e,i="ui.action.click",a=yi();if(a&&a.op&&["navigation","pageload"].includes(a.op))return void(cc&&nr.warn(`[Tracing] Did not create ${i} transaction because a pageload or navigation transaction is in progress.`));if(n&&(n.setFinishReason("interactionInterrupted"),n.end(),n=void 0),!t.name)return void(cc&&nr.warn(`[Tracing] Did not create ${i} transaction because _latestRouteName is missing.`));const{location:c}=wc,l={name:t.name,op:i,trimEnd:!0,data:{[Pi]:t.context?Wl(t.context):"url"}};n=Qi(pi(),l,r,o,!0,{location:c},s)};["click"].forEach((e=>{wc.document&&addEventListener(e,r,{once:!1,capture:!0})}))}(n,s),n.enableInp&&function(e,t){const n=({entries:n})=>{const r=Ws(),o=void 0!==r&&void 0!==r.getIntegrationByName?r.getIntegrationByName("Replay"):void 0,s=void 0!==o?o.getReplayId():void 0,i=yi(),a=Gs(),c=void 0!==a?a.getUser():void 0;n.forEach((n=>{if(function(e){return"duration"in e}(n)){const r=n.interactionId;if(void 0===r)return;const o=e[r],a=n.duration,l=n.startTime,u=Object.keys(e),d=u.length>0?u.reduce(((t,n)=>e[t].duration<e[n].duration?t:n)):void 0;if("first-input"===n.entryType){if(u.map((t=>e[t])).some((e=>e.duration===a&&e.startTime===l)))return}if(!r)return;if(o)o.duration=Math.max(o.duration,a);else if(u.length<ql||void 0===d||a>e[d].duration){const n=t.name,o=t.context;n&&o&&(d&&Object.keys(e).length>=ql&&delete e[d],e[r]={routeName:n,duration:a,parentContext:o,user:c,activeTransaction:i,replayId:s,startTime:l})}}}))};rl("event",n),rl("first-input",n)}(o,s),Nl({traceFetch:c,traceXHR:l,tracePropagationTargets:f,shouldCreateSpanForRequest:u,enableHTTPTimings:d})},options:n}},defaultRequestInstrumentationOptions:Ml,instrumentOutgoingRequests:Nl,startBrowserTracingNavigationSpan:Hl,startBrowserTracingPageLoadSpan:Bl,makeBrowserOfflineTransport:function(e){return function(e){return t=>e({...t,createStore:ny})}(Ra(e))},onProfilingStartRouteTransaction:function(e){return e?Sy(e)?Ty(e):e:(Xl&&nr.log("[Profiling] Transaction is undefined, skipping profiling"),e)},BrowserProfilingIntegration:Cy,browserProfilingIntegration:Iy});const My=(e,t)=>((e,t)=>{if(!e)throw new Error("No settings supplied to getServiceType");if(!Object.keys($e).includes(t))throw new Error("Unidentified service name supplied to getServiceType");if(!e.isLoggedIn)return Pe;switch(t){case $e.TRANSLATOR:return e.translatorServiceType;case $e.WRITE:return e.writeServiceType;case $e.API:return e.apiServiceType;case $e.DOC_TRANSLATOR:return e.docTranslatorServiceType}})(e,t)===Fe,Ny=e=>!![/Receiving end does not exist/,/message channel closed before a response was received/,/Extension context invalidated/].some((t=>t.test(e))),Ly={dsn:"https://f7c23f019d154c319e91e8de004727dc@errortracking.deepl.com/12",release:"deepl-browser-extension@1.26.1",environment:Be(),tracesSampleRate:He()?.1:1,sampleRate:He()?.1:1,ignoreErrors:[/Receiving end does not exist/,/message channel closed before a response was received/,/Extension context invalidated/],beforeSend(e){const t=e.message||e.exception&&e.exception.values&&e.exception.values[0].value||"";return Ny(t)?null:e}};const Dy=e=>{chrome.storage.sync.get(["installationId","session","isLoggedIn","translatorServiceType","writeServiceType"],(function(t){e.setTag("internal_session_id",t.session.id),e.setTag("is_translator_pro",My(t,$e.TRANSLATOR)),e.setTag("is_write_pro",My(t,$e.WRITE)),e.setTag("is_logged_in",t.isLoggedIn)})),chrome.storage.local.get("browserInstanceId",(function(t){e.setTag("browser_instance_id",t.browserInstanceId)})),chrome.storage.onChanged.addListener((t=>{t?.session?.newValue&&e.setTag("internal_session_id",t.session.newValue.id),t?.installationId&&e.setUser({id:t.installationId}),t?.browser_instance_id&&e.setTag("browser_instance_id",qe.browserInstanceId.newValue),!0!==t.isLoggedIn?.newValue&&!1!==t.isLoggedIn?.newValue||e.setTag("is_logged_in",t.isLoggedIn.newValue),t.translatorServiceType&&chrome.storage.sync.get(["isLoggedIn"],e.setTag("is_translator_pro",My({...qe,translatorServiceType:t.translatorServiceType.newValue},$e.TRANSLATOR))),t.writeServiceType&&chrome.storage.sync.get(["isLoggedIn"],e.setTag("is_write_pro",My({...qe,writeServiceType:t.writeServiceType.newValue},$e.WRITE)))}))};return(window.addEventListener("error",(function(e){const t=e.message||e.error&&e.error.message||"";Ny(t)&&e.preventDefault()})),window.addEventListener("unhandledrejection",(function(e){const t=e.reason&&e.reason.message||"";Ny(t)&&e.preventDefault()})),ld({...Ly}),Dy(Oy),Oy).setContext("appContext",{location:"onboarding"}),new class extends _e{constructor(e){super(),ye(this,e,yn,gn,a,{})}}({target:document.body}),e.SCREENS=Se,e.currentStep=we,e.onboardingSteps=Te,e.updateRoute=Ee,Object.defineProperty(e,"__esModule",{value:!0}),e}({});
//# sourceMappingURL=onboarding.js.map
