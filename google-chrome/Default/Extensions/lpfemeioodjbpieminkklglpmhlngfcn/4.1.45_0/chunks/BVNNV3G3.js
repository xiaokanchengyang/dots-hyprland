import{g as o,h as i,k as h}from"./X6I4MIB4.js";import{a as H}from"./ZVZDUOP5.js";import{i as d}from"./3PS7M655.js";var g=class{constructor(){}getRootElement(){return document.querySelector("body main")}getTextInputElement(){let e=document.querySelector("#prompt-textarea");return e?Object.assign(e,{getValue:function(){let t=e==null?void 0:e.value;return t||(t=e.innerText||""),t}}):null}updateTextInputValue(e){let t=this.getTextInputElement();t&&(t.tagName==="TEXTAREA"&&(t.value=e),t.tagName==="DIV"&&(t.innerText=e))}isNewChatPage(){return location.pathname==="/"&&!document.querySelector("div.h-full[class^=react-scroll-to-bottom]")}getNewChatButton(){let e=document.querySelectorAll('a[href="/"]');return e&&e.length>0?e[0]:null}renderToolbar(e,t){var l;let n=this.getTextInputElement();if(!n)return;let r=n==null?void 0:n.closest("form");r&&(e.classList.add("lg:mx-auto","lg:max-w-2xl","xl:max-w-3xl"),e.style.order="3",e.style.position="relative",e.style.flex="1",e.style.width="100%",t&&(t.style.padding="16px 4px 8px"),(l=r.parentElement)==null||l.insertBefore(e,r.nextElementSibling),r.parentElement&&(r.parentElement.style.display="block"))}renderSlashCommandsMenu(e){let t=document.querySelector("main form");t&&(e.style.zIndex="9999",e.style.position="relative",t==null||t.insertBefore(e,t==null?void 0:t.firstChild))}renderPromptApp(e,t){let n=document.querySelector("body main div[class='relative h-full']"),r=document.querySelector("body main div[class='relative h-full']>div.h-full");if(n&&r){r.style.display="none";let l=56+16;e.style.position="absolute",e.style.top=`${l}px`,e.style.left="0",e.style.right="0",e.style.height=`calc(100% - ${l}px )`,t&&(t.style.height="100%"),n.appendChild(e)}}renderPromptRunner(e){var n;let t=document.querySelector("main.relative");(n=t==null?void 0:t.parentElement)==null||n.appendChild(e)}getSubmitBtn(){let e=document.querySelector("button[data-testid=send-button]");return e||(e=document.querySelector("main form div.flex.items-end > button:last-child")),e}handlePromptAppDisabled(){let e=o(),t=i();if(this.isNewChatPage()){e&&e.remove(),t&&t.remove();let n=this.getNewChatButton();n==null||n.click();let r=document.querySelector("div.text-2xl"),l=r==null?void 0:r.parentElement;l&&(l.style.display="flex")}}handlePromptAppEnabled(){}updateTextInputPlaceholder(e){let t=this.getTextInputElement();t&&t.setAttribute("placeholder",e)}getCurrentChatUserEmail(){var e,t,n;try{let r=document.querySelector("#__NEXT_DATA__");if(r){let l=JSON.parse(r.innerText);return((n=(t=(e=l==null?void 0:l.props)==null?void 0:e.pageProps)==null?void 0:t.user)==null?void 0:n.email)||""}return""}catch(r){return""}}};var M=g;var E=class{constructor(){}getRootElement(){return h()}getTextInputElement(){let e=document.querySelector("div[role=dialog]"),t=null;return e&&(t=e.querySelector("div[contenteditable=true]")),t||(t=document.querySelector("div[contenteditable=true]")),t?Object.assign(t,{getValue:function(){return t==null?void 0:t.innerText.trim()}}):null}updateTextInputValue(e){let t=this.getTextInputElement();t&&(t.innerText=e)}renderToolbar(e,t){var l;let n=this.getTextInputElement();if(!n)return;let r=n.closest("fieldset");if(r){r.style.marginTop="-27px";let s=r.querySelector("input[data-testid='file-upload']");e.style.position="relative",document.documentElement.getAttribute("data-mode")==="dark"?e.style.backgroundColor="#393937":e.style.backgroundColor="rgba(255, 255, 255, 1)",e.style.borderRadius="8px",e.style.boxShadow="0px 0px 0.5px 0px rgba(0, 0, 0, 0.40), 0px 1px 3px 0px rgba(0, 0, 0, 0.09), 0px 4px 8px 0px rgba(0, 0, 0, 0.09)",e.style.marginTop="8px",e.style.zIndex="10",t&&(t.style.padding="8px",t.style.paddingLeft="8px"),document.querySelector("div[role=dialog]")||location.pathname==="/chats"?(e.style.minWidth="635px",e.style.marginLeft="-12px",e.style.marginBottom="5px"):e.style.marginBottom="15px",(l=r.parentElement)==null||l.insertBefore(e,r.nextElementSibling)}}renderSlashCommandsMenu(e){let t=this.getTextInputElement(),n=t==null?void 0:t.closest("fieldset"),r=n==null?void 0:n.parentElement;r&&n&&(r.style.position="relative",e.style.position="absolute",e.style.top="-175px",e.style.left="0",e.style.right="0",e.style.zIndex="999",r==null||r.insertBefore(e,n))}getNewChatButton(){return document.querySelector('a[href="/new"]')}isNewChatPage(){return location.pathname==="/chats"||location.pathname==="/new"?!0:location.pathname.startsWith("/chat")?document.querySelectorAll("div.group div.font-user-message").length===0:!1}renderPromptApp(e,t){let r=this.getRootElement().querySelector("main h1.text-center"),l=r==null?void 0:r.parentElement;if(l){let s=l.parentElement;s&&(s.style.width="100%");for(let m of l.children)m instanceof HTMLElement&&(m.style.display="none");let u=document.querySelector("main");if(u&&(u.style.paddingTop="0"),t){let m=170,T=this.getTextInputElement();if(T){let x=T.closest("fieldset");x&&(m=parseInt(getComputedStyle(x).height))}e.style.width="97vw",t.style.maxWidth="97vw",t.style.height=`${window.innerHeight-m-90}px`,t.style.paddingTop="3px",t.style.paddingBottom="0px",t.style.margin="0 auto"}document.querySelectorAll('div[role="dialog"][data-state="open"][id^="radix-"]').length===0&&location.pathname!=="/chats"&&location.pathname!=="/new"&&(e.style.width="100vw",t&&(t.style.position="fixed",t.style.top="36px",t.style.left="0",t.style.right="0",t.style.height=`${window.innerHeight-260}px`)),l.insertBefore(e,r.nextElementSibling)}}renderPromptRunner(e){this.getRootElement().appendChild(e)}getSubmitBtn(){let e=document.querySelector('div[data-value="new chat"] > button');return e||document.querySelector('button[aria-label="Send Message"]')}handlePromptAppDisabled(){if(!this.isNewChatPage())return;let n=h().querySelector("main h1.text-center"),r=n==null?void 0:n.parentElement;if(r)for(let u of r.children)u instanceof HTMLElement&&u.style.removeProperty("display");let l=o(),s=i();l&&l.remove(),s&&s.remove()}handlePromptAppEnabled(){}getCurrentChatUserEmail(){var e;try{let n=Array.from(document.querySelectorAll("script[nonce]")).find(l=>l.innerHTML.includes("email_address")),r=(e=n==null?void 0:n.innerText.match(/"email_address\\":\\"(.+?)\\"/))==null?void 0:e[1];return r!=null?r:""}catch(t){return""}}},b=E;var f=class{constructor(){}getRootElement(){return document.querySelector("main.main-landmark")}getTextInputElement(){let e=document.querySelector("div.ql-editor.textarea");if(e)return Object.assign(e,{getValue:function(){return e==null?void 0:e.innerText.trim()}});let t=document.querySelector("input-area textarea");return t?Object.assign(t,{getValue:function(){return t.value}}):null}updateTextInputValue(e){let t=this.getTextInputElement();t&&((t==null?void 0:t.tagName)!=="TEXTAREA"?t.innerText=e:t.value=e)}renderToolbar(e,t){let n=document.querySelector("input-area");e.style.margin="0 48px",t&&(t.style.padding="16px 4px 8px"),n==null||n.appendChild(e)}renderSlashCommandsMenu(e){let t=document.querySelector("input-area");t&&(e.style.maxWidth="88%",e.style.marginLeft="auto",e.style.marginRight="auto",t==null||t.insertBefore(e,t.firstChild))}isNewChatPage(){let e=location.pathname,t=this.getNewChatButton();return e==="/chat"&&(t==null?void 0:t.getAttribute("disabled"))==="true"}getNewChatButton(){return document.querySelector("button[data-test-id=new-chat]")}renderPromptApp(e,t){let n=document.querySelector("*[data-test-id=chat-history-container]");if(n){let r=n.querySelectorAll(".conversation-container, .zero-state-container.ng-star-inserted");r.length>0&&r.forEach(l=>{l.style.display="none"}),e.style.width="100%",t&&(t.style.paddingTop="16px",t.style.paddingBottom="16px",t.style.marginLeft="-16px",t.style.marginRight="-16px"),n.appendChild(e)}}renderPromptRunner(e,t){let n=document.querySelector("chat-window");n&&(n.style.position="relative",n.style.overflow="hidden",n.appendChild(e))}getSubmitBtn(){return document.querySelector("button.send-button")}handlePromptAppDisabled(){let e=o(),t=i();e&&(e.style.display="none"),t&&(t.style.display="none");let n=document.querySelectorAll("div.conversation-container, .zero-state-container.ng-star-inserted");n.length>0&&n.forEach(r=>{r.style.display="flex"})}handlePromptAppEnabled(){if(this.isNewChatPage()){let t=o(),n=i();t&&(t.style.display="block"),n&&(n.style.display="block");let r=document.querySelectorAll("div.conversation-container, .zero-state-container.ng-star-inserted");r.length>0&&r.forEach(l=>{l.style.display="none"})}}updateTextInputPlaceholder(e){let t=this.getTextInputElement();t&&t.setAttribute("data-placeholder",e)}getCurrentChatUserEmail(){try{let e=document.querySelector(".gb_Cc > div:not([class])"),t=e==null?void 0:e.parentElement,n=t==null?void 0:t.lastChild;return n==null?void 0:n.innerText}catch(e){return""}}},C=f;var y=class{constructor(){}getRootElement(){return document.querySelector("#app-root")}getTextInputElement(){let e=document.querySelector("rich-textarea div.ql-editor.textarea");return e?Object.assign(e,{getValue:function(){return e==null?void 0:e.innerText.trim()}}):null}updateTextInputValue(e){let t=this.getTextInputElement();t&&((t==null?void 0:t.tagName)!=="TEXTAREA"?t.innerText=e:t.value=e)}renderToolbar(e,t){let n=document.querySelector("input-area-v2");e.style.margin="0 48px",t&&(t.style.padding="16px 4px 8px"),n==null||n.appendChild(e)}renderSlashCommandsMenu(e){let t=document.querySelector("input-area-v2");t&&(e.style.maxWidth="88%",e.style.marginLeft="auto",e.style.marginRight="auto",t==null||t.insertBefore(e,t.firstChild))}isNewChatPage(){let e=location.pathname,t=this.getNewChatButton();return e==="/app"&&(t==null?void 0:t.getAttribute("disabled"))==="true"}getNewChatButton(){return document.querySelector("*.side-nav-button-container button[data-test-id=button]")}renderPromptApp(e,t){let n=document.querySelector("#chat-history");if(n){let r=n.querySelectorAll("*[data-test-id=chat-history-container]");r.length>0&&r.forEach(l=>{l.style.display="none"}),e.style.padding="0 10px",e.style.overflowY="auto",e.style.width="100%",t&&(t.style.paddingTop="16px",t.style.paddingBottom="64px"),n.appendChild(e)}}renderPromptRunner(e,t){let n=document.querySelector("chat-window");n&&(n.style.position="relative",n.style.overflow="hidden",n.appendChild(e))}getSubmitBtn(){return document.querySelector("button.send-button")}handlePromptAppDisabled(){let e=o(),t=i();e&&(e.style.display="none"),t&&(t.style.display="none");let n=document.querySelectorAll("*[data-test-id=chat-history-container]");n.length>0&&n.forEach(r=>{r.style.display="flex"})}handlePromptAppEnabled(){if(this.isNewChatPage()){let t=o(),n=i();t&&(t.style.display="block"),n&&(n.style.display="block");let r=document.querySelectorAll("*[data-test-id=chat-history-container]");r.length>0&&r.forEach(l=>{l.style.display="none"})}}updateTextInputPlaceholder(e){let t=this.getTextInputElement();t&&t.setAttribute("data-placeholder",e)}getCurrentChatUserEmail(){try{let e=document.querySelector(".gb_Cc > div:not([class])"),t=e==null?void 0:e.parentElement,n=t==null?void 0:t.lastChild;return n==null?void 0:n.innerText}catch(e){return""}}},I=y;var c=class{constructor(){d(this,"currentChatWebSite");d(this,"currentHelper");this.currentChatWebSite=H(),this.currentHelper=this.getHelper()}getHelper(){return this.currentChatWebSite==="Claude"?new b:this.currentChatWebSite==="Bard"?new C:this.currentChatWebSite==="Gemini"?new I:new M}getRootElement(){return this.currentHelper.getRootElement()}getTextInputElement(){return this.currentHelper.getTextInputElement()}updateTextInputValue(e){return this.currentHelper.updateTextInputValue(e)}isNewChatPage(){return this.currentHelper.isNewChatPage()}getNewChatButton(){return this.currentHelper.getNewChatButton()}renderToolbar(e,t){return this.currentHelper.renderToolbar(e,t)}renderSlashCommandsMenu(e,t){return this.currentHelper.renderSlashCommandsMenu(e,t)}renderPromptApp(e,t){return this.currentHelper.renderPromptApp(e,t)}renderPromptRunner(e,t){return this.currentHelper.renderPromptRunner(e,t)}getSubmitBtn(){return this.currentHelper.getSubmitBtn()}handlePromptAppDisabled(){var e,t;return(t=(e=this.currentHelper).handlePromptAppDisabled)==null?void 0:t.call(e)}handlePromptAppEnabled(){var e,t;return(t=(e=this.currentHelper).handlePromptAppEnabled)==null?void 0:t.call(e)}updateTextInputPlaceholder(e){var t,n;return(n=(t=this.currentHelper).updateTextInputPlaceholder)==null?void 0:n.call(t,e)}getCurrentChatUserEmail(){var e,t;return(t=(e=this.currentHelper).getCurrentChatUserEmail)==null?void 0:t.call(e)}};var a=new c,$=()=>a.getRootElement(),j=()=>a.getTextInputElement(),X=p=>{a.updateTextInputValue(p)},F=()=>a.isNewChatPage();function J(){return a.getNewChatButton()}function Y(){return a.getSubmitBtn()}function G(){return a.handlePromptAppDisabled()}function K(){return a.handlePromptAppEnabled()}function Q(p){return a.updateTextInputPlaceholder(p)}function Z(){return a.getCurrentChatUserEmail()}export{c as a,$ as b,j as c,X as d,F as e,J as f,Y as g,G as h,K as i,Q as j,Z as k};
