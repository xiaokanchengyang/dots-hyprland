import{a as d}from"./24PMNBYU.js";import{a as C}from"./IWA7K7OR.js";import{l as m}from"./KHXRDVYA.js";import{a as I}from"./XXRKTLQP.js";import{f as u,i}from"./3PS7M655.js";var s=u(I());var p="https://www.phtracker.com";var a={theCardAd:{key:"REMOVE_CONTROLLER_THE_CARD_AD",period:1e3*60*60*24,defaultData:{disableVersion:"0.0.0"},fetchFn:async()=>{let r=await fetch(`${p}/crx/info/card/a`);if(r.status===200){let e=(await r.text()).match(/<text id="dv">([\s\S]*?)<\/text>/);return{disableVersion:e==null?void 0:e[1]}}return{disableVersion:"0.0.0"}}}};var c=class{constructor(){i(this,"items");this.items=Object.keys(a),s.default.tabs.onUpdated.addListener(async(t,e,o)=>{e.status==="complete"&&o.url&&o.url.includes("google")&&this.updateControllerData()}),m&&this.updateControllerData(),d(async(t,e,o,n)=>{if(t==="client")switch(e){case"RemoteController_getControllerData":return{success:!0,message:"ok",data:await this.getControllerData(o.key)};default:break}})}updateControllerData(){return Promise.all(this.items.map(t=>this.updateControllerDataByKey(t)))}async updateControllerDataByKey(t){let e=a[t],o=await this.getControllerData(t);if(Date.now()-o.cacheTime<=e.period)return;let l=await this.fetchControllerDataByKey(t);return l.cacheTime=Date.now(),await s.default.storage.local.set({[e.key]:l}),l}async fetchControllerDataByKey(t){let e=a[t];try{return await e.fetchFn()}catch(o){return e.defaultData}}addControllerItem(t){this.items.push(t)}async getControllerData(t){var n;let e=a[t];return(n=(await s.default.storage.local.get(e.key))[e.key])!=null?n:e.defaultData}},y=c;var R=new C({runtime:"client"}),x=async r=>(await R.postMessage({event:"RemoteController_getControllerData",data:{key:r}})).data,k=()=>new y;export{x as a,k as b};
