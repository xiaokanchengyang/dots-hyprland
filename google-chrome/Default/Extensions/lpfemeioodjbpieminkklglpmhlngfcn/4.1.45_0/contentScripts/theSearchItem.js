import{a as B,b,c as g,d as M,e as H,f as p,h as R}from"../chunks/GPEOGYVV.js";import{e as x}from"../chunks/DH3EQYWO.js";import"../chunks/6XGCBYK4.js";import"../chunks/IWA7K7OR.js";import{a as K}from"../chunks/TSWQGEA7.js";import{l as L}from"../chunks/KHXRDVYA.js";import{a as E}from"../chunks/XXRKTLQP.js";import{g as T,h as C,j as v}from"../chunks/3RR3WT5X.js";import{f,i as m}from"../chunks/3PS7M655.js";var D={"en-US":'div[aria-label="Ads"]',"zh-CN":'div[aria-label="\u5E7F\u544A"]',"zh-TW":'div[aria-label="\u5EE3\u544A"]',ja:'div[aria-label="\u5E83\u544A"]',es:'div[aria-label="Anuncios"]',ko:'div[aria-label="\uAD11\uACE0"]',pt:'div[aria-label="An\xFAncios"]',fr:'div[aria-label="Annonces"]',de:'div[aria-label="Anzeigen"]',vi:'div[aria-label="Qu\u1EA3ng c\xE1o"]',it:'div[aria-label="Annunci"]',ru:'div[aria-label="\u0420\u0435\u043A\u043B\u0430\u043C\u0430"]',nl:'div[aria-label="Advertenties"]',pl:'div[aria-label="Reklamy"]',tr:'div[aria-label="Reklamlar"]',sr:'div[aria-label="Oglasi"]',th:'div[aria-label="\u0E42\u0E06\u0E29\u0E13\u0E32"]',af:'div[aria-label="Advertensies"]',ak:'div[aria-label="Edwadie ho dawurub\u0254"]',ban:'div[aria-label="Iklan"]',ca:'div[aria-label="Anuncis"]',ceb:'div[aria-label="Mga pahibalo"]',cy:'div[aria-label="Hysbysebion"]',da:'div[aria-label="Annoncer"]',et:'div[aria-label="Reklaamid"]',eu:'div[aria-label="Iragarkiak"]',ee:'div[aria-label="Boblododowo"]',fil:'div[aria-label="Mga Ad"]',ga:'div[aria-label="F\xF3gra\xED"]',xh:'div[aria-label="Iintengiso"]',zu:'div[aria-label="Izikhangiso "]',is:'div[aria-label="Augl\xFDsingar"]',sw:'div[aria-label="Matangazo"]',kg:'div[aria-label="Ba luzayisu"]',lv:'div[aria-label="Rekl\u0101mas"]',lt:'div[aria-label="Sk."]',loz:'div[aria-label="Zefundotwa"]',hu:'div[aria-label="Hirdet\xE9sek"]',mg:'div[aria-label="Doka"]',ms:'div[aria-label="Pelbagai Iklan"]',pcm:'div[aria-label="Advert"]',no:'div[aria-label="Annonser"]',nso:'div[aria-label="Dipapat\u0161o"]',ny:'div[aria-label="Zotsatsa"]',uz:'div[aria-label="Reklama"]',ro:'div[aria-label="Anun\u021Buri"]',crs:'div[aria-label="Bann piblisite"]',so:'div[aria-label="Xayeysiisyo"]',st:'div[aria-label="Lipapatso"]',fi:'div[aria-label="Mainos"]',tn:'div[aria-label="Dipapatso"]',chr:'div[aria-label="\u13D5\u13A6\u13C3\u13E3\u13B8\u13AF"]',lo:'div[aria-label="\u0EC2\u0E84\u0EAA\u0EB0\u0E99\u0EB2"]',si:'div[aria-label="\u0DAF\u0DD0\u0DB1\u0DCA\u0DC0\u0DD3\u0DB8\u0DCA"]',kn:'div[aria-label="\u0C9C\u0CBE\u0CB9\u0CC0\u0CB0\u0CBE\u0CA4\u0CC1\u0C97\u0CB3\u0CC1"]',te:'div[aria-label="\u0C2A\u0C4D\u0C30\u0C15\u0C1F\u0C28\u0C32\u0C41"]',ta:'div[aria-label="\u0BB5\u0BBF\u0BB3\u0BAE\u0BCD\u0BAA\u0BB0\u0B99\u0BCD\u0B95\u0BB3\u0BCD"]',or:'div[aria-label="\u0B2C\u0B3F\u0B1C\u0B4D\u0B1E\u0B3E\u0B2A\u0B28\u0B17\u0B41\u0B5C\u0B3F\u0B15"]',gu:'div[aria-label="\u0A9C\u0ABE\u0AB9\u0AC7\u0AB0\u0ABE\u0AA4\u0ACB"]',pa:'div[aria-label="\u0A07\u0A38\u0A3C\u0A24\u0A3F\u0A39\u0A3E\u0A30"]',bn:'div[aria-label="\u09AC\u09BF\u099C\u09CD\u099E\u09BE\u09AA\u09A8"]',hi:'div[aria-label="\u0935\u093F\u091C\u094D\u091E\u093E\u092A\u0928"]',mr:'div[aria-label="\u091C\u093E\u0939\u093F\u0930\u093E\u0924\u0940"]',ne:'div[aria-label="\u0935\u093F\u091C\u094D\u091E\u093E\u092A\u0928\u0939\u0930\u0942"]',am:'div[aria-label="\u121B\u1235\u1273\u12C8\u1242\u12EB\u12CE\u127D"]',hy:'div[aria-label="\u0533\u0578\u057E\u0561\u0566\u0564"]',ka:'div[aria-label="\u10E0\u10D4\u10D9\u10DA\u10D0\u10DB\u10D0"]',uk:'div[aria-label="\u0420\u0435\u043A\u043B\u0430\u043C\u0430"]',sr2:'div[aria-label="\u041E\u0433\u043B\u0430\u0441\u0438"]',mn:'div[aria-label="\u0421\u0443\u0440\u0442\u0430\u043B\u0447\u0438\u043B\u0433\u0430\u0430"]',mk:'div[aria-label="\u0420\u0435\u043A\u043B\u0430\u043C\u0438"]',kk:'div[aria-label="\u0416\u0430\u0440\u043D\u0430\u043C\u0430"]',ky:'div[aria-label="\u0416\u0430\u0440\u043D\u0430\u043C\u0430\u043B\u0430\u0440"]',be:'div[aria-label="\u0420\u044D\u043A\u043B\u0430\u043C\u0430"]',el:'div[aria-label="\u0394\u03B9\u03B1\u03C6\u03B7\u03BC."]'},q="div.uEierd",I=class{constructor(){m(this,"currentLanguage","en-US");m(this,"currentAdInfo",null)}adBoxFinder(){for(let e in D){let a=e,r=document.querySelector(D[a]);if(r)return this.currentLanguage=a,r}return null}verifier(){let e=location.hostname.startsWith("www.google")&&location.pathname.startsWith("/search");return!!this.adBoxFinder()&&e}templateFinder(){let e=document.querySelectorAll(q);if(e.length>0){let a=v(0,e.length-1);return e[a]}return null}adItemDomReset(e){let a=e.querySelector("div[data-text-ad]"),r=a==null?void 0:a.firstChild;if(!r)throw new Error("textAdInner dom not found");let s=r.cloneNode(!0);r.innerHTML="";let i=s.querySelector("span.U3A9Ac.qV8iec");if(!i)throw new Error("titleTab dom not found");r.appendChild(i);let t=s.querySelector("div.v5yQqb");if(!t)throw new Error("titleBox dom not found");r.appendChild(t);let n=s.querySelector("div.MUxGbd.yDYNvb.lyLwlc");if(!n)throw new Error("descBox dom not found");r.appendChild(n);let l=r.querySelector('div[role="button"][title]');if(!l)throw new Error("whyAdBtn dom not found");return l.remove(),!0}adItemDomSetup(e){var u;let a=v(0,g.length-1),r=g[a];this.currentAdInfo=r;let s=e.querySelector('a div[role="heading"]');if(s){s.innerHTML=r.title;let d=s.closest("a");if(d){let c=r.link+`-${H}`;this.currentAdInfo.link=c,d.href=c,d.dataset.pcu=c,d.dataset.rw="",d.classList.remove("fdYsqf")}else throw new Error("setup aTag dom failed")}else throw new Error("setup heading dom failed");let i=e.querySelector("div.OSrXXb span");if(i)i.innerHTML=r.subTitle;else throw new Error("setup subTitle dom failed");let t=e.querySelector('span[role="text"]');if(t)t.innerHTML=r.linkText,t.dataset.dtld=r.linkText;else throw new Error("setup linkTag dom failed");let n=e.querySelector("div.MUxGbd.yDYNvb.lyLwlc");if(n)n.innerHTML=r.description;else throw new Error("setup description dom failed");let l=e.querySelector("span.H9lube");if(l){l.classList.remove("fJOpI");let d=l.querySelector("img");if(d)d.src=r.logo;else{let c=e.querySelector("svg");if(c){let h=document.createElement("img");h.style.width="18px",h.style.height="18px",h.src=r.logo,(u=c.parentNode)==null||u.replaceChild(h,c)}}}else throw new Error("setup logo img dom failed");return!0}backListChecker(){let e=[],a=i=>{let t=O(i)?i.slice(0,i.length-1):i;try{return new URL(t).host}catch(n){return t}},r=document.querySelectorAll("#rso > div a > h3");r.length>0&&r.forEach(i=>{var n;let t=(n=i.parentElement)==null?void 0:n.getAttribute("href");t&&e.push(a(t))});let s=document.querySelectorAll(q);return s.length>0&&s.forEach(i=>{let t=i.querySelector('a div[role="heading"]'),n=t==null?void 0:t.closest("a");if(n){let l=n.getAttribute("href");l&&e.push(a(l))}}),C(M,e).length>0}render(){try{let e=this.templateFinder();if(!e)throw new Error("GoogleSearchItemBuilder template dom not found");let a=e.cloneNode(!0);if(this.adItemDomReset(a),this.adItemDomSetup(a),this.backListChecker())throw new Error("GoogleSearchItemBuilder with backlist");return e.insertAdjacentElement("afterend",a),{lang:this.currentLanguage,el:a,success:!0,adInfo:this.currentAdInfo}}catch(e){return{lang:null,el:null,success:!1,adInfo:null}}}},_=I;var P=f(E());var U=P.default.runtime.getManifest().version,S={google:new _},A=class{constructor(){m(this,"currentBuilderName",null);m(this,"builderInstance",null)}async startRender(){var n;if(x()||(await p()).disableVersion===U)return!1;let a=Object.keys(S);for(let l=0;l<a.length;l++){let u=a[l];if(S[u].verifier()){this.currentBuilderName=u,this.builderInstance=S[u];break}}if(!this.builderInstance||this.builderInstance.backListChecker())return!1;let r=await y();if(L&&r&&r.hasAdCount<r.nextAdCount)return(n=this.builderInstance)!=null&&n.adBoxFinder()&&w({hasAdCount:r.hasAdCount+1}),!1;let{success:s,lang:i,adInfo:t}=this.builderInstance.render();if(s){i&&G(i),t&&t.link&&z(t.link);let l=await p();l.interval&&l.interval>0&&w({hasAdCount:0,nextAdCount:l.interval,lastShowTime:Date.now()})}return!0}},N=A;var k=f(E());var F=f(K()),Y=()=>{new N().startRender()},w=async o=>{var a;let e=(a=await y())!=null?a:{hasAdCount:0,nextAdCount:0,lastShowTime:0};return await k.default.storage.local.set({[b]:T(o,e)})},y=async o=>{try{let a=(await k.default.storage.local.get(b))[b];return o?a[o]:a}catch(e){return null}},G=o=>{let e=`
    div[role="button"][title][tabindex="0"] {display: none !important;pointer-events: none !important;}
  `,a=document.createElement("style");a.setAttribute("type","text/css"),a.innerHTML=e,document.head.appendChild(a)},O=o=>o[o.length-1]==="/",z=o=>{try{let a=new URL(o).searchParams.get("ref"),r=(0,F.default)().format("YYYY-MM-DD HH:mm:ss");fetch("https://api.phtracker.com/app/ref_count",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:{ref:a+"-s",date:r}})})}catch(e){}};B!=="webchatgpt"&&R();Y();
