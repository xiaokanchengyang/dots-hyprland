import{b as i}from"../chunks/R2KXBBZI.js";import{a}from"../chunks/SSXGEXEV.js";import{f as r}from"../chunks/3RR3WT5X.js";import"../chunks/3PS7M655.js";var m=window.fetch,h=async(c,o)=>{let t=r(o);if(["https://chat.openai.com/backend-api/conversation","https://chatgpt.com/backend-api/conversation","https://chatgpt.com/backend-anon/conversation"].includes(c)&&o.method==="POST"&&o.headers.accept==="text/event-stream"){let e=t.body;try{let n=JSON.parse(e),s=await i();s&&n.messages.unshift({author:{role:"system"},content:{content_type:"text",parts:[s]},id:a(),metadata:{}}),e=JSON.stringify(n)}catch(n){}t.body=e}return m(c,t!=null?t:o).then(function(e){return new Promise(n=>{n(e)})})};window.fetch=h;
